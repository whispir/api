<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Whispir Platform API</title>
    <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon">
    <link rel="icon" href="images/favicon.png" type="image/x-icon">

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["go","xml"]);
        });
      </script>
    <script>
      //This is Google's default GA code
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-7856627-21', 'auto');
      ga('send', 'pageview');
      //This does hash-click tracking (inspired by http://stackoverflow.com/a/4813223)
      $(document).ready(function() {
        $('.tocify-item a').on('click', function(){
          ga('send', 'pageview', {'page': location.pathname + location.search  + location.hash});
        });
      });
    </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/Whispir_Brandmark_RGB.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="go">json</a>
              <a href="#" data-language-name="xml">xml</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://whispir.io/register'>Create an API Key</a></li>
            <li><a href='http://github.com/tripit/slate'>Documentation by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
        <h1 id="whispir-platform-api">Whispir Platform API</h1>

<blockquote>
<p>API Endpoint</p>
</blockquote>
<pre><code class="highlight plaintext">https://api.&lt;region&gt;.whispir.com
</code></pre>

<blockquote>
<blockquote>
<p>Whispir regions are -</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">AU - https://api.au.whispir.com
AP - https://api.ap.whispir.com
AP1 - https://api.ap1.whispir.com
NZ - https://api.nz.whispir.com
US - https://api.us.whispir.com
IT - https://api.it.whispir.com
EDU - https://api.education.whispir.com
</code></pre>

<blockquote>
<p>API Authorization</p>

<blockquote>
<p>Users must use an <strong>API Key</strong> and <strong>Authorization Header</strong> to access the Whispir API. These are available by signing up for a account at <a href="https://whispir.io">whispir.io</a>.</p>
</blockquote>

<p>Summary of Resources</p>

<blockquote>
<p>The following resource endpoints are accessible when using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">/messages
/messages/:id/messagestatus
/messages/:id/messageresponses
/templates
/responserules
/contacts
/contacts/:id/devices
/distributionlists
/scenarios
/events
/imports
/resources
/activities
/users
/customlists
/callbacks
/callbacks/:id/calls
/workspaces
/apps
</code></pre>

<blockquote>
<blockquote>
<p><strong>Note:</strong> The <strong>events</strong> endpoint is only available for users with the Events Module.</p>
</blockquote>

<p>Example Request</p>
</blockquote>
<pre><code class="highlight shell"><span class="c"># Authorization and apikey are provided in the registration processes</span>
curl -H <span class="s2">"Authorization: Basic &lt;YOUR AUTHORIZATION HEADER&gt;"</span> -H <span class="s2">"x-api-key: &lt;YOUR API KEY&gt;"</span>
     https://api.&lt;region&gt;.whispir.com/messages?apikey<span class="o">=</span>&lt;YOUR API KEY&gt;
</code></pre>

<blockquote>
<p>Example Response</p>
</blockquote>
<pre><code class="highlight plaintext">HTTP/1.1 200 OK
</code></pre>
<pre><code class="highlight shell">&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span> <span class="nv">standalone</span><span class="o">=</span><span class="s2">"yes"</span>?&gt;
&lt;ns2:return xmlns:ns2<span class="o">=</span><span class="s2">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> xmlns:ns3<span class="o">=</span><span class="s2">"http://schemas.api.&lt;region&gt;.whispir.com"</span>&gt;
    &lt;status&gt;No records found&lt;/status&gt;
&lt;/ns2:return&gt;
</code></pre>

<p>Built by developers, for developers, Whispir is the place where you can easily build communications into your app – SMS, email, push, voice, chat, web, social, &amp; rich messages.</p>

<p>The Whispir API gives developers the ability to:</p>

<ul>
<li>Create, send and retrieve multi-channel messages over 8 different channels</li>
<li>Invoke scenario based communications for quick, effective and targeted communications</li>
<li>Publish messages to internal or external web pages, RSS feeds and social networks</li>
<li>Asynchronously receive all responses to a given message and perform analysis on the data</li>
</ul>

<h3 id="communications-template-api">Communications Template API</h3>

<p>The Whispir.io Template API gives developers the ability to:</p>

<ul>
<li>Create rich, cross-channel message templates that can be managed by designers within the Whispir Rich Message Studio.</li>
<li>Ensure a DRY (don&rsquo;t repeat yourself) pattern within developer code by separating the communication content from code</li>
<li>Reduce code change by managing content elsewhere</li>
</ul>

<h3 id="event-management-api">Event Management API</h3>

<p>The Whispir.io API Event Management API provides developers with the tools needed to manage the communication around events that happen:</p>

<ul>
<li>When events occur in your organisation, manage them using Whispir.io</li>
<li>Save different event details; Severity, Priority, Description and Tasks to ensure a path to a seamless resolution</li>
<li>Automatically inform teams through Whispir&rsquo;s integrated cross-channel messaging, ensuring that you know who has received the message, and more importantly; who hasn&rsquo;t</li>
</ul>

<h3 id="contact-management-api">Contact Management API</h3>

<p>The Whispir.io API provides developers with the ability to manage the recipients of their messages:</p>

<ul>
<li>Store contact information in a cloud based highly available and accessible environment</li>
<li>Use standards based methods to create, update, and delete contact information</li>
<li>Build forms to allow contacts to self-register and manage their account, with auto-generated email notifications</li>
<li>Create, update and delete distribution lists that can be accessed for messaging at a later date</li>
</ul>

        <h1 id="api-gateway-changes">API Gateway Changes</h1>

<p>Whispir has recently updated the API Gateway Service for all its instances. This update brings in the ability to better route the API requests to its regional instances, and also lays the foundation for more API Gateway related benefits it will bringing to its customers in the future.</p>

<p>The changes we are rolling in now are primarily in two areas.</p>

<ol>
<li>The API URL will be more specific to your region</li>
<li>The API Key information is also to be passed in the headers, apart from the current query param</li>
</ol>

<aside class="notice">
Whispir has set a timeline of 6 months for its customers to update their API libraries, and systems to adapt to these changes. This means, you can continue to make your API calls in the current way till 31-Jan-2019 (23:59:59 GMT). 
</aside>

<p>However, Whispir requests you to make efforts to change as stated below at the earliest possible time. The 31-Jan-2019 is a fixed date, and no extention will be provided. If no changes are made by the said date, your API calls will be rejected by Whispir.</p>

<h2 id="new-api-url">New API URL</h2>

<blockquote>
<p>Current API Base URL</p>
</blockquote>
<pre><code class="highlight plaintext">https://api.whispir.com
</code></pre>

<blockquote>
<p>New API URL based on regions -</p>
</blockquote>
<pre><code class="highlight plaintext">AU - https://api.au.whispir.com
AP - https://api.ap.whispir.com
AP1 - https://api.ap1.whispir.com
NZ - https://api.nz.whispir.com
US - https://api.us.whispir.com
IT - https://api.it.whispir.com
EDU - https://api.education.whispir.com
</code></pre>

<p>When you are making a call to Whispir API today, the URL is simply <code class="prettyprint">https://api.whispir.com</code>. This is a single URL for all the regions. Going forward, the URL will be more inline with your account&rsquo;s region making it <code class="prettyprint">https://api.&lt;region&gt;.whispir.com</code>.</p>

<p>The region and its corresponding URL is as following -</p>

<table>
    <thead>
    <tr><th>Region</th><th>API Base URL</th></tr>
    </thead>
    <tbody>
        <tr><td>AU</td><td>https://api.au.whispir.com</td><tr>
        <tr><td>AP</td><td>https://api.ap.whispir.com</td><tr>
        <tr><td>AP1</td><td>https://api.ap1.whispir.com</td><tr>
        <tr><td>NZ</td><td>https://api.nz.whispir.com</td><tr>
        <tr><td>US</td><td>https://api.us.whispir.com</td><tr>
        <tr><td>IT</td><td>https://api.it.whispir.com</td><tr>
        <tr><td>EDU</td><td>https://api.education.whispir.com</td><tr>
    </tbody>
</table>

<p><strong>What is my region?</strong></p>

<ol>
<li>Login to your Whispir.io Account, and click on any existing key. The information is available there as <code class="prettyprint">Enviroment</code> value. Eg: for <code class="prettyprint">ap.whispir.com</code>, your region is <code class="prettyprint">ap</code>. </li>
<li>By asking your company administrator. The region is usually revealed from your Platform URL, which would be in the format of <code class="prettyprint">https://&lt;region&gt;.whispir.com</code></li>
<li>If you are still unsure, Please reach out to <a href="mailto:support@whispir.com?subject=What%20is%20my%20region?">Whispir Support</a> by passing your API Key. Support would advise on your region specifc API URL.</li>
</ol>

<h2 id="sending-api-key">Sending API Key</h2>

<blockquote>
<blockquote>
<p>Taking an example, If your region is AP, then your -</p>
</blockquote>

<p>Current API Key sending mechanism</p>
</blockquote>
<pre><code class="highlight plaintext">https://api.whispir.com?apikey=YOUR-API-KEY
Authorization: Basic YOUR-AUTH-HEADER
</code></pre>

<blockquote>
<p>New API URL based on region, and api key is sent via headers -</p>
</blockquote>
<pre><code class="highlight plaintext">https://api.ap.whispir.com?apikey=YOUR-API-KEY
Authorization: Basic YOUR-AUTH-HEADER
x-api-key: YOUR-API-KEY
</code></pre>

<blockquote>
<blockquote>
<p>The only change here is the addition of a new header value to carry the api key, and change of the url to be region specific.</p>
</blockquote>
</blockquote>

<p>Whispir needs your API Key to validate that the request is made genuinely by you, and ties it against your account for rate limiting, and throughput capacity purposes. Currently, the api key information is sent via the url query params.</p>

<p>In line with the new API Gateway changes, the key information has to be passed in via the &ldquo;headers&rdquo; as well, using the <code class="prettyprint">x-api-key</code> header value.</p>

<p><strong>Important Points:</strong></p>

<ol>
<li>The apikey is to be passed both as a query param and also as a header value.</li>
<li>The header key to be used is <code class="prettyprint">x-api-key</code>. Eg: <code class="prettyprint">x-api-key: YOUR-API-KEY</code>. The value is same as the apikey value sent in the headers.</li>
<li>The order in the headers does not matter. <code class="prettyprint">x-api-key</code> can be passed as the last header value, or the first, or somewhere in the middle. Sending it is important. The order is not so much so.</li>
<li>If the API Key value is incorrect, or not passed propery, then a <code class="prettyprint">403 Forbidden</code> error will be returned by Whispir.</li>
<li>All other header parameters that you are sending today, should be passed as-is. DO NOT remove them. DO NOT remove them. DO NOT remove them. You have been warned thrice.</li>
</ol>

<h2 id="sni-compliance">SNI Compliance</h2>

<p>(Server Name Indication (SNI) is a TLS extension that allows a single endpoint to provide multiple, valid certificates based on the resource being requested. SNI was first introduced in 2004 and has had support across major browsers since 2006, and most web servers since 2009. </p>

<p>Almost all modern programming languages have SNI support through their native cryptographic libraries, though this is not true for all versions of those programming languages. For example, Java introduced native SNI support in 2011 with the release of Java 1.7. Integrations that use native Java 1.6 libraries, which is currently in Extended Support and due for End of Life in December, will not have support for SNI.)</p>

<p>Apart from the programming changes, this change is more done at the infrastructure level. So, please speak to your Architect, or Ops Admins in relation to this change. The change will involve all clients needing to be compliant to Server Name Indication (SNI). Whispir is undertaking measures to minimise the impact of client-side integrations lacking this compliance - however we encourage all clients to be compliant to SNI as soon as possible.</p>

<p>If your application is not SNI enabled, then the API calls made to Whispir using https will fail. Whispir is hosting its new API Service using Amazon&rsquo;s Web Services. The API Gateway is fronted by a Amazon CDN CloudFront. This means, if the calling party (your application server/integration server) does not understand SNI, the certificate handshake will fail, as it may not request specifically to connect with api.whispir.com, and CloudFront will then choose to provide its default SSL cert, which will result in your service treating this as a SSL hand-shake error. With SNI Enabled, your application server can specifically ask for api.whispir.com certificate, and things will work as expected.</p>

<p>You can connect to the following URL - <a href="https://api-sni.whispir.com/">http://api-sni.whispir.com/</a> to test if your application server supports SNI handling. Please pass a valid API Key in the headers as stated above.</p>

<h2 id="ip-restrictions">IP Restrictions</h2>

<p>We host our REST API service on a high availability load balanced configuration, and so no fixed IPs are available for whitelisting. If your solution requires whitelisting of <a href="https://api.whispir.com">https://api.whispir.com</a>, please do so based on domain name (according to your region) or look for the new set of <a href="https://ip-ranges.amazonaws.com/ip-ranges.json">Amazon IP&rsquo;s here</a>. Please filter by service as &ldquo;CLOUDFRONT&rdquo;.</p>

<h2 id="change-of-ssl-certs">Change of SSL Certs</h2>

<p>The current API gateway URL is set to change as per your region. This means, the leaf SSL certs that you might have stored in your cert store would no longer be relevant. Please review the certs that you have stored, and ensure that the latest certs are consumed. Whispir&rsquo;s new certs are derived from the same root and intermediate chain of trust. Your application server should be able to handle it as per normal.</p>

<p>Also, the current <a href="https://api.whispir.com">https://api.whispir.com</a> certificate will expire on 20th September 2018. Please ensure that you update the certificate if you are not able to move to the regional gateway endpoints.</p>

<p>If you have any queries, related to this, please do reach out to <a href="mailto:support@whispir.com?subject=API%20Gateway%20Changes">Whispir Support</a>. Provide as much detail as possible in relation to the help you need, or the error you have faced with this change.</p>

        <h1 id="getting-started">Getting Started</h1>

<p>Getting started with the Whispir.io API is easy:</p>

<ol>
<li>Register with Whispir.io to create your account - (<a href="https://whispir.io/register">Free 30 Day Trial</a>)</li>
<li>Create an App inside the Whispir.io App Dashboard - (<a href="https://whispir.io/dashboard">App Dashboard</a>)</li>
<li>Check your connectivity to the API</li>
<li>Try it out! Send your first message</li>
</ol>

<h2 id="register-with-whispir">Register with Whispir</h2>

<p>The Whispir.io API is available for all existing Whispir customers to use.  If you&rsquo;re already a Whispir customer, great! Your existing username and password will work straight away.  You don&rsquo;t even need to contact us.</p>

<p>Simply log in to (<a href="https://whispir.io/login">whispir.io</a>) and create an app inside the app dashboard.</p>

<p>If you&rsquo;re a new customer and are interested in using the API, sign up for our (<a href="https://whispir.io/register">Free 30 Day Trial</a>). No Credit Card Required.  </p>

<h2 id="create-an-app">Create an app</h2>

<p>Follow these simple steps to create your first Whispir.io Application.</p>

<ol>
<li><p>Log in to the (<a href="https://whispir.io/login">whispir.io dashboard</a>).</p></li>
<li><p>If you haven&rsquo;t validated your e-mail address, you&rsquo;ll need to do this first by clicking the <em>validate</em> link.  This will send you an e-mail.  Simply click the link in the e-mail you receive and your e-mail will be validated.</p></li>
<li><p>You should now see the <em>Create App</em> button at the top of the screen.  Click this button to create your first app.</p></li>
<li><p>You&rsquo;ll need to give your app a <strong>Name</strong> and a <strong>Description</strong>. These help you identify your app within the App Dashboard.  These won&rsquo;t be exposed to the users of your app.</p></li>
<li><p>Click <em>Create</em>. That&rsquo;s it, you&rsquo;ve now created your first Whispir.io App.<br>
An API key will be generated for this application automatically.  You&rsquo;ll need this API key to start making API calls for this application.</p></li>
</ol>

<p>Now that you&rsquo;ve got your App API key, you can check your connectivity to the API using the steps below.</p>

<h2 id="connect-to-the-api">Connect to the API</h2>

<blockquote>
<p>Connect to the API</p>

<blockquote>
<p>Using the information on the left, you can execute the following curl statement:</p>
</blockquote>
</blockquote>
<pre><code class="highlight shell">curl -H <span class="s2">"Authorization: &lt;Your Authorization Header&gt;"</span> -H <span class="s2">"x-api-key: &lt;YOUR API KEY&gt;"</span>
     https://api.&lt;region&gt;.whispir.com?apikey<span class="o">=</span>&lt;Your API Key&gt;

<span class="c"># with sample values</span>

curl -H <span class="s2">"Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk"</span> -H <span class="s2">"x-api-key: 89asdfohasd89023rsd"</span> 
     https://api.&lt;region&gt;.whispir.com?apikey<span class="o">=</span>89asdfohasd89023rsd

<span class="c"># If all is correct, the following response should be expected (The API defaults to an XML response)</span>

&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span> <span class="nv">standalone</span><span class="o">=</span><span class="s2">"yes"</span>?&gt;
&lt;ns2:company <span class="nv">xmlns</span><span class="o">=</span><span class="s2">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span>
             xmlns:ns2<span class="o">=</span><span class="s2">"http://schemas.api.&lt;region&gt;.whispir.com"</span>&gt;
    &lt;link <span class="nv">method</span><span class="o">=</span><span class="s2">"GET"</span>
          <span class="nv">rel</span><span class="o">=</span><span class="s2">"retrieveWorkspaces"</span>
          <span class="nv">uri</span><span class="o">=</span><span class="s2">"https://api.&lt;region&gt;.whispir.com/workspaces?apikey=89asdfohasd89023rsd"</span>/&gt;
    ...
&lt;/ns2:company&gt;
</code></pre>

<p>The first thing you&rsquo;ll need to do is generate your <strong>Authorization Header</strong> for your API requests. You&rsquo;ll need to use the Authorization Header on every request that you submit to the Whispir.io API.</p>

<p><strong>Whispir uses Basic HTTP Authentication for all API requests.</strong></p>

<p>You can generate the Authorization header in most programming languages very easily, however for simplicity you can generate it here by filling in the form below.</p>

<p><strong>Note:</strong> Your Whispir authentication information is not submitted or stored, it is only used as part of an algorithm to automatically generate your header.</p>

<p>Whispir Username:<br/><input id="username" name="username" style="width: 60%; margin-bottom: 3px;" type="text"> <br/>
Whispir Password:<br/><input id="password" name="password" style="width: 60%" type="password"></p>

<p><button onclick="doEncode()" name="encode" id="encode">Generate your Authorization Header</button></p>

<p>Authorization Header:<br/><input id="result" name="result" style="width: 60%" type="text"> <br/></p>

<p>Once you have generated this header, you can use it in a request to the API. This will ensure everything is working correctly. To do this you can use a programming lanugage, a curl script, or a generic REST client.</p>

<blockquote>
<p>NOTE: When you change your password, you&rsquo;ll need a new authorization header.</p>
</blockquote>

<h3 id="connect-using-a-programming-language">Connect using a programming language</h3>

<p>Whispir.io provides some basic code samples in a range of languages to assist users in geting started with the API.  Once you have created your App in the Whispir.io Dashboard, simply click on the <em>Code</em> tab on the left side of the screen.</p>

<p>Select the App, and the action that you would like to perform (e.g. Send an SMS message).</p>

<p>This will automatically generate the code for you.  You can copy this code into your IDE, import any required dependencies, and run it.</p>

<p>You will need to replace the following elements of the request:</p>

<ol>
<li>App API Key</li>
<li>Authorization Header</li>
<li>Recipient information</li>
<li>Message Subject</li>
<li>Message Content</li>
</ol>

<p>Once you have verified you have replaced all of these, run the request in your IDE and you will receive your first message using the Whispir.io API.</p>

<h3 id="using-curl">Using cURL</h3>

<p>cURL is a computer software project providing a library and command-line tool for transferring data using various protocols. One key use of cURL is to make HTTP requests.</p>

<p>In order to test your ability to use the Whispir.io API, cURL is a very quick mechanism to enter on to a command line interface and make sure everything is set up correctly.</p>

<p>Generate your Authorization Header using the form above, and using the code snippets in the code panel, you can execute your first request to the Whispir.io API.</p>

<h3 id="using-a-generic-rest-client">Using a generic REST Client</h3>

<p>If you&rsquo;re unsure about using curl, you can install a REST Client in your browser and test the calls through there.  Whispir recommends the following clients:</p>

<ol>
<li><a href="https://www.getpostman.com/">Postman - Chrome/IE</a></li>
<li><a href="https://restclient.net">RESTClient - Firefox</a></li>
</ol>

<p>To test your connectivity, you will need to enter the following parameters:</p>

<ol>
<li>The URL that you would like to request</li>
<li>Your App API Key</li>
<li>Your Authorization Header</li>
<li>(Optional) The Content-Type/Accept Headers</li>
</ol>

<p>The HTTP call will look like the following:</p>

<p><code class="prettyprint">GET https://api.&lt;region&gt;.whispir.com?apikey=89asdfohasd89023rsd</code></p>

<p>With the following headers (as a minimum).</p>

<p><code class="prettyprint">Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk</code> and <code class="prettyprint">x-api-key: 89asdfohasd89023rsd</code></p>

<p>Once you have executed this request, you should receive a <strong>200 OK</strong> response from the REST Client. This means that you have connectivity to the Whispir.io API and can start building your App.</p>

<p>If you received another response, please continue to the next section to understand how to resolve your issues.</p>

<h3 id="resolving-connectivity-issues">Resolving connectivity issues</h3>

<p>If you get a different response than <strong>HTTP 200 OK</strong>, perform the following:</p>

<p><strong>HTTP 403 Forbidden, or HTTP 401 Unauthorized</strong></p>

<ul>
<li>Your Authorization header may not be quite right, verify your username and password browsing to <a href="https://whispir.io">Whispir.io</a> and clicking &lsquo;Log In&rsquo;</li>
<li>If you can successfully log in, then try and re-generate the Base64 encoded username and password using the form above.</li>
<li>If you cannot log in, then it&rsquo;s possible your account isn&rsquo;t active. Contact your Whispir Administrator, or send a message to our support team at <a href="mailto:support@whispir.io">support@whispir.io</a>.</li>
</ul>

<p><strong>Other HTTP errors or no connectivity at all</strong></p>

<ul>
<li>If you&rsquo;re still having issues, please contact us at <a href="mailto:support@whispir.io">support@whispir.io</a>.</li>
</ul>

<h2 id="sending-messages">Sending Messages</h2>

<blockquote>
<p>Sending Messages</p>

<blockquote>
<p>Send your first message using curl.</p>
</blockquote>
</blockquote>
<pre><code class="highlight shell">curl -H <span class="s2">"Authorization: Basic &lt;YOUR AUTH HEADER&gt;"</span>
     -H <span class="s2">"x-api-key: &lt;YOUR API KEY&gt;"</span>
     -H <span class="s2">"Content-Type: application/vnd.whispir.message-v1+json"</span>
     -H <span class="s2">"Accept: application/vnd.whispir.message-v1+json"</span>
     -d <span class="s1">'{
            "to": "&lt;DESTINATION PHONE NUMBER(S)&gt;",
            "subject": "This is the first line of my SMS",
            "body": "This is the content of my SMS"
         }'</span>
     https://api.&lt;region&gt;.whispir.com/messages?apikey<span class="o">=</span>&lt;YOUR API KEY&gt;
</code></pre>

<blockquote>
<blockquote>
<p>Once you submit this, Whispir will send you back an <strong>HTTP 202 Accepted</strong> stating that your request has been accepted for processing.  </p>

<p>Within a few seconds your phone should be buzzing away.</p>
</blockquote>
</blockquote>

<h3 id="sending-messages">Sending Messages</h3>

<p>By now you should be able to connect to the API and can issue requests and receive responses. Based on this, you can now send your first SMS message using the API.</p>

<p>This is very similar to the previous request you executed to test your connectivity, but instead of using an <strong>HTTP GET</strong> to retrieve information, this time you&rsquo;re going to use an <strong>HTTP POST</strong> to ask Whispir to do something.</p>

<p>As you&rsquo;re sending a message, you need to tell Whispir <em>who</em> to send it to, and <em>what</em> the type of content it is.</p>

<p>You&rsquo;re going to use the URL <code class="prettyprint">https://api.&lt;region&gt;.whispir.com/messages</code> as the API endpoint.</p>

<h3 id="content-type">Content Type</h3>

<blockquote>
<p>Samples in XML / JSON</p>

<blockquote>
<p>The following example shows how to use a POST request to send the message in XML or JSON.  Use the selector at the top to choose your syntax.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">POST https://api.&lt;region&gt;.whispir.com/messages?apikey=89asdfohasd89023rsd
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: 89asdfohasd89023rsd
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="o">:</span><span class="x"> </span><span class="s">"&lt;DESTINATION PHONE NUMBER&gt;"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="o">:</span><span class="x"> </span><span class="s">"This is the first line of my SMS"</span><span class="p">,</span><span class="x">
    </span><span class="s">"body"</span><span class="o">:</span><span class="x"> </span><span class="s">"This is the content of my SMS"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml
Accept: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>[DESTINATION PHONE NUMBER]<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>This is the first line of my SMS<span class="nt">&lt;/subject&gt;</span>    
    <span class="nt">&lt;body&gt;</span>This is the content of my SMS<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>

</code></pre>

<p>The next thing you need to do is tell Whispir what information you&rsquo;re sending.  You can just blindly send some XML or JSON content, but life is much easier if Whispir knows exatly what it is you are sending.</p>

<p>You&rsquo;re going to tell Whispir what you are sending by using the <strong>Content-Type</strong> HTTP header.  Your Content-Type header is going to be (either JSON or XML):</p>

<ul>
<li>application/vnd.whispir.message-v1+json</li>
<li>application/vnd.whispir.message-v1+xml</li>
</ul>

<p>This tells Whispir that you are sending content that conforms to Version 1 of the message schema. As Whispir adds more features to each schema, our version numbers will increase, this is described in much more detail later on in the documentation.</p>

<h3 id="sending-messages-using-json-and-xml">Sending messages using JSON and XML</h3>

<p>Once you have successfully sent your SMS message using curl, you can move on to using your application to generate XML or JSON formats for processing.</p>

<p>Be sure to include the correct headers for the desired content type:</p>

<ul>
<li>XML - <code class="prettyprint">application/vnd.whispir.message-v1+xml</code></li>
<li>JSON - <code class="prettyprint">application/vnd.whispir.message-v1+json</code></li>
</ul>

<p>For more information on Messages and all the other Whispir resources please continue through the documentation, or browse straight to Messages resource documentation for more information.</p>

        <h2 id="api-rate-limits">API Rate Limits</h2>

<blockquote>
<p>API Rate Limits</p>

<blockquote>
<p>In the event that Whispir&rsquo;s rate limits are breached, the following error messages will be returned from the Whispir API:</p>
</blockquote>
</blockquote>
<pre><code class="highlight shell"><span class="c"># Over Queries Per Second Limit </span>

GET /messages?apikey<span class="o">=</span>abc38bc83bcd3ucbud83
x-api-key: abc38bc83bcd3ucbud83

HTTP 403 Forbidden
X-Error-Code: ERR_403_DEVELOPER_OVER_QPS
X-Error-Detail: Account Over Queries Per Second Limit

<span class="c"># Over Queries Per Day Limit</span>

GET /messages?apikey<span class="o">=</span>abc38bc83bcd3ucbud83
x-api-key: abc38bc83bcd3ucbud83

HTTP 403 Forbidden
X-Error-Code: ERR_403_DEVELOPER_OVER_QPD
X-Error-Detail: Account Over Queries Per Day Limit
</code></pre>

<p>Whispir&rsquo;s API usage is limited on a per apikey basis using <strong>per second</strong> limit and <strong>per day</strong> limits.</p>

<p>Depending on your Whispir License, you will obtain higher per second and per day rates:</p>

<h3 id="whispir.io-editions">Whispir.io Editions</h3>

<table><thead>
<tr>
<th>Whispir.io Edition</th>
<th>Requests Per Second</th>
<th>Requests Per Day</th>
</tr>
</thead><tbody>
<tr>
<td>Startup API Edition</td>
<td>5 requests per second</td>
<td>10000 requests per day</td>
</tr>
<tr>
<td>Business API Edition</td>
<td>10 requests per second</td>
<td>20000 requests per day</td>
</tr>
<tr>
<td>Enterprise API Edition</td>
<td>30 requests per second</td>
<td>50000 requests per day</td>
</tr>
</tbody></table>

<p>If further calls per second or per day are required for your application, please contact your Whispir Sales Representative, or <a href="https://whispir.io/contact/">Contact Us</a>.</p>

        <h1 id="conventions">Conventions</h1>

<h2 id="api-security">API Security</h2>

<blockquote>
<p>API Security</p>

<blockquote>
<p>Whispir utilises Basic HTTP Authentication over HTTPS to secure the API Requests.</p>
</blockquote>
</blockquote>
<pre><code class="highlight shell">HTTP/1.1 GET https://api.&lt;region&gt;.whispir.com/?apikey<span class="o">=</span>ab37bdvs32898dssddsddsfklio
Authorization: Basic frJIUN8DYpKDtOLCwo//yllqDzg<span class="o">=</span>
x-api-key: your_api_key

<span class="c"># Successful Response</span>
HTTP/1.1 200 OK

<span class="c"># Unsuccessful Response (incorrect apikey)</span>
HTTP/1.1 403 Forbidden
&lt;h1&gt;Developer Inactive&lt;/h1&gt;

<span class="c"># Unsuccessful Response (incorrect username / password)</span>
HTTP/1.1 401 Unauthorized

<span class="c"># Unsuccessful Response (no permission to access that resource endpoint)</span>
HTTP/1.1 403 Forbidden
</code></pre>

<p>The Whispir.io API supports multiple methods of authentication to cater for varying client needs. Authentication is necessary for users of the API to ensure that only valid and legal requests are processed by the Whispir messaging engine.</p>

<h3 id="basic-authentication-over-https">Basic Authentication over HTTPS</h3>

<p>The basic authentication process is offered for use with clients that already have an ‘up and running’ application, and would like to integrate Whispir as a messaging provider in a quick and simple fashion.</p>

<p>Basic access authentication over HTTPS involves the application client sending an encoded Username and Password when requesting resources from the server.</p>

<p>Clients will also be required to provide the API Key that is provided when the application is registered within Mashery. This API Key is used to determine the application that is making the request, and whether it is allowed to make requests, it is still within the request thresholds, and is a valid API Key. </p>

<p>Once this has been confirmed, the request is forwarded on to Whispir for Basic authentication processing.</p>

<ul>
<li>If this Username and password is correct, the server will process the request and send back an appropriate response.</li>
<li>If the Username and password is not correct, the server will send back an HTTP 401 (Authorization required).</li>
</ul>

<p><img alt="Basic Authentication" src="https://developer.whispir.com/files/Computer-diagram.png" /></p>

<p>Once Whispir has validated the username and password, the requested resource is returned through Mashery to the application client.</p>

<h3 id="basic-authentication-–-example">Basic Authentication – Example</h3>

<p>A valid request that will be accepted and authenticated by the Whispir messaging engine using Basic authentication is as follows:</p>

<p>The ‘Authorization’ header is comprised of the word <strong>Basic</strong> followed by the base64 representation of the username and password of the user.</p>

<p>More information about HTTP Basic Authentication can be found on <a title="Basic access authentication" href="https://en.wikipedia.org/wiki/Basic_access_authentication">Wikipedia</a>.</p>

<h2 id="restful-architecture">RESTful Architecture</h2>

<p>The Whispir.io API provides interfaces for application clients to utilise Whispir functionality that are platform agnostic, without any dependency on the environment or programming language being used.</p>

<p>Whispir&rsquo;s API supports multiple methods of inbound request over HTTPS, primarily:</p>

<ul>
<li>  XML</li>
<li>  JSON</li>
</ul>

<p>Clients can issue requests using either of the methods, and receive a response in the same format. This allows easy integration with existing and new applications using technologies that are widely supported in a range of languages.</p>

<h3 id="restful-architecture">RESTful Architecture</h3>

<p>The Whispir.io API employs a ‘REST’ (<strong>Re</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer) architecture.  This architecture is the foundation of the World Wide Web and is widely used in application, service and API development.</p>

<p>An application is considered ‘RESTful’ if it conforms to a ‘REST’ architecture.  A ‘REST’ architecture consists of <strong>clients</strong> and <strong>servers</strong>.  The clients initiate requests to the servers, and the servers process the requests and return the appropriate responses.  Requests and responses are structured using defined and addressable <strong>resources</strong>. </p>

<p>Each <strong>resource</strong> within the Whispir API is available through a secure and authenticated URL. </p>

<p><strong>Note:</strong> More information about REST can be found on <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">Wikipedia</a>.</p>

<h2 id="retrieving-objects">Retrieving objects</h2>

<blockquote>
<p>Retrieving objects</p>

<blockquote>
<p>Retrieve all workspaces within your Company</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">HTTP/1.1 GET https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/workspaces?apikey=bneov3023nfo023rssdf3
</code></pre>
<pre><code class="highlight go"><span class="n">HTTP</span><span class="o">/</span><span class="m">1.1</span><span class="x"> </span><span class="n">GET</span><span class="x"> </span><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/workspaces?apikey=bneov3023nfo023rssdf3</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>Retrieve all Messages from within the Company</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">HTTP/1.1 GET https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/messages?apikey=bneov3023nfo023rssdf3
</code></pre>
<pre><code class="highlight go"><span class="n">HTTP</span><span class="o">/</span><span class="m">1.1</span><span class="x"> </span><span class="n">GET</span><span class="x"> </span><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/messages?apikey=bneov3023nfo023rssdf3</span><span class="x">
</span></code></pre>

<p>Application clients can retrieve lists of resources of a single type through a simple URL. </p>

<p>For example, to retrieve a list of <strong>Workspaces</strong> from within the <strong>Company</strong>, the URL is as follows:</p>

<p><code class="prettyprint">GET https://api.&lt;region&gt;.whispir.com/workspaces?apikey=bneov3023nfo023rssdf3</code></p>

<h3 id="retrieving-a-single-object">Retrieving a single object</h3>

<blockquote>
<p>Retrieving a single object</p>

<blockquote>
<p>Retrieve the Workspace with the ID of 12345</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">HTTP/1.1 GET https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/workspaces/12345?apikey=bneov3023nfo023rssdf3
</code></pre>
<pre><code class="highlight go"><span class="n">HTTP</span><span class="o">/</span><span class="m">1.1</span><span class="x"> </span><span class="n">GET</span><span class="x"> </span><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/workspaces/12345?apikey=bneov3023nfo023rssdf3</span><span class="x">
</span></code></pre>

<p>Application clients also have access to a single resource by specifying the relevant ID of the resource.  This information would have been returned when retrieving the list of resources as specified above.</p>

<p>To retrieve a single <strong>Workspace</strong> when you know the ID, the URL is as follows:</p>

<p><code class="prettyprint">GET https://api.&lt;region&gt;.whispir.com/workspaces/12345?apikey=bneov3023nfo023rssdf3</code></p>

<p>Or to retrieve a single <strong>Contact</strong> when you know the ID, the URL is as follows:</p>

<p><code class="prettyprint">GET https://api.&lt;region&gt;.whispir.com/contacts/78910?apikey=bneov3023nfo023rssdf3</code></p>

<blockquote>
<blockquote>
<p>Retrieve the Contact with the ID of 78910</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">HTTP/1.1 GET https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/contacts/78910?apikey=bneov3023nfo023rssdf3
</code></pre>
<pre><code class="highlight go"><span class="n">HTTP</span><span class="o">/</span><span class="m">1.1</span><span class="x"> </span><span class="n">GET</span><span class="x"> </span><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/contacts/78910?apikey=bneov3023nfo023rssdf3</span><span class="x">
</span></code></pre>

<h3 id="nested-objects">Nested objects</h3>

<blockquote>
<p>Nested objects</p>

<blockquote>
<p>Retrieve the Contact with the ID 67890 from within the Workspace with ID 12345</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">HTTP/1.1 GET https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/workspaces/12345/contacts/67890?apikey=bneov3023nfo023rssdf3
</code></pre>
<pre><code class="highlight go"><span class="n">HTTP</span><span class="o">/</span><span class="m">1.1</span><span class="x"> </span><span class="n">GET</span><span class="x"> </span><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/workspaces/12345/contacts/67890?apikey=bneov3023nfo023rssdf3</span><span class="x">
</span></code></pre>

<p>Within Whispir&rsquo;s resource model, some resources are nested within one another.  For example; </p>

<ul>
<li>The <strong>Company</strong> resource contains many <strong>Workspaces</strong>.  </li>
<li>The <strong>Workspace</strong> resource contains many <strong>Messages</strong>.</li>
<li>Each <strong>Message</strong> resource contains a <strong>MessageStatus</strong>.</li>
</ul>

<p>Requests can be <em>nested</em> in order to provide application clients the ability to access specific resources when they are nested.</p>

<p>For example, if you wanted to retrieve a <strong>Contact</strong> from within a <strong>Workspace</strong>, the URL would look as follows:</p>

<p><code class="prettyprint">GET https://api.&lt;region&gt;.whispir.com/workspaces/12345/contacts/67890?apikey=bneov3023nfo023rssdf3</code></p>

<h2 id="http-response-codes">HTTP Response Codes</h2>

<p>Application clients that are using Whispir&rsquo;s API will receive HTTP response codes in response to every request that is issued. </p>

<p>The table below describes the response codes that will be issued and gives potential reasons as to why they may have been sent back.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Successful Response Codes</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">200 OK:</td>
            <td><strong>Successful request</strong><br/>
                No further action required.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">201 Created:</td>
            <td><strong>Successfully created the resource.</strong><br/>
                The requested resource has been successfully created and can be found via the URL in the &lsquo;Location&rsquo; header
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">202 Accepted:</td>
            <td><strong>Successfully accepted the request for processing</strong><br/>
                The request has been accepted for processing by the asynchronous processor. The request&rsquo;s unique identifier can be found via the URL in the 'Location&rsquo; header
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">204 No Content:</td>
            <td><strong>Successfully processed the request, but no content was sent back</strong><br/>
                The update (PUT) or delete (DELETE) request has been successfully processed, and no content was returned from the server.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">301 Moved Permanently:</td>
            <td><strong>Successful request, but the resource is no longer available at this location.</strong><br/>
                This resource URL should no longer be used. Check the location header of the response and redirect the request there.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">302 Found:</td>
            <td><strong>Successful request, but the resource is temporarily not available at this location.</strong><br/>
                This resource URL should still be used in future, but for this specific request, check the location header of the response and redirect the request there.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">304 Not modified:</td>
            <td><strong>Content hasn’t changed since last request</strong><br/>
                No action required
            </td>
        </tr>
    </tbody>
</table>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Unsuccessful Response Codes</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">400 Bad Request:</td>
            <td><strong>Invalid or missing request parameters</strong><br/>
                Inspect the request parameters and ensure that all required parameters are supplied.<br/><br/>

                Note the error text in the response and update the request accordingly
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">401 Unauthorized:</td>
            <td><strong>Invalid or no credentials passed in the request</strong><br/>
                Inspect the authorisation header and ensure that a valid authentication has been provided.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">403 Forbidden:</td>
            <td><strong>Authorization credentials passed and accepted but account does not have permission</strong><br/>
                <ul>
                <li>Inspect the authorisation header and ensure that a valid authentication has been provided.</li>
                <li>returned when HTTP is used instead of HTTPS</li>
        <li>returned when invalid API Key is used</li>
                <li>returned when you have tried to make API calls more than your allowed Quota (QPS). refer to <a href="https://whispir.github.io/api/#api-rate-limits" title="api rate limiting">API Rate Limits</a></li>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">404 Not Found:</td>
            <td><strong>The requested URL does not exist</strong><br/>
                The requested resource was not found, inspect the ID in the URL that was used and ensure that it is valid.<br/><br/>Also, inspect the Accept and Content-Type headers that are being used to make sure they are correct for the URL that is being requested.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">405 Method not allowed:</td>
            <td><strong>The requested resource does not support the supplied verb</strong><br/>
                Inspect the HTTP method that was used in the request and ensure that it is valid for the resource being requested
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">415 Unsupported Media Type:</td>
            <td><strong>The request was unsuccessful because the requested content type is not supported by the API.</strong><br/>
                The application client can use this response to determine if it is asking for a supported version of a resource.  Upon receiving this response, the client can query the developer documentation to determine the appropriate version for the requested resource.<br/><br/>

                In most cases, this is due to the user not supplying the correct Accept or Content-Type header for the requested URL.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">429 Too many requests:</td>
            <td><strong>Above API Quota Limits</strong><br/>
                <ul>
                <li>returned when you have tried to make API calls more than your allowed Quota (QPS). refer to <a href="https://whispir.github.io/api/#api-rate-limits" title="api rate limiting">API Rate Limits</a></li>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">422 Unprocessable Entity:</td>
            <td><strong>The request is formed correctly, but due to some condition the request cannot be processed e.g. email is required and it is not provided in the request</strong><br/>
                The request did not contain all of the information required to perform this method.  Please check your request for the required fields to be passed in and try again.  The offending fields will be specified in the error text of the response.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">500 Internal Server Error:</td>
            <td><strong>An internal error occurred when processing the request.</strong><br/>
                Attempt the request again and if the HTTP 500 error re-occurs contact <a href="mailto:support@whispir.com">support@whispir.com</a>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">501 Method Not Implemented:</td>
            <td><strong>The HTTP method being used has not yet been implemented for the requested resource.</strong><br/>
                The method being used is not implemented for this resource. Please check the documentation for the specific resource type. 
            </td>
        </tr>
    </tbody>
</table>

<h2 id="content-types-and-versioning">Content Types and Versioning</h2>

<p>The Whispir.io API has been designed and built to support the wide feature set provided in the current version of the Whispir Platform. </p>

<p>In order to manage and incorporate change in future versions of the API, Whispir&rsquo;s API has implemented a versioning structure that allows application clients to choose which version of the API they would like to retrieve their responses from.</p>

<p>This allows new versions to be built and old versions to be supported concurrently, with no impact to clients when changes are made.</p>

<p>Whispir&rsquo;s API achieves this versioning capability by using <strong>Vendor Specific MIME Types (VSMT)</strong>.</p>

<h3 id="without-vsmt">Without VSMT</h3>

<blockquote>
<p>Without VSMT</p>

<blockquote>
<p>A Sample API request that is not using VSMT</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP/1.1 GET /workspaces/123/contacts?firstName=Neil&amp;apikey=789264 
Accept: application/xml

HTTP/1.1 200 OK
Content-Type: application/xml
&lt;contact&gt;
   &lt;name&gt;Neil Armstrong&lt;/name&gt;
&lt;/contact&gt;
</code></pre>

<p>This implementation of an API in this manner works correctly, but conceptually it is incorrect.  The issue with this design is the request is only asking for an XML representation of some resource called a Contact, it is not specifically asking for the XML version of a <strong>Contact Resource</strong> as defined by Whispir&rsquo;s API.</p>

<p>Any XML representation of a resource could be passed back e.g. a <strong>Cat</strong> or a <strong>House</strong>, and the client would need to inspect the response to determine whether it is a <strong>Contact</strong> or not through its own means.</p>

<h3 id="with-vsmt">With VSMT</h3>

<blockquote>
<p>With VSMT</p>

<blockquote>
<p>A Sample API request that is uses VSMT</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP/1.1 GET /workspaces/123/contacts?firstName=Neil&amp;apikey=789264 
Accept: application/vnd.whispir.contact+xml

HTTP/1.1 200 OK
Content-Type: application/xml
&lt;contact&gt;
   &lt;name&gt;Neil Armstrong&lt;/name&gt;
&lt;/contact&gt;
</code></pre>

<p>By using VSMT, Whispir can define and make available the various content types for resources prior to the requests being made. This allows the application clients to specify the resource that they would like to receive from the API, and Whispir will only return content of that specific type.</p>

<p>For example:</p>

<p>By using this method, the client is specifically asking for a resource representation of a <strong>Contact</strong> that is defined by Whispir&rsquo;s API.  There is no confusion about the representation that will be returned, and the client need not worry about validation as Whispir will only ever return a valid <strong>Contact</strong> as a response to this request.</p>

<p>VSMT also allows the client the ability to choose the language in which their resource representation should be returned.  Using the previous example, the application client was asking for the <strong>Contact</strong> to be returned in <strong>XML</strong>.</p>

<p><code class="prettyprint">Accept: application/vnd.whispir.contact+xml</code></p>

<p>This <strong>Contact</strong> resource could just as easily be returned as a <strong>JSON</strong> object by changing the content type as follows:</p>

<p><code class="prettyprint">Accept: application/vnd.whispir.contact+json</code></p>

<h3 id="with-vsmt-(including-versioning)">With VSMT (including versioning)</h3>

<blockquote>
<p>With VSMT (including versioning)</p>

<blockquote>
<p>Sample request with VSMT and Versioning (V1)</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP/1.1 GET /workspaces/123/contacts?firstName=Neil&amp;apikey=789264 
Accept: application/vnd.whispir.contact-v1+xml

HTTP/1.1 200 OK
Content-Type: application/vnd.whispir.contact-v1+xml
&lt;contact&gt;
   &lt;name&gt;Neil Armstrong&lt;/name&gt;
&lt;/contact&gt;
</code></pre>

<blockquote>
<blockquote>
<p>Sample request with VSMT and Versioning (V2)</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP/1.1 GET /workspaces/123/contacts?firstName=Neil&amp;apikey=789264 
Accept: application/vnd.whispir.contact-v2+xml

HTTP/1.1 200 OK
Content-Type: application/vnd.whispir.contact-v2+xml
&lt;contact&gt;
   &lt;name&gt;Neil Armstrong&lt;/name&gt;
   &lt;mobile&gt;$mobile&lt;/mobile&gt;
   &lt;email&gt;neil.armstrong@space.com&lt;/email&gt;
&lt;/contact&gt;
</code></pre>

<p>This method of using VSMT also allows the resource representations to be updated, re-written and maintained without any notification required to application clients.</p>

<p>This can be achieved by adding a <strong>version</strong> element to the defined content types.</p>

<p>By versioning the application MIME types, application clients can request the resource representation that their application is built on, e.g. ‘contact-v1’, or ‘workspace-v2’.</p>

<p>Whispir can create new representations of these documents, and the application clients will not be affected by these changes.</p>

<p>The <strong>v2</strong> version of this resource representation can co-exist with the <strong>v1</strong> version, and application clients do not need to worry about their existence.</p>

<h3 id="deprecation-of-versions">Deprecation of Versions</h3>

<p>As the version numbers grow and new features are introduced into the resource representations, it is inevitable that the older versions will become deprecated and no longer supported over an extended period of time.</p>

<p>This process of deprecation will be facilitated using HTTP Status Codes 301 and 415.</p>

<h3 id="list-of-whispir&#39;s-vsmt&#39;s">List of Whispir&rsquo;s VSMT&rsquo;s</h3>

<p>The following table depicts the available mime types that will be accepted through Whispir&rsquo;s API:</p>

<p><strong>Note:</strong> The Mime Type is always <em>Singular</em>. <code class="prettyprint">message-v1</code>, not <code class="prettyprint">messages-v1</code>.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">List of Whispir.io VSMT&rsquo;s</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">Workspace:</td>
            <td>XML - application/vnd.whispir.workspace-v1+xml<br/>
                JSON - application/vnd.whispir.workspace-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Message:</td>
            <td>XML - application/vnd.whispir.message-v1+xml<br/>
                JSON - application/vnd.whispir.message-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Message Status:</td>
            <td>XML - application/vnd.whispir.messagestatus-v1+xml<br/>
                JSON - application/vnd.whispir.messagestatus-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Message Responses:</td>
            <td>XML - application/vnd.whispir.messageresponse-v1+xml<br/>
                JSON - application/vnd.whispir.messageresponse-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Message Response Rule:</td>
            <td>XML - application/vnd.whispir.responserule-v1+xml<br/>
                JSON - application/vnd.whispir.responserule-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Message Template:</td>
            <td>XML - application/vnd.whispir.template-v1+xml<br/>
                JSON - application/vnd.whispir.template-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Contact:</td>
            <td>XML - application/vnd.whispir.contact-v1+xml<br/>
                JSON - application/vnd.whispir.contact-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Distribution List:</td>
            <td>XML - application/vnd.whispir.distributionlist-v1+xml<br/>
                JSON - application/vnd.whispir.distributionlist-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Message Scenario:</td>
            <td>XML - application/vnd.whispir.scenario-v1+xml<br/>
                JSON - application/vnd.whispir.scenario-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Event:</td>
            <td>XML - application/vnd.whispir.event-v1+xml<br/>
                JSON - application/vnd.whispir.event-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Asset:</td>
            <td>XML - application/vnd.whispir.asset-v1+xml<br/>
                JSON - application/vnd.whispir.asset-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Custom List:</td>
            <td>XML - application/vnd.whispir.customlist-v1+xml<br/>
                JSON - application/vnd.whispir.customlist-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Activity Log:</td>
            <td>XML - application/vnd.whispir.activity-v1+xml<br/>
                JSON - application/vnd.whispir.activity-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">User:</td>
            <td>XML - application/vnd.whispir.user-v1+xml<br/>
                JSON - application/vnd.whispir.user-v1+json
            </td>
        </tr>
    </tbody>
</table>

<h2 id="pagination">Pagination</h2>

<blockquote>
<p>Pagination</p>

<blockquote>
<p>Request for the first page of messages:</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP/1.1 GET https://api.&lt;region&gt;.whispir.com/?apikey=[your-api-key]&amp;limit=20&amp;offset=0
</code></pre>

<blockquote>
<blockquote>
<p>Request for the second page of messages (note the offset is now 20):</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP/1.1 GET https://api.&lt;region&gt;.whispir.com/?apikey=[your-api-key]&amp;limit=20&amp;offset=20
</code></pre>

<blockquote>
<blockquote>
<p>Request for the page of messages which does not exist.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP/1.1 GET https://api.&lt;region&gt;.whispir.com/workspaces/7311ABEB701E7C60/messages?apikey=[your-api-key]&amp;limit=20&amp;offset=20
</code></pre>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="true"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>No records found<span class="nt">&lt;/status&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
    </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"No records found"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Requests that contain multiple items will be paginated by default.</p>

<p>Each page will provide a maximum of <strong>20</strong> items per page.</p>

<p>Two parameters can be used to control the number of items retrieved:</p>

<ul>
<li><code class="prettyprint">limit</code>: the number of rows to be returned (max: 20, default: 20)</li>
<li><code class="prettyprint">offset</code>: the record number to start returning from (default: 0)</li>
</ul>

<p>Most resources will provide these links at the end of the response object in a <code class="prettyprint">link</code> array that supplies links with <code class="prettyprint">rel=next</code> and <code class="prettyprint">rel=prev</code> attributes.</p>

<p>This makes programatic pagination easy as you can simply detect for the presence of these attributes. You can loop through the pages until you receive a response of &#39;No messages found&rsquo;.</p>

<p><strong>Note:</strong> The following resources aren&rsquo;t paginated for ease of use:</p>

<ul>
<li>Workspaces</li>
<li>Scenarios</li>
<li>Messages</li>
</ul>

<h3 id="extra-parameters">Extra parameters</h3>

<p>It&rsquo;s also possible that the messages are older than the default filter that is applied.  At present Whispir provides a default of the last 7 days of messages.  You can ask for older messages by using the following 4 parameters:</p>

<blockquote>
<blockquote>
<p>Requesting for records from 01/01/2015 00:00 – 01/07/2015 23:59</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">https://api.&lt;region&gt;.whispir.com/messages?apikey=[your-api-key]&amp;criteriaFromDate=01/01/2015&amp;criteriaFromTime=00:00&amp;criteriaToDate=01/07/2015&amp;criteriaToTime=23:59
</code></pre>

<ul>
<li>criteriaFromDate (format: dd/mm/yyyy)</li>
<li>criteriaFromTime (format: hh:mm)</li>
<li>criteriaToDate (format: dd/mm/yyyy)</li>
<li>criteriaToTime  (format: hh:mm)</li>
</ul>

<p>All four of these parameters are required for a date search to work e.g.</p>

<p>You can also use the parameter <code class="prettyprint">viewType=shared</code> if the messages you are looking for were sent from other users (not the API user).</p>

        <h1 id="workspaces">Workspaces</h1>

<blockquote>
<p>API Endpoint</p>

<blockquote>
<ul>
<li>generic</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/workspaces/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.workspace-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/workspaces/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">workspace</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">&gt; Resource type

- application/vnd.whispir.workspace-v1+xml
- application/vnd.whispir.workspace-v1+json


&gt; Methods supported

- GET
- POST
</code></pre>

<p>Workspace allows application developers to create new work areas for the varying use cases of their application. They provides different functions that can be provided to users of the application, e.g. creating messages, executing scenarios, or viewing distribution lists. </p>

<p>Every account upon creation is given a default workspace. All operations are usually carried out in the default workspace. To separate the concerns, one can create multiple (there is no limit) workspaces suited for each of their application needs. </p>

<p>Each of these work areas are independent from one another and can be governed by user permissions. So, users can be assigned access to these workspaces to restrict the control of information as needed. So, the information, assets, contacts, actions performed in workspace does not or cannot be accessed from another one. This allows the applications to be independent and audited much effectively with proper permissions and keys.</p>

<h2 id="creating-a-new-workspace">Creating a new workspace</h2>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/workspaces?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.workspace-v1+xml 


<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns3:workspace</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;projectName&gt;</span>A Space Odessey<span class="nt">&lt;/projectName&gt;</span>
    <span class="nt">&lt;projectNumber&gt;</span>2000<span class="nt">&lt;/projectNumber&gt;</span>
    <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;billingcostcentre&gt;</span>Hollywood<span class="nt">&lt;/billingcostcentre&gt;</span>
<span class="nt">&lt;/ns3:workspace&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">workspace</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"projectName"</span><span class="o">:</span><span class="x"> </span><span class="s">"A Space Odessey"</span><span class="p">,</span><span class="x">
  </span><span class="s">"projectNumber"</span><span class="o">:</span><span class="x"> </span><span class="s">"2001"</span><span class="p">,</span><span class="x">
  </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
  </span><span class="s">"billingcostcentre"</span><span class="o">:</span><span class="x"> </span><span class="s">"Hollywood"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>To create a new workspace, you can use the /workspaces endpoint.</p>

<p>Only <strong>2 fields</strong> are required:</p>

<ol>
<li>projectName - The name of the Workspace to be created.</li>
<li>status - The status of the Workspace being created.  This should be &lsquo;A&rsquo; for &#39;Active&rsquo; when creating new workspaces.</li>
</ol>

<p>Note: There is no limit to the amount of workspaces each API user can create.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">projectName :</td>
            <td><strong>String</strong><br/>
                Specifies the name of the Workspace to be created.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">projectNumber:</td>
            <td><strong>String</strong><br/>
                Specifies the reference ID for the workspace from the User Side. Generally not used. <br>
<b>Note</b>: This is not the actual workspace ID. It is just a custom reference ID given by you for your own purposes.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">status:</td>
            <td><strong>String</strong><br/>
                Specifies the status of the Workspace being created. The status can be one of - 
                <ul>
                    <li>Active (A)</li>
                    <li>Disabled (D)</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">billingcostcentre:</td>
            <td><strong>String</strong><br/>
                <strong>Only applicable to customers with the Billing Cost Centre Module enabled.</strong> Allows the user to set a billing cost centre for the Workspace.
            </td>
        </tr>
    </tbody>
</table>

<h2 id="retrieving-workspaces">Retrieving Workspaces</h2>

<p>To retrieve a list of workspaces from the Whispir.io API you can execute an HTTP GET using the /workspaces endpoint.</p>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/workspaces?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.workspace-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 4 of 4<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:workspaces&gt;</span>
        <span class="nt">&lt;ns2:workspace&gt;</span>
        <span class="nt">&lt;id&gt;</span>BB9ECBE5BA73CD81<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;projectName&gt;</span>Sales Lead Notifications<span class="nt">&lt;/projectName&gt;</span>
            <span class="nt">&lt;projectNumber&gt;&lt;/projectNumber&gt;</span>
            <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
            <span class="nt">&lt;billingcostcentre&gt;</span>test<span class="nt">&lt;/billingcostcentre&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/BB9ECBE5BA73CD81?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:workspace&gt;</span>
        <span class="nt">&lt;ns2:workspace&gt;</span>
            <span class="nt">&lt;id&gt;</span>7311ABEB701E7C60<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;projectName&gt;</span>Product Release Management<span class="nt">&lt;/projectName&gt;</span>
            <span class="nt">&lt;projectNumber&gt;&lt;/projectNumber&gt;</span>
            <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
            <span class="nt">&lt;billingcostcentre&gt;</span>0<span class="nt">&lt;/billingcostcentre&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/7311ABEB701E7C60?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:workspace&gt;</span>
        <span class="nt">&lt;ns2:workspace&gt;</span>
            <span class="nt">&lt;id&gt;</span>26B1A09C1FEC20A2<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;projectName&gt;</span>CAAS<span class="nt">&lt;/projectName&gt;</span>
            <span class="nt">&lt;projectNumber&gt;&lt;/projectNumber&gt;</span>
            <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
            <span class="nt">&lt;billingcostcentre&gt;</span>0<span class="nt">&lt;/billingcostcentre&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/26B1A09C1FEC20A2?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:workspace&gt;</span>
        <span class="nt">&lt;ns2:workspace&gt;</span>
            <span class="nt">&lt;id&gt;</span>A358845BF004C113<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;projectName&gt;</span>Business Working Group<span class="nt">&lt;/projectName&gt;</span>
            <span class="nt">&lt;projectNumber&gt;&lt;/projectNumber&gt;</span>
            <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
            <span class="nt">&lt;billingcostcentre&gt;</span>CLSA<span class="nt">&lt;/billingcostcentre&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/A358845BF004C113?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:workspace&gt;</span>
        <span class="nt">&lt;ns2:workspace&gt;</span>
            <span class="nt">&lt;projectName&gt;</span>Critical Incident Management<span class="nt">&lt;/projectName&gt;</span>
            <span class="nt">&lt;projectNumber&gt;&lt;/projectNumber&gt;</span>
            <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
            <span class="nt">&lt;billingcostcentre&gt;&lt;/billingcostcentre&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/B7BFEF555F0F7F81?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
       <span class="nt">&lt;/ns2:workspace&gt;</span>
    <span class="nt">&lt;/ns2:workspaces&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">workspace</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"workspaces"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"7311ABEB701E7C60"</span><span class="p">,</span><span class="x">
      </span><span class="s">"projectName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Sales Lead Notifications"</span><span class="p">,</span><span class="x">
      </span><span class="s">"projectNumber"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
      </span><span class="s">"billingcostcentre"</span><span class="o">:</span><span class="x"> </span><span class="s">"0"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/7311ABEB701E7C60?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"26B1A09C1FEC20A2"</span><span class="p">,</span><span class="x">
      </span><span class="s">"projectName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Product Release Management"</span><span class="p">,</span><span class="x">
      </span><span class="s">"projectNumber"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
      </span><span class="s">"billingcostcentre"</span><span class="o">:</span><span class="x"> </span><span class="s">"0"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/26B1A09C1FEC20A2?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"A358845BF004C113"</span><span class="p">,</span><span class="x">
      </span><span class="s">"projectName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Business Working Group"</span><span class="p">,</span><span class="x">
      </span><span class="s">"projectNumber"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
      </span><span class="s">"billingcostcentre"</span><span class="o">:</span><span class="x"> </span><span class="s">"CLSA"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/A358845BF004C113?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"B7BFEF555F0F7F81"</span><span class="p">,</span><span class="x">
      </span><span class="s">"projectName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Critical Incident Management"</span><span class="p">,</span><span class="x">
      </span><span class="s">"projectNumber"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
      </span><span class="s">"billingcostcentre"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/B7BFEF555F0F7F81?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">}</span><span class="x">
   </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>You will need to supply one of the following headers (for retrieving JSON or XML):</p>

<ul>
<li>Accept: application/vnd.whispir.workspace-v1+xml</li>
<li>Accept: application/vnd.whispir.workspace-v1+json</li>
</ul>

<p>An array of Workspaces will be returned to you in the HTTP response body.</p>

<p>Each of these workspace will provide the following information:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Response Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">projectName :</td>
            <td><strong>String</strong><br/>
                Specifies the name of the Workspace to be created.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">projectNumber:</td>
            <td><strong>String</strong><br/>
                Specifies the reference ID for the workspace from the User Side. Generally not used. <br>
<b>Note</b>: This is not the actual workspace ID. It is just a custom reference ID given by you for your own purposes.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">status:</td>
            <td><strong>String</strong><br/>
                Specifies the status of the Workspace being created. The status can be one of - 
                <ul>
                    <li>Active (A)</li>
                    <li>Disabled (D)</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">billingcostcentre:</td>
            <td><strong>String</strong><br/>
                <strong>Only applicable to customers with the Billing Cost Centre Module enabled.</strong> Allows the user to set a billing cost centre for the Workspace.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">link:</td>
            <td><strong>Array</strong><br/>
                Provides a list of URLs that can be used to manipulate or access the workspace. 
                <br>
                <ul>
                    <li>uri - the link to access the workspace</li>
                    <li>rel - the descriptor for what the link will do</li>
                    <li>method - the HTTP method to use with this particular link</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<h2 id="updating,-deleting-a-workspace">Updating, Deleting a workspace</h2>

<p>Workspaces can only be created and retrieved. They <strong>cannot</strong> be updated or deleted via the API. </p>

<p>One has to use the Platform for this need.</p>

        <h1 id="messages">Messages</h1>

<blockquote>
<p>API Endpoint</p>

<blockquote>
<p>The following calls describe how to access messages from within your workspaces</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="c">&lt;!-- From the default workspace --&gt;</span>

https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/messages/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.message-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="c">// From the default workspace</span><span class="x">

</span><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/messages/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>
<pre><code class="highlight xml"><span class="c">&lt;!-- Or from a defined workspace --&gt;</span>

https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/workspaces/{:id}/messages/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.message-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="c">// Or from a defined workspace</span><span class="x">

</span><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/workspaces/{:id}/messages/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The following resource types are supported for messages.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">- application/vnd.whispir.message-v1+xml
- application/vnd.whispir.message-v1+json
</code></pre>

<blockquote>
<blockquote>
<p>The following methods are supported for the messages endpoint.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">- GET
- POST
- DELETE
</code></pre>

<blockquote>
<p>Messages</p>

<blockquote>
<p>Sample to send an SMS, Email, Voice call, and Web Publishing in one request</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic &lt;YOUR AUTH HEADER&gt;
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test Message<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;body&gt;</span>This is the body of my test SMS message<span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;email&gt;</span>
        <span class="nt">&lt;body&gt;</span>This is the body of my test Email message<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;footer&gt;</span>This is footer of test email<span class="nt">&lt;/footer&gt;</span>
        <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/email&gt;</span>
    <span class="nt">&lt;voice&gt;</span>
        <span class="nt">&lt;header&gt;</span>test header<span class="nt">&lt;/header&gt;</span>
        <span class="nt">&lt;body&gt;</span>This is test voice body<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;footer&gt;</span>test footer<span class="nt">&lt;/footer&gt;</span>
        <span class="nt">&lt;type&gt;</span>
            ConfCall:,
            ConfAccountNo:,
            ConfPinNo:,
            ConfModPinNo:,
            Pin:
        <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/voice&gt;</span>
    <span class="nt">&lt;web&gt;</span>
        <span class="nt">&lt;body&gt;</span>This is web body of my test message<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/web&gt;</span>
    <span class="nt">&lt;social&gt;</span>
        <span class="nt">&lt;social</span> <span class="na">id=</span><span class="s">"social"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;body&gt;</span>Twitter Content.<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;/social&gt;</span>
        <span class="nt">&lt;social</span> <span class="na">id=</span><span class="s">"social_long"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;body&gt;</span>Facebook Content.<span class="nt">&lt;/body&gt;</span>
            <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;/social&gt;</span>
    <span class="nt">&lt;/social&gt;</span>
    <span class="nt">&lt;type&gt;</span>defaultNoReply<span class="nt">&lt;/type&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test Message"</span><span class="p">,</span><span class="x">
    </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of my test SMS message"</span><span class="p">,</span><span class="x">
    </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of my test Email message"</span><span class="p">,</span><span class="x">
        </span><span class="s">"footer"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the footer of my message
                    (generally where a signature would go)"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"header"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the introduction,
                    read out prior to any key press"</span><span class="p">,</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of the voice call,
                  read out after the key press"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ConfCall:,
                  ConfAccountNo:,
                  ConfPinNo:,
                  ConfModPinNo:,
                  Pin:"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"web"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the content of my web publishing
                 or Rich Push Message"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"social"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"social"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
            </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"social"</span><span class="p">,</span><span class="x">
            </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Twitter Content."</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
            </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"social_long"</span><span class="p">,</span><span class="x">
            </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Facebook Content."</span><span class="p">,</span><span class="x">
            </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
        </span><span class="p">}</span><span class="x">
    </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"defaultNoReply"</span><span class="p">,</span><span class="x">
    </span><span class="s">"features"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"pushOptions"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"notifications"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"enabled"</span><span class="p">,</span><span class="x">
            </span><span class="s">"escalationMins"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"3"</span><span class="x">
        </span><span class="p">}</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Communications are the core of what the Whispir.io API offers as a service to customers.</p>

<p>Whispir has the ability to send communications across 8 different channels in a single API request:</p>

<p><strong>SMS</strong> - up to 1600&#42; characters per message, premium routes, delivery receipts<br/>
<strong>Email</strong> - free email messaging with HTML and Plain Text support<br/>
<strong>Voice</strong> - high quality outbound voice calls delivered to mobiles and landlines within seconds<br/>
<strong>Rich Messages</strong> - personalised, targeted rich messaging to drive conversations<br/>
<strong>Push</strong> - easily sent push notifications to your apps<br/>
<strong>Twitter</strong> - support for instant publishing to multiple twitter accounts<br/>
<strong>Facebook</strong> - simplify the process of publishing to multiple facebook accounts instantaneously<br/>
<strong>RSS</strong> - easily generate RSS feeds for consumption by other services<br/></p>

<p>All communications are driven from the <code class="prettyprint">/messages</code> endpoint within the API.  This endpoint allows a user to perform the following tasks:</p>

<ol>
<li>Create and Send a new message in a given workspace</li>
<li>Retrieve a list of previously sent messages in the given workspace</li>
</ol>

<p>These are described in more detail below:</p>

<p>As message resources can exist in the default (Company) workspace or other workspace, messages have two access URLs:</p>

<p><code class="prettyprint">https://api.&lt;region&gt;.whispir.com/messages</code> - for Company Workspace messages</p>

<p><code class="prettyprint">https://api.&lt;region&gt;.whispir.com/workspaces/:id/messages</code> - for other Workspace messages where <code class="prettyprint">:id</code> is the id of the specific workspace.</p>

<aside class="notice">
Whispir strongly recommends use of workspaces for all messaging needs. Refer <a href="#workspaces">workspaces</a>. If not followed, this may lead to billing and data privacy concerns within your company account.
</aside>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">to:</td>
            <td><strong>String</strong><br/>
                Specifies the recipients of the message e.g.
                <ul>
                    <li>Mobile Phone: 61423456789</li>
                    <li>Email Address: john.smith@test.com.au</li>
                    <li>Landline: 61386000000</li>
                </ul>
                <strong>Note:</strong> Multiple recipients can be specified using semicolons
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">subject:</td>
            <td><strong>String</strong><br/>
                Specifies the first line of the SMS message or Voice call, and the subject of the Email message.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">body:</td>
            <td><strong>String</strong><br/>
                Specifies the content of the SMS message.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">email:</td>
            <td><strong>Object</strong><br/>
                Email object described below. Used for sending email messages.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">voice:</td>
            <td><strong>Object</strong><br/>
                Voice object described below. Used for sending voice calls to mobile phones and landlines.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">web:</td>
            <td><strong>Object</strong><br/>
                Web object described below. Used for web publishing and Rich Messages.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">social:</td>
            <td><strong>Object</strong><br/>
                Social object described below. Used for publishing content to social media (Twitter, Facebook, LinkedIn).
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">type:</td>
            <td><strong>String</strong><br/>
                Allows the user to modify the message behaviour for replies e.g.
                <ul>
                    <li>defaultNoReply - Used to reject any replies to this message. This is also used to mask the sender&rsquo;s phone number when not using a Message Alias.</li>
                </ul>
            </td>
        </tr>
    <tr>
            <td style="text-align: right; font-weight: bold;">dlr:</td>
            <td><strong>Object</strong><br/>
                Allows the user to specify the turn ON or turn OFF the DLRs (delivery receipts) via the `type` option e.g.
                <ul>
                    <li>NoDlr - Used to specify that DLRs should not be enabled for this message.</li>
                </ul>
        <br/>
        Usage: 
        <ul>
                    <li>for XML: <pre><li><dlr><type>NoDlr</type></dlr></pre></li>
                    <li>for JSON: <pre><li>"dlr":{ "type": "NoDlr" }</pre></li>
        </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">features:</td>
            <td><strong>Object</strong><br/>
                Allows the user to modify the push notifications properties if these are configured in the company.
                <br/>
                <br/>
                <strong>pushOptions:</strong>
                <ul>
                    <li>notifications - enabled/disabled</li>
                    <li>escalationMins - # mins to await a push notifications response</li>
                    <li>appId - the appId to which the push notifications has to be sent to</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<h2 id="sms-messages">SMS Messages</h2>

<blockquote>
<p>SMS Messages</p>

<blockquote>
<p>Sending SMS messages using Whispir is as easy as providing the destination phone number(s), a message subject, and the content of the message.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml
Accept: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test SMS Message<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;body&gt;</span>This is the body of my test SMS message<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test SMS Message"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of my test SMS message"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">Response: 202 Accepted
Location: https://api.&lt;region&gt;.whispir.com/messages/{id}?apikey=[your_api_key]
</code></pre>

<p>Sending SMS from Whispir is as easy as providing the recipient information and the content of the message.</p>

<p>Only <strong>3 fields</strong> are required:</p>

<ol>
<li>To - the mobile phone number of the recipient</li>
<li>Subject - the first line or identifier of the SMS</li>
<li>Body - the remainder of the SMS content</li>
</ol>

<p>The &lsquo;to&rsquo; field can be provided in the following formats:
<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">&#39;To&rsquo; field options</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">Ad-hoc Recipients</td>
            <td><strong>String</strong><br/>
                <ul>
                    <li>Mobile Phone: 61423456789</li>
                    <li>Email Address: john.smith@test.com.au</li>
                    <li>Landline: 61386000000</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Defined Whispir Recipients</td>
            <td><strong>String</strong><br/>
                <ul>
                    <li><strong>Contact MRI:</strong><br/>John_Smith.782749@Contact.whispir.com</li>
                    <li><strong>User MRI:</strong><br/>John_Smith@User.whispir.com</li>
                    <li><strong>Distribution List MRI:</strong><br/>Incidents.373947@List.whispir.com</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table></p>

<aside class="notice">
Whispir strongly recommends use of workspaces for all messaging needs. Refer <a href="#workspaces">workspaces</a>.
</aside>

<h3 id="notes:">Notes:</h3>

<ul>
<li>Each SMS message can contain up to <strong>1600&#42;</strong> characters</li>
<li>The Subject field is Mandatory.</li>
<li>The Body field is Mandatory.</li>
<li>MRI (Message Resource Identifier) is the unique Whispir address for the Contact, User or Distribution List.</li>
</ul>

<p>&#42; SMS character counts are limited in some countries. Contact your local Whispir Representative for information about the supported number of characters in your region.</p>

<h3 id="response">Response</h3>

<ul>
<li>If the response is <code class="prettyprint">202 Accepted</code>, then the <code class="prettyprint">location</code> header contains the reference to the message request. This value can be used to retrieve the message status, responses later on.</li>
<li>For any other response codes, please refer to the <a href="#http-response-codes">HTTP Response Codes</a> section.</li>
<li>If you have failed to capture the <code class="prettyprint">location</code> header value, then refer to <a href="#retrieve-a-previously-sent-message"> How to Retrieve previously sent messages? </a></li>
<li>This process is same for sms, email, voice, push notifications.</li>
</ul>

<h2 id="email-messages">Email Messages</h2>

<blockquote>
<p>Email Messages</p>

<blockquote>
<p><strong>Sending Plain Text Emails</strong></p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>john.smith@test.com<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test Email Message<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;email&gt;</span>
        <span class="nt">&lt;body&gt;</span>Email Body goes here.<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;footer&gt;</span>Email signature goes here.<span class="nt">&lt;/footer&gt;</span>
        <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/email&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"john.smith@test.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test Email Message"</span><span class="p">,</span><span class="x">
    </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Email Body goes here."</span><span class="p">,</span><span class="x">
        </span><span class="s">"footer"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Email signature goes here."</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p><strong>Sending Rich Text (HTML) Emails</strong></p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>john.smith@test.com<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test Email Message<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;email&gt;</span>
        <span class="nt">&lt;body&gt;</span>
            <span class="cp">&lt;![CDATA[
                &lt;div id="content"&gt;</span>
                    <span class="nt">&lt;p&gt;</span>This is my content<span class="nt">&lt;/p&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            ]]&gt;
        <span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;type&gt;</span>text/html<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/email&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"john.smith@test.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test Email Message"</span><span class="p">,</span><span class="x">
    </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"&lt;div id='content'&gt;&lt;p&gt;This is my content&lt;/p&gt;&lt;/div&gt;"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/html"</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Whispir can easily be used as an API email gateway to deliver thousands of rich content emails for your campaigns.</p>

<p><strong>Mandatory fields</strong></p>

<p>Only 4 fields are required in order to send an email message.</p>

<ol>
<li>To - the recipient of the email message.</li>
<li>Subject - the subject line of the email message.</li>
<li>Body - the content of the email (either HTML or Plain Text content).</li>
<li>Type - either &#39;text/plain&rsquo; or &#39;text/html&rsquo; to describe the content of the message.</li>
</ol>

<aside class="notice">
Whispir strongly recommends use of workspaces for all messaging needs. Refer <a href="#workspaces">workspaces</a>.
</aside>

<h3 id="whispir&#39;s-support-of-rich-(html)-emails">Whispir&rsquo;s support of Rich (HTML) Emails</h3>

<blockquote>
<blockquote>
<p><strong>Sending Emails with Attachments</strong></p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>john.smith@test.com<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test e-mail message with attachment<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;email&gt;</span>
        <span class="nt">&lt;body&gt;</span>Test Message Content<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;resources&gt;</span>
            <span class="nt">&lt;attachment&gt;</span>
                <span class="nt">&lt;attachmentName&gt;</span>TestIcon.png<span class="nt">&lt;/attachmentName&gt;</span>
                <span class="nt">&lt;attachmentDesc&gt;</span>TestIcon.png<span class="nt">&lt;/attachmentDesc&gt;</span>
                <span class="nt">&lt;derefUri&gt;</span>iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAAAXNSR0IArs4c6QAAAARnQU1BAACx
jwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAMvSURBVDhPTVT5S1RhFD3fezOOOePTXHKriWgj
sogWC1TSMuuHIFqoX0KsIIgSWwiq/6FFU8MKK6KyXYSKpkUKR4QMSSpCLQpyxHHUZpztzdu63xub
5vKWj/fu+c6599z3mMfjSU9P13UdZoiCaLfZYQWiUGKq1WrBLEBDOBpWNTWeQyEIwvT0NAsEAgRO
PKXFxceNbQOtv4ShkKCkaZZ5kYU1Sw6dqT0NMTkLBIbf7zf+xaOuJzgG4RmyPyP/Kwq/oWAYeT+R
6gYOofnmlUQmLQjI6JQkifasu368KdCQWwFEwBiYQOIgiDBETDFIORh/iZ0De55cehgXQJIphce9
d/ebJhuyV0P3QY9Cj/HDUKhseIPomP/CW2QYB42nSx+db76YUM9IusPhYHVM2g5Bpo5xNuIkZibC
F8On0oGVjhWabmR8EBx5GDuHaItsy0zhzA6bo/H5ZSyDMQ1d4YQa0Sqc1hdAe3E7IYkqp9tiUcHG
kXIQZ8+fm+k5uXK3/46YAV3mMMLEt/BHUJ1Vua9oH+WV9ayLyLpVhRYFkT8d4mUzRuI0DAcHmQng
SLrGoBJ/GC/L31JSy/cm91ifXTcboYDJGLX+1kI6WS3AQFSRCUDvwhGEwubiD1yVLkLKWuxoT50k
zGwab6Ru6HIsahpiwTybkwTLU9iUU1Ezf394CmuyV20p2kLg8mcbRHLLxGimLlWFFMpMc6TRFlx2
9aJqePBgx4M3u7tubb1dMXfjw6rHhOwb+/jhV3+qNtMFKspQEZnA+oxSPr9UdjgUllV59pHZhSUF
I/We5AnMv5o7bvhsFu5f3DlmR7ATr/a+rtq2mVulqEqmlFlbUuv5MbqudW0C7PrhGpvwidRhIoyX
qiHoRam/tGrT5n9Wmfcb9TfmBOf0DXy80H0h/uKU6yQRcqlmk+mji0RhbbN2XOpAygzF/9nmfp4o
c4+4y6vLqRnuUTdsfNqYFRop/4JFw4t723qz52YlZpvPd/K30vm+03nAie1ADXAYOADsgHOXs/la
ix7RkzMJyJJ/BjQ09lQ7me8f9/cP9nsnvemzpOIFy3PzclkK0wyNgvDEHP8Z/AXQ58rAz69IBAAA
AABJRU5ErkJggg==<span class="nt">&lt;/derefUri&gt;</span>
            <span class="nt">&lt;/attachment&gt;</span>
        <span class="nt">&lt;/resources&gt;</span>
    <span class="nt">&lt;/email&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"jsmith@test.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test e-mail message with attachment"</span><span class="p">,</span><span class="x">
    </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is my content"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="x">
        </span><span class="s">"resources"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"attachment"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
                </span><span class="s">"attachmentName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"TestIcon.png"</span><span class="p">,</span><span class="x">
                </span><span class="s">"attachmentDesc"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"TestIcon.png"</span><span class="p">,</span><span class="x">
                </span><span class="s">"derefUri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAAAXNSR0IArs4c6QAAAARnQU1BAACx
jwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAMvSURBVDhPTVT5S1RhFD3fezOOOePTXHKriWgj
sogWC1TSMuuHIFqoX0KsIIgSWwiq/6FFU8MKK6KyXYSKpkUKR4QMSSpCLQpyxHHUZpztzdu63xub
5vKWj/fu+c6599z3mMfjSU9P13UdZoiCaLfZYQWiUGKq1WrBLEBDOBpWNTWeQyEIwvT0NAsEAgRO
PKXFxceNbQOtv4ShkKCkaZZ5kYU1Sw6dqT0NMTkLBIbf7zf+xaOuJzgG4RmyPyP/Kwq/oWAYeT+R
6gYOofnmlUQmLQjI6JQkifasu368KdCQWwFEwBiYQOIgiDBETDFIORh/iZ0De55cehgXQJIphce9
d/ebJhuyV0P3QY9Cj/HDUKhseIPomP/CW2QYB42nSx+db76YUM9IusPhYHVM2g5Bpo5xNuIkZibC
F8On0oGVjhWabmR8EBx5GDuHaItsy0zhzA6bo/H5ZSyDMQ1d4YQa0Sqc1hdAe3E7IYkqp9tiUcHG
kXIQZ8+fm+k5uXK3/46YAV3mMMLEt/BHUJ1Vua9oH+WV9ayLyLpVhRYFkT8d4mUzRuI0DAcHmQng
SLrGoBJ/GC/L31JSy/cm91ifXTcboYDJGLX+1kI6WS3AQFSRCUDvwhGEwubiD1yVLkLKWuxoT50k
zGwab6Ru6HIsahpiwTybkwTLU9iUU1Ezf394CmuyV20p2kLg8mcbRHLLxGimLlWFFMpMc6TRFlx2
9aJqePBgx4M3u7tubb1dMXfjw6rHhOwb+/jhV3+qNtMFKspQEZnA+oxSPr9UdjgUllV59pHZhSUF
I/We5AnMv5o7bvhsFu5f3DlmR7ATr/a+rtq2mVulqEqmlFlbUuv5MbqudW0C7PrhGpvwidRhIoyX
qiHoRam/tGrT5n9Wmfcb9TfmBOf0DXy80H0h/uKU6yQRcqlmk+mji0RhbbN2XOpAygzF/9nmfp4o
c4+4y6vLqRnuUTdsfNqYFRop/4JFw4t723qz52YlZpvPd/K30vm+03nAie1ADXAYOADsgHOXs/la
ix7RkzMJyJJ/BjQ09lQ7me8f9/cP9nsnvemzpOIFy3PzclkK0wyNgvDEHP8Z/AXQ58rAz69IBAAA
AABJRU5ErkJggg=="</span><span class="x">
            </span><span class="p">}]</span><span class="x">
        </span><span class="p">}</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<ul>
<li>HTML, HEAD and BODY HTML elements are not supported.  HTML content assumes that it is starting from within the BODY tag.</li>
<li>HTML form and input elements are not supported in most email clients.  These can be included in the HTML content but should be thoroughly tested prior to use.</li>
<li>STYLE elements are supported.  It is recommended that a single STYLE element at the top of the HTML that defines the styles for the entire email.  However, inline styles are also supported.</li>
<li>Javascript is not supported and should not be used in e-mail messages.</li>
<li>Images must be referenced through absolute web urls, any other mechanism will not work on most email clients.
<br/><br/><strong>Note:</strong> Whispir does not host images for clients, you must use another hosting service and reference the URL in your Whispir request payload.</li>
</ul>

<h3 id="including-attachments-in-e-mail-messages">Including attachments in e-mail messages</h3>

<p>The Whispir API provides users with the ability to compose e-mail messages that also contain message attachments.</p>

<p>Attachments can be of any type (e.g. PDF, Images, Documents), and can be up to 10MB in size (maximum for all attachments).</p>

<p>Attachments must be provided in the payload of the message.  URLs can be referenced in the Email, but will not be added as message attachments.</p>

<h3 id="notes:">Notes:</h3>

<ul>
<li>attachmentName - The name of the file being attached (mandatory)</li>
<li>attachmentDesc - An optional description of the file being attached</li>
<li>derefUri - The base64 representation of the file being uploaded</li>
</ul>

<aside class="notice">
The attachment element in JSON is also an array, so be sure to add the square bracket in there!
</aside>

<h2 id="voice-messages">Voice Messages</h2>

<blockquote>
<p>Voice Messages</p>

<blockquote>
<p><strong>Sending Voice Calls</strong></p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test Voice Call<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;voice&gt;</span>
        <span class="nt">&lt;header&gt;</span>
            This is the introduction of the voice call
        <span class="nt">&lt;/header&gt;</span>
        <span class="nt">&lt;body&gt;</span>This is the body of the message<span class="nt">&lt;/body&gt;</span>
        <span class="c">&lt;!-- Do not include line breaks in your API calls --&gt;</span>
        <span class="nt">&lt;type&gt;</span>
            ConfCall:,
            ConfAccountNo:,
            ConfPinNo:,
            ConfModPinNo:,
            Pin:
        <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/voice&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test Voice Call"</span><span class="p">,</span><span class="x">
    </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"header"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the introduction of the voice call"</span><span class="p">,</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of the message"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ConfCall:,ConfAccountNo:,ConfPinNo:,ConfModPinNo:,Pin:"</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p><strong>Sending Voice Calls with Teleconferences</strong></p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test Voice Call<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;voice&gt;</span>
        <span class="nt">&lt;header&gt;</span>
            This is the introduction of the voice call
        <span class="nt">&lt;/header&gt;</span>
        <span class="nt">&lt;body&gt;</span>This is body of the message<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;footer&gt;</span>This is the footer of the message<span class="nt">&lt;/footer&gt;</span>
        <span class="c">&lt;!-- Do not include line breaks in your API calls --&gt;</span>
        <span class="nt">&lt;type&gt;</span>
            ConfCall:1800500536,
            ConfAccountNo:12345678,
            ConfPinNo:1234,
            ConfModPinNo:1234,
            Pin:0000
        <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/voice&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test Voice Call"</span><span class="p">,</span><span class="x">
    </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"header"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the introduction of the voice call"</span><span class="p">,</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is body of the message"</span><span class="p">,</span><span class="x">
        </span><span class="s">"footer"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the footer of the message"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ConfCall:1800500536,
                  ConfAccountNo:12345678,
                  ConfPinNo:1234,
                  ConfModPinNo:1234,
                  Pin:"</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Whispir&rsquo;s API provides users the ability to send a Voice Call to any landline or mobile phones around the world.</p>

<p>Whispir supports both <strong>Text to Speech</strong> and <strong>Pre-recorded WAV file</strong> approaches to sending Voice Calls.</p>

<p>Using Whispir&rsquo;s Voice Module, you can easily connect all recipients onto a single bridged call, simplifying your teleconferences and ensuring your message gets through.</p>

<h3 id="notes:">Notes:</h3>

<ul>
<li>The Subject field is Mandatory.</li>
<li>The Body field is Mandatory.</li>
<li>The Type field is Mandatory and at a minimum must specify the following string:
<code class="prettyprint">&lt;type&gt;ConfCall:,ConfAccountNo:,ConfPinNo:,ConfModPinNo:,Pin:&lt;/type&gt;</code></li>
<li><strong>The Type field is mandatory even when no conference call is being used</strong></li>
<li>Pauses can be added in conference call details using a +</li>
</ul>

<p>Your account must be enabled to use the Voice capability within Whispir for this to function.  If you are unsure whether you can use Voice please contact <a href="mailto:support@whispir.io">support@whispir.io</a>.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Custom Variables for Voice Calls</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@teleconf_number@@</td>
            <td>When Teleconferencing Services are used as part of voice calls, the Teleconference line that is used in the voice call can be accessed via this variable.<br/>e.g. 1800 123 123</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@teleconf_account@@</td>
            <td>When Teleconferencing Services are used as part of voice calls, the Teleconference Account or Room number that is used in the voice call can be accessed via this variable.<br/>e.g. 098711234</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@teleconf_pin@@</td>
            <td>When Teleconferencing Services are used as part of voice calls, the Teleconference Room PIN that is used in the voice call can be accessed via this variable.<br/>e.g. 8181</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@teleconf_mod_pin@@</td>
            <td>When Teleconferencing Services are used as part of voice calls, the Teleconference Moderator PIN that is used in the voice call can be accessed via this variable.<br/>e.g. 8181</td>
        </tr>
    </tbody>
</table>

<aside class="notice">
Whispir&rsquo;s Voice Module doesn&rsquo;t include a Conference Call service.  User&rsquo;s can easily integrate existing conference call services using the fields provided.
</aside>

<h3 id="using-custom-wav-files-as-the-content-for-voice-calls">Using custom WAV files as the content for Voice Calls</h3>

<p>The Whispir API provides users with the ability to compose voice calls using Text-To-Speech (TTS) as well as allowing users to provide custom WAV files to be played over the phone.</p>

<p>Attachments must be WAV files and can be up to 10MB in size (maximum for all attachments).</p>

<p>Each Voice Call is made up of four parts:</p>

<ol>
<li>Message Introduction - Either TTS or WAV file, mandatory for all messages</li>
<li>Message Acceptance - Requests the recipient to press a button to accept the message</li>
<li>Message Content - The concatenation of the Message Subject and Message Body (either TTS or WAV file)</li>
<li>Message Response - Allows the recipient to provide an acknowledgement to the message, either default options or based off a response rule</li>
</ol>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>61423568958<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test voice call with attachment<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;voice&gt;</span>
        <span class="nt">&lt;body&gt;</span>Will be replaced by the voicebody.wav file<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;header&gt;</span>Will be replaced by the voiceintro.wav file<span class="nt">&lt;/header&gt;</span>
        <span class="nt">&lt;type&gt;</span>ConfCall:,ConfAccountNo:,ConfPinNo:,ConfModPinNo:,Pin:<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;resources&gt;</span>
            <span class="nt">&lt;attachment&gt;</span>
                <span class="nt">&lt;attachmentName&gt;</span>Introduction.wav<span class="nt">&lt;/attachmentName&gt;</span>
                <span class="nt">&lt;attachmentDesc&gt;</span>voiceintro.wav<span class="nt">&lt;/attachmentDesc&gt;</span>
                <span class="nt">&lt;derefUri&gt;</span>...<span class="nt">&lt;/derefUri&gt;</span>
            <span class="nt">&lt;/attachment&gt;</span>
            <span class="nt">&lt;attachment&gt;</span>
                <span class="nt">&lt;attachmentName&gt;</span>Body.wav<span class="nt">&lt;/attachmentName&gt;</span>
                <span class="nt">&lt;attachmentDesc&gt;</span>voicebody.wav<span class="nt">&lt;/attachmentDesc&gt;</span>
                <span class="nt">&lt;derefUri&gt;</span>...<span class="nt">&lt;/derefUri&gt;</span>
            <span class="nt">&lt;/attachment&gt;</span>
        <span class="nt">&lt;/resources&gt;</span>
    <span class="nt">&lt;/voice&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">


</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"61423568958"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test voice call with attachments"</span><span class="p">,</span><span class="x">
    </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Will be replaced by the voicebody.wav file"</span><span class="p">,</span><span class="x">
        </span><span class="s">"header"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Will be replaced by the voiceintro.wav file"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ConfCall:,ConfAccountNo:,ConfPinNo:,ConfModPinNo:,Pin:"</span><span class="p">,</span><span class="x">
        </span><span class="s">"resources"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"attachment"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
                </span><span class="s">"attachmentName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Introduction.wav"</span><span class="p">,</span><span class="x">
                </span><span class="s">"attachmentDesc"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"voiceintro.wav"</span><span class="p">,</span><span class="x">
                </span><span class="s">"derefUri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"..."</span><span class="x">
            </span><span class="p">},{</span><span class="x">
                </span><span class="s">"attachmentName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Body.wav"</span><span class="p">,</span><span class="x">
                </span><span class="s">"attachmentDesc"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"voicebody.wav"</span><span class="p">,</span><span class="x">
                </span><span class="s">"derefUri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"..."</span><span class="x">
            </span><span class="p">}]</span><span class="x">
        </span><span class="p">}</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<h4 id="wav-file-criteria">WAV File Criteria</h4>

<p>Before a WAV file will be played, it needs to conform to a certain criteria.</p>

<ul>
<li>All WAV files must be 8bit, 8000Hz, 1ch, 64kbps MAX.</li>
<li>If the WAV is supplied outside of these criteria, the TTS will be used instead.  It is vital that TTS is provided even when using WAV files.</li>
<li>All of the WAV files combined, may not exceed 10MB in total file size.</li>
</ul>

<h3 id="notes:">Notes:</h3>

<ul>
<li>attachmentName - The name of the file being attached (mandatory)</li>
<li>attachmentDesc - For the WAV file to be played as the introduction, this must be voiceintro.wav</li>
<li>attachmentDesc - For the WAV file to be played as the body, this must be voicebody.wav</li>
<li>deferUri - The base64 representation of the WAV file being played</li>
<li>in case of JSON, The attachment element is also an array, so be sure to add the square bracket in there!</li>
</ul>

<h2 id="rich-messages">Rich Messages</h2>

<blockquote>
<p>Rich Messages</p>

<blockquote>
<p>Simple Rich Message using SMS with a Web Link</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test Rich Message<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;body&gt;</span>This is some content followed by the Rich Message link @@web_link@@<span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;web&gt;</span>
        <span class="nt">&lt;type&gt;</span>text/html<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;body&gt;</span>
            <span class="cp">&lt;![CDATA[
                &lt;div id="content"&gt;</span>
                    <span class="nt">&lt;p&gt;</span>This is the body of my Rich Message<span class="nt">&lt;/p&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            ]]&gt;
        <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/web&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test Rich Message"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is some content followed by the Rich Message link @@web_link@@"</span><span class="p">,</span><span class="x">
   </span><span class="s">"web"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/html"</span><span class="p">,</span><span class="x">
      </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"&lt;div class='content'&gt;This is the body of my Rich Message&lt;/div&gt;"</span><span class="x">
   </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<p>Whispir&rsquo;s Javascript API</p>

<blockquote>
<p>Users can use Whispir&rsquo;s Javascript API to perform different functions from within Rich Messages.
The following example uses javascript to personalise the Rich Message</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test Rich Message<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;body&gt;</span>This is some content followed by the Rich Message link @@web_link@@<span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;web&gt;</span>
        <span class="nt">&lt;type&gt;</span>text/html<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;body&gt;</span>
            <span class="cp">&lt;![CDATA[
                &lt;div id='content'&gt;</span>
                    <span class="nt">&lt;p&gt;</span>Hi <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">'first_name'</span><span class="nt">&gt;&lt;/span&gt;&lt;/p&gt;</span>
                    <span class="nt">&lt;p&gt;</span>This is the body of my Rich Message<span class="nt">&lt;/p&gt;</span>
                    <span class="nt">&lt;script</span> <span class="na">type=</span><span class="s">'text/javascript'</span><span class="nt">&gt;</span>
                        document.getElementById('first_name').innerHTML = Whispir.data.profile.firstname;
                    <span class="nt">&lt;/script&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            ]]&gt;
        <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/web&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test Rich Message"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is some content followed by the Rich Message link @@web_link@@"</span><span class="p">,</span><span class="x">
   </span><span class="s">"web"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/html"</span><span class="p">,</span><span class="x">
      </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"&lt;div id='content'&gt;&lt;p&gt;Hi &lt;span id='first_name'&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;This is the body of my Rich Message&lt;/p&gt;&lt;script type='text/javascript'&gt;document.getElementById('first_name').innerHTML = Whispir.data.profile.firstname;&lt;/script&gt;&lt;/div&gt;"</span><span class="x">
   </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight php"><span class="c">&lt;!--For ease of reading, the above HTML looks like--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">'content'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hi <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">'first_name'</span><span class="nt">&gt;&lt;/span&gt;&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>This is the body of my Rich Message<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">'text/javascript'</span><span class="nt">&gt;</span>
        <span class="kd">var</span> <span class="nx">firstName</span> <span class="o">=</span> <span class="nx">Whispir</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">profile</span><span class="p">.</span><span class="nx">firstname</span><span class="p">;</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'first_name'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">firstName</span><span class="p">;</span>
    <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>Whispir&rsquo;s Rich Messages provide you with the capability to seamlessly &#39;push&rsquo; HTML content to your audience.</p>

<p>This can be in the form of a simple web page, through to a mini web application with interactive widgets such as video, a data visualisation, or map.</p>

<p>For example;</p>

<p><img src="https://developer.whispir.com/files/rpm-iphone-shift.jpg" /></p>

<p>The inclusion of the <code class="prettyprint">@@web_link@@</code> tag anywhere in the body of the SMS or Email will automatically generate a URL and embed any content specified in the web body of the same message.</p>

<h3 id="requirements-to-use-rich-messaging">Requirements to use Rich Messaging</h3>

<p>Rich push is utilised when delivered to a mobile device. The receiving device requires the following features to be enabled to ensure the experience is optimised.</p>

<p>The target device:</p>

<ul>
<li>Needs to be able to launch a web browser that is HTML5 compliant. Most mainstream smartphones and tablets include modern browsers.</li>
<li>Requires Javascript to be enabled on the target devices.</li>
<li>Have an active internet connection.</li>
</ul>

<h3 id="guidelines-for-authoring-the-rich-message-html">Guidelines for authoring the Rich Message HTML</h3>

<p>Whispir allows you to control the entire content to be delivered to the end users device. Therefore, it&rsquo;s important that you build to a responsive design to display the content appropriately for every screen size.</p>

<ul>
<li>Build to a responsive design that works across your target devices. Ensure you test across these devices.</li>
<li>Whispir strips body and doctype tags, and replaces them with tags suitable to render on mobile devices. The final DOCTYPE is delivered as a HTML 5 doctype.</li>
<li>Use style tags at the <strong>bottom</strong> of the HTML content (rather than in the head tag or inline styles).</li>
<li>Custom javascript should be included at the bottom of the content if possible (speeds up viewing).</li>
</ul>

<h3 id="html-resources">HTML Resources</h3>

<p>Any HTML resources (Images, videos and visual assets) must be hosted externally, and referenced in the HTML. This allows you to control and link to resources using your existing CDN assets.</p>

<ul>
<li>External hosting also applies to scripts such as javascript libraries. Google CDN has excellent resources here: https://developers.google.com/speed/libraries/. Javascript can also be coded inline if required.</li>
<li>As content is delivered over HTTPS, it is recommended that all external resources be accessible over HTTPS, as devices may refuse to load or display any mixed (HTTP and HTTPS) content.</li>
</ul>

<h3 id="response-rules">Response rules</h3>

<p>Response Rules allow you to define pre-canned responses to your message. Your stakeholders can review these responses and optional reply to your message by selecting one.</p>

<ul>
<li>Response Rules can be attached to a Whispir Message Template within the Whispir interface.</li>
<li>A message with Response Rules displays a response button at the bottom on the page. So ensure your message has at least 60px at the bottom of the page content.</li>
</ul>

<p>More information about Rich Messages and the <code class="prettyprint">Whispir</code> object is included later in this documentation.</p>

<h2 id="push-messages">Push Messages</h2>

<blockquote>
<blockquote>
<p>Push Messages</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/workspaces/{:wid}/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml
Accept: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>contact-mri-value<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test Push Message<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;body&gt;</span>This is the body of my test Push message<span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;features&gt;</span>
        <span class="nt">&lt;notifications&gt;</span>enabled<span class="nt">&lt;/notifications&gt;</span>
        <span class="nt">&lt;appId&gt;</span>{:appId}<span class="nt">&lt;/appId&gt;</span>
    <span class="nt">&lt;/features&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"contact-mri-value"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test Push Message"</span><span class="p">,</span><span class="x">
    </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of my test Push message"</span><span class="p">,</span><span class="x">
    </span><span class="s">"features"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"pushOptions"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"notifications"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"enabled"</span><span class="p">,</span><span class="x">
            </span><span class="s">"appId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"{appId}"</span><span class="x">
        </span><span class="p">}</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">Response: 202 Accepted
Location: https://api.&lt;region&gt;.whispir.com/workspaces/{:wid}/messages/{:mid}?apikey=[your_api_key]
</code></pre>

<p>Whispir allows to send Push notifications to any IOS, and Android based apps. Sending Push notifcation is done via the /messages endpoint in the REST api, and the recipient is usually a Whispir contact MRI. </p>

<p>Setting up the platform to do Push involves some 1 time steps, and some periodically repeated steps (updating push tokens). Please refer to the <a href="#apps">Apps</a> endpoint to get a clear understanding of the related steps, and endpoints. Whispir does not support sending push to device tokens directly. Read more in the <a href="#contact-devices">Contact Devices</a> on how to register the device tokens under contacts.</p>

<p>The following fields are required:</p>

<ol>
<li>To - the Whispir Contact MRI value</li>
<li>Subject - the first line or the badge header text in the Push Note</li>
<li>Body - the remainder of the Push Content</li>
<li>appId - the id given by Whispir upon your app registration at the <a href="#apps">\apps</a> endpoint</li>
</ol>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">to:</td>
            <td><strong>String</strong><br/>
                Specifies the mri value of the contact whose devices needs to receive the push
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">subject:</td>
            <td><strong>String</strong><br/>
                Specifies the first line or the badge header text in the Push Note 
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Body:</td>
            <td><strong>String</strong><br/>
                Specifies the text that goes into the &ldquo;alert&rdquo;/&ldquo;data&rdquo; section of push structure
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">appId:</td>
            <td><strong>String</strong><br/>
                Specifies the appId of the registered app in Whispir
            </td>
        </tr>
    </tbody>
</table>

<blockquote>
<blockquote>
<p>Or if you have a template, which has the details already set (in the mobile channel), and the features too set, which states the appId and has the notifications set to enabled, you can do.</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>contact-mri-value<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;messageTemplateName&gt;</span>Name-Of-the-Template-Goes-Here<span class="nt">&lt;/messageTemplateName&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 

</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"contact-mri-value"</span><span class="p">,</span><span class="x">
    </span><span class="s">"messageTemplateName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Name-Of-the-Template-Goes-Here"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<h3 id="so-what-happens-in-the-background-?">So what happens in the background ?</h3>

<ul>
<li>Whispir looks for the contact based on the MRI value in the given workspace (only).</li>
<li>It loads all the devices under that contact</li>
<li>Filters them down to the device(s) that has the same appId as passed in the message payload Or set in the template</li>
<li>Sends a push to all the device(s) matched in the previous step.</li>
<li>There is NO option to specifically pick a single device. If you need to do that, just register only 1 device for that contact.</li>
<li>If Whispir does not find any devices under the said contact, the message status will be &ldquo;PENDING&rdquo; and the info will be &ldquo;No valid receipients found for this message&rdquo;</li>
</ul>

<h3 id="notes">Notes</h3>

<ul>
<li>You must register your app with Whispir under the <code class="prettyprint">\apps</code> endpoint. Refer to <a href="#apps">Apps</a></li>
<li>You must register the device token generated by your app with Whispir as a contact&rsquo;s device. Refer to <a href="#contact-devices">Contact Devices</a></li>
<li>You must be sending the push to a contact MRI only. So, refer to the <a href="#contacts">Contacts</a> for getting the MRI value.</li>
<li>The maximum push content length is 256 bytes for both IOS and Android. This includes the payload structure as well.</li>
<li>Whispir allows sending of custom message attributes with the payload, however these are not available by default, and needs to be configured by Whispir for you.</li>
<li>Support for other mobile app platforms (Windows is provided upon request via separate enablement process.</li>
</ul>

<h2 id="web-and-social-messaging">Web and Social Messaging</h2>

<blockquote>
<p>Web and Social Messaging</p>

<blockquote>
<p>Social Media Request/Response Example</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test Web Message<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;web&gt;</span>
        <span class="nt">&lt;body&gt;</span>This is web body of my test message<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/web&gt;</span>
    <span class="nt">&lt;social&gt;</span>
        <span class="nt">&lt;social</span> <span class="na">id=</span><span class="s">"social"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;body&gt;</span>This is the content of social message for Twitter<span class="nt">&lt;/body&gt;</span>
         <span class="nt">&lt;/social&gt;</span>
        <span class="nt">&lt;social</span> <span class="na">id=</span><span class="s">"social_long"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;body&gt;</span>This is the content of social message for Facebook<span class="nt">&lt;/body&gt;</span>
            <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;/social&gt;</span>
    <span class="nt">&lt;/social&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test Web Message"</span><span class="p">,</span><span class="x">
    </span><span class="s">"web"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of the web content"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"social"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"social"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
            </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"social"</span><span class="p">,</span><span class="x">
            </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the content of social message for Twitter"</span><span class="x">
        </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"socialType"</span><span class="p">,</span><span class="x">
            </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
        </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"social_long"</span><span class="p">,</span><span class="x">
            </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the content of social message for Facebook"</span><span class="x">
        </span><span class="p">}]</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>The Whispir API supports publishing to Web, RSS and Social Media through existing configurations set up in the Whispir Platform.</p>

<p>If your existing Whispir setup already allows you to publish to these destinations, you can simply specify the information in the message, and it will automatically be published as per your existing setup.</p>

<h3 id="web-publishing">Web Publishing</h3>

<p>The Web section is used to publish information to Whispir&rsquo;s Contact Portal or Whispir Community, or to a pre-defined web destination e.g. your company intranet.  </p>

<p>Whispir can automatically export this content as plain text or HTML and export it to a location for you to either iFrame into your webpage, or include via AJAX.</p>

<p>For more information on web publishing, please contact <a href="mailto:support@whispir.io">support@whispir.io</a>.</p>

<h3 id="social-publishing">Social Publishing</h3>

<p>The Social section is used to publish information to Twitter or Facebook as per your Whispir implementation.  </p>

<p>Whispir can automatically publish content to your pre-configured Twitter and Facebook pages based on the information you have provided us.</p>

<p>For more information about configuring Social Publishing, please contact <a href="mailto:support@whispir.io">support@whispir.io</a>.</p>

<h2 id="schedule-delivery">Schedule Delivery</h2>

<blockquote>
<p>Sending messages at a later date</p>

<blockquote>
<p>ONCE</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST http://api.&lt;region&gt;.whispir.com/messages?apikey=&lt;[your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>john.smith@test.com<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test scheduled e-mail message<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;email&gt;</span>
        <span class="nt">&lt;body&gt;</span>This is my scheduled content<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/email&gt;</span>
    <span class="nt">&lt;messageType&gt;</span>SCHEDULED<span class="nt">&lt;/messageType&gt;</span>
    <span class="nt">&lt;scheduleType&gt;</span>ONCE<span class="nt">&lt;/scheduleType&gt;</span>
    <span class="nt">&lt;scheduleDate&gt;</span>14/02/2017 15:55<span class="nt">&lt;/scheduleDate&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"john.smith@test.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test scheduled e-mail message"</span><span class="p">,</span><span class="x">
    </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is my scheduled content"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"messageType"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"SCHEDULED"</span><span class="p">,</span><span class="x">
    </span><span class="s">"scheduleType"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ONCE"</span><span class="p">,</span><span class="x">
    </span><span class="s">"scheduleDate"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"14/02/2017 15:55"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<h3 id="scheduling-messages-to-be-delivered-later">Scheduling messages to be <strong>delivered later</strong></h3>

<p>Using the Whispir API, users can schedule messages to be sent later.</p>

<p>Users can configure the schedule of message delivery as part of the message sendout.</p>

<p>For example. the code will schedule a single message to be delivered at 3:55pm on the 14th February 2017.</p>

<ul>
<li>Using this method, messages can be easily scheduled so that the message is delivered when the recipient requires it. Or based on their preference time of day.</li>
</ul>

<h3 id="scheduling-messages-for-repeated-delivery">Scheduling messages for <strong>repeated delivery</strong></h3>

<blockquote>
<blockquote>
<p>REPEAT</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST http://api.&lt;region&gt;.whispir.com/messages?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>john.smith@test.com<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test scheduled e-mail message<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;email&gt;</span>
        <span class="nt">&lt;body&gt;</span>This is my scheduled content<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/email&gt;</span>
    <span class="nt">&lt;messageType&gt;</span>SCHEDULED<span class="nt">&lt;/messageType&gt;</span>
    <span class="nt">&lt;scheduleType&gt;</span>REPEAT<span class="nt">&lt;/scheduleType&gt;</span>
    <span class="nt">&lt;scheduleDate&gt;</span>14/02/2017 15:55<span class="nt">&lt;/scheduleDate&gt;</span>
    <span class="nt">&lt;repetitionCount&gt;</span>10<span class="nt">&lt;/repetitionCount&gt;</span>
    <span class="nt">&lt;repeatDays&gt;</span>0<span class="nt">&lt;/repeatDays&gt;</span>
    <span class="nt">&lt;repeatHrs&gt;</span>1<span class="nt">&lt;/repeatHrs&gt;</span>
    <span class="nt">&lt;repeatMin&gt;</span>0<span class="nt">&lt;/repeatMin&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"john.smith@test.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test scheduled e-mail message"</span><span class="p">,</span><span class="x">
    </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is my scheduled content"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"messageType"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"SCHEDULED"</span><span class="p">,</span><span class="x">
    </span><span class="s">"scheduleType"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"REPEAT"</span><span class="p">,</span><span class="x">
    </span><span class="s">"scheduleDate"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"14/02/2017 15:55"</span><span class="p">,</span><span class="x">
    </span><span class="s">"repetitionCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"10"</span><span class="p">,</span><span class="x">
    </span><span class="s">"repeatDays"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"0"</span><span class="p">,</span><span class="x">
    </span><span class="s">"repeatHrs"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1"</span><span class="p">,</span><span class="x">
    </span><span class="s">"repeatMin"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"0"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>A second method of scheduling messages is where users can schedule messages to be sent multiple times/repeatedly (e.g. every hour, every day or every 7 days).</p>

<p>Users can configure the repeat rate of the message delivery as part of the message sendout.</p>

<p>For example. the code will schedule a single message to be delivered at 3:55pm on the 14th February 2017, and repeated every hour for 10 times.</p>

<ul>
<li>Using this method, users can easily schedule a message to be delivered multiple times starting from a date and continuing until desired.</li>
</ul>

<h3 id="time-zone"><strong>Time Zone</strong></h3>

<p>When a message is scheduled, it is scheduled as per the timezone setting of the user who initiated the message request. Each user in Whispir has a timezone set in their profile. So, messages are sent relative to the user&rsquo;s timezone, not from the timezone from where the user is located now.</p>

<p>For ex:</p>

<ul>
<li>If the user timezone setting is UTC, then messages are scheduled to be sent as per UTC, even if the user has triggered the message sitting in Singapore (+8).</li>
</ul>

<p>This is very important and has to be understood as Whispir does not honor the timezone the recipient is located in. So ensure that communication is sent in appropriate/preferred time given by them.</p>

<p><em>Note:</em> Changing the user timezone after the message is triggered DOES NOT change the original scheduled time.</p>

<h3 id="bulk-sending"><strong>Bulk Sending</strong></h3>

<p>Both of the schedule types are also allowed in bulk messaging. You can upload a <a href="#resources">resource</a> and trigger a <a href="#dynamic-and-bulk-messages">bulk message</a> to be sent using that resource at a scheduled time.</p>

<p>However, at this point of time, Whispir does not allow each message row inside the resource file to be sent at different time. They should all be sent at once.</p>

<h2 id="message-variables">Message Variables</h2>

<blockquote>
<p>Message Variables</p>

<blockquote>
<p>Demonstration of sending messages with variables (or tags).</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>John_Wick.1143139@Contact.whispir.sg<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test SMS Message with tags<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;body&gt;</span>Hi @@first_name@@.  This is your message.<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"John_Wick.1143139@Contact.whispir.sg"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test SMS Message with tags"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Hi @@first_name@@.  This is your message."</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>When sending messages using the Whispir API, users have the ability to automatically include recipient information as part of the message.  This is facilitated using <strong>tags</strong>.</p>

<ul>
<li>One has to use the contact mri/ user mri from the Whispir system to resolve these variables.</li>
</ul>

<p>The following <strong>tags</strong> can be included in any SMS, Email or Voice message:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Recipient Message Tags</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@first_name@@</td>
            <td>Recipients first name.<br/>e.g. John</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@last_name@@</td>
            <td>Recipients last name.<br/>e.g. Smith</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@recipient_email@@</td>
            <td>Recipients primary email address.<br/>e.g. jsmith@email.com</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@recipient_sms@@</td>
            <td>Recipients primary mobile phone number.<br/>e.g. 61412345678</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@recipient_voice@@</td>
            <td>Recipients primary phone number for voice calls.<br/>e.g. 61412345678</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@pin@@</td>
            <td>Whispir message retrieval service call back PIN (only populated when voice is used).<br/>e.g. 1234</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@recipient_role@@</td>
            <td>Resolves to the recipient&rsquo;s 'Role&rsquo; field.<br/>e.g. Manager</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@recipient_additionalrole@@</td>
            <td>Resolves to the recipient&rsquo;s 'Additional Role&rsquo; field.<br/>e.g. Team Leader</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@team_name1@@</td>
            <td>Resolves to the recipient&rsquo;s 'Team Name&rsquo; field.<br/>e.g. Red Team</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@messagelabel@@</td>
            <td>Resolves to the label field of the sent message.<br/>e.g. Incident #1234</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@messagecategories@@</td>
            <td>Resolves to the list of categories used in the message, separated with commas.<br/>e.g. Product Update</td
        </tr>
    </tbody>
</table>

<p>Each of these tags will resolve on send of the message to the individual recipient&rsquo;s information.  As Whispir needs to know about this information prior to sending the message, the tags will only work when sending messages to <strong>Contacts</strong> or <strong>Distribution Lists</strong>.</p>

<p>For more information about sending messages to Contacts or Distribution Lists, please consult the documentation under Messaging.</p>

<p>*<em>Note: *</em> Tags do not work in Rich Messages.  The <code class="prettyprint">Whispir</code> javascript object must be used instead to populate recipient specific fields.</p>

<h3 id="using-auto-populated-system-variables-in-messages">Using auto-populated system variables in messages</h3>

<blockquote>
<p>Using auto-populated system variables in messages</p>

<blockquote>
<p>Demonstration of sending messages with system variables (or tags).</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test SMS Message with tags<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;body&gt;</span>The date is @@dd@@ / @@mm@@ / @@yyyy@@.<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test SMS Message with tags"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"The date is @@dd@@ / @@mm@@ / @@yyyy@@."</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>When sending messages using the Whispir API, users have the ability to automatically include system generated information as part of the message.  This is facilitated using <strong>system tags</strong>.</p>

<p>The following <strong>system tags</strong> can be included in any message:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">System Tags</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@dd@@</td>
            <td>Current day with leading zero.<br/>e.g. 25</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@mm@@</td>
            <td>Current month with leading zero.<br/>e.g. 10</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@yy@@</td>
            <td>Current year, short form.<br/>e.g. 14</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@yyyy@@</td>
            <td>Current year, long form.<br/>e.g. 2014</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@day@@</td>
            <td>Day in spoken form.<br/>e.g. Wednesday</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@month@@</td>
            <td>Month in spoken form.<br/>e.g. June</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@hrs@@</td>
            <td>Current hour with leading zero in 24hrs.<br/>e.g. 16</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@min@@</td>
            <td>Current minute with leading zero .<br/>e.g. 37</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@date@@</td>
            <td>Current date in format (yyyy-mm-dd)<br/>e.g. 2014-09-02</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@time@@</td>
            <td>Current time in 24hr format.<br/>e.g. 14:37</td>
        </tr>
    </tbody>
</table>

<p>Each of these system tags will resolve on send of the message to the system information. The system tags will only work when sending messages to any recipient.</p>

<h2 id="message-attributes">Message Attributes</h2>

<blockquote>
<p>Message Attributes</p>

<blockquote>
<p>Sending an invitation message</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST http://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"john@api-example.com"</span><span class="p">,</span><span class="x"> 
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Reminder:"</span><span class="p">,</span><span class="x"> 
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Your invitation to the Acme Event will expire on 13/06/2014."</span><span class="p">,</span><span class="x"> 
   </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x"> 
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="x"> 
      </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Your invitation to the Acme Event will expire on 13/06/2014."</span><span class="x"> 
   </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Whispir&rsquo;s API customers who have Message Attributes configured within the Whispir Platform have the ability to simplify their API message requests by using the Message Attributes directly from the API.</p>

<p>Using Message Attributes allows developers to focus on the data behind a message, rather than focusing on the presentation or messaging channels within the message. </p>

<p>This separation ensures that the marketing or communications teams within an organisation can focus on what they are best at, and the developers can ensure the system integrations are working as effectively as possible.</p>

<ul>
<li>For example:</li>
</ul>

<p>A message could contain some content, and a potential variable such as the expiry of the invitation:</p>

<p><em>Reminder: your invitation to the Acme Event will expire on 13/06/2014.</em></p>

<p>The API call to populate this without Message Attributes could look as shown in the code example-</p>

<h3 id="using-templates-to-add-in-attributes">Using Templates to add in attributes</h3>

<blockquote>
<blockquote>
<p>Using Templates to add in attributes</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST http://api.&lt;region&gt;.whispir.com/templates?apikey=&lt;[your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">template</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x"> 
   </span><span class="s">"messageTemplateName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Event Reminder"</span><span class="p">,</span><span class="x"> 
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Reminder:"</span><span class="p">,</span><span class="x"> 
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Your invitation to the Acme Event will expire on @@event_expiry@@."</span><span class="p">,</span><span class="x"> 
   </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x"> 
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="x"> 
      </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Your invitation to the Acme Event will expire on @@event_expiry@@."</span><span class="x"> 
   </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>Response - Template Created</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 201 Created
Location: http://api.&lt;region&gt;.whispir.com/templates/DACADB02209CC93C
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x"> 
   </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"DACADB02209CC93C"</span><span class="p">,</span><span class="x"> 
   </span><span class="s">"messageTemplateName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Event Reminder"</span><span class="p">,</span><span class="x"> 
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Reminder:"</span><span class="p">,</span><span class="x"> 
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Your invitation to the Acme Event will expire on @@event_expiry@@."</span><span class="p">,</span><span class="x"> 
   </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x"> 
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="x"> 
      </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Your invitation to the Acme Event will expire on @@event_expiry@@."</span><span class="x"> 
   </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Using Message Attributes and Message Templates allows developers to cleanly separate these responsibilities. This is done by combining both the channels being selected for the message, and the data driving the message.</p>

<ul>
<li>For example: </li>
</ul>

<p>The same message could be saved into a Whispir Message Template (see code example).</p>

<p>Using this Message Template ID and now using the Message Attribute @@event_expiry@@, the updated is far simpler to implement and is more efficient.</p>

<blockquote>
<p>Using Template (with attributes)</p>

<blockquote>
<p>to send the Message</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST http://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x"> 
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"john@api-example.com"</span><span class="p">,</span><span class="x"> 
   </span><span class="s">"messageTemplateId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"DACADB02209CC93C"</span><span class="p">,</span><span class="x"> 
   </span><span class="s">"messageattributes"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"attribute"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
         </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"event_expiry"</span><span class="p">,</span><span class="x">     
         </span><span class="s">"value"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"13/06/2014"</span><span class="x">   
      </span><span class="p">}]</span><span class="x">
   </span><span class="p">}</span><span class="x"> 
</span><span class="p">}</span><span class="x"> 
</span></code></pre>

<p><em>Note:</em> </p>

<ul>
<li>User-defined attributes available through the API are configured at the account level and require Whispir administrative assistance to enable. </li>
<li>You can start using user-defined attributes through the api by contacting your Whispir Customer Success Representative or <a href="mailto:support@whispir.com">support@whispir.com</a></li>
</ul>

<h2 id="dynamic-and-bulk-messages">Dynamic and Bulk Messages</h2>

<blockquote>
<p>Dynamic Messages</p>

<blockquote>
<p>Whispir&rsquo;s API allows users to upload structured data, and process this line by line into outbound communications via SMS, Email, Voice, Web or Social Media.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">|------------|------------|-------------|-------------|------------|
| First Name | Last Name  | Mobile      | Amount Owed | Date Due   |
|------------|------------|-------------|-------------|------------|
| Jono       | Johnson    | +6590091234 | S$1000      | 21/08/2015 |
| Steve      | Smith      | +6590091235 | S$1100      | 22/08/2015 |
|------------|------------|-------------|-------------|------------|
</code></pre>
<pre><code class="highlight xml">"Content-Type": "application/vnd.whispir.bulkmessage-v1+json"
"Accept": "application/vnd.whispir.bulkmessage-v1+json"

#ToDo
</code></pre>
<pre><code class="highlight go"><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="s">"application/vnd.whispir.bulkmessage-v1+json"</span><span class="x">
</span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="s">"application/vnd.whispir.bulkmessage-v1+json"</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"resource"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"resourceId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="n">resource_id</span><span class="p">,</span><span class="x">  </span><span class="err">#</span><span class="x"> </span><span class="n">From</span><span class="x"> </span><span class="n">the</span><span class="x"> </span><span class="n">resource</span><span class="x"> </span><span class="n">you</span><span class="x"> </span><span class="n">created</span><span class="x">
    </span><span class="s">"smsMappingField"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"emailMappingField"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"voiceMappingField"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"options"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"resolveRecipients"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
      </span><span class="p">}</span><span class="x">
  </span><span class="p">},</span><span class="x">
  </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Bulk Send Example,
  "</span><span class="n">body</span><span class="s">" : "</span><span class="n">Hi</span><span class="x"> </span><span class="err">@@</span><span class="n">first_name</span><span class="err">@@</span><span class="o">.</span><span class="x"> </span><span class="n">Your</span><span class="x"> </span><span class="n">account</span><span class="x"> </span><span class="n">is</span><span class="x"> </span><span class="n">currently</span><span class="x"> </span><span class="n">outstanding</span><span class="p">,</span><span class="x"> </span><span class="n">with</span><span class="x"> </span><span class="n">the</span><span class="x"> </span><span class="n">amount</span><span class="x"> </span><span class="err">@@</span><span class="n">amount_due</span><span class="err">@@</span><span class="x"> </span><span class="n">being</span><span class="x"> </span><span class="n">due</span><span class="x"> </span><span class="n">on</span><span class="x"> </span><span class="err">@@</span><span class="n">due_date</span><span class="err">@@</span><span class="o">.</span><span class="x">  </span><span class="n">Please</span><span class="x"> </span><span class="nb">make</span><span class="x"> </span><span class="n">every</span><span class="x"> </span><span class="n">effort</span><span class="x"> </span><span class="n">to</span><span class="x"> </span><span class="n">pay</span><span class="x"> </span><span class="n">your</span><span class="x"> </span><span class="n">account</span><span class="x"> </span><span class="n">on</span><span class="x"> </span><span class="n">time</span><span class="o">.</span><span class="x">  </span><span class="n">If</span><span class="x"> </span><span class="n">you</span><span class="x"> </span><span class="n">would</span><span class="x"> </span><span class="n">like</span><span class="x"> </span><span class="n">more</span><span class="x"> </span><span class="n">information</span><span class="p">,</span><span class="x"> </span><span class="n">please</span><span class="x"> </span><span class="n">contact</span><span class="x"> </span><span class="n">us</span><span class="x"> </span><span class="n">on</span><span class="x"> </span><span class="m">1800</span><span class="x"> </span><span class="m">000</span><span class="x"> </span><span class="m">000</span><span class="p">,</span><span class="x"> </span><span class="n">regards</span><span class="o">.</span><span class="s">",
}
</span></code></pre>

<blockquote>
<blockquote>
<p>After processing, the first recipient would receive a message that looks as follows:</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">Hi Jono. Your account is currently outstanding, with the amount S$1000.00 being due on 21/08/2015.  Please make every effort to pay your account on time.  If you would like more information, please contact us on 1800 000 000, regards.
</code></pre>

<p>Whispir allows you send messages with dynamic content. This is very useful when you are sending SMS or emails in bulk and want to simply replace the placeholders or variables with values from a spreadsheet, data file or database table.</p>

<p>This can be achieved easily by uploading a file with the message content and the message recipient information. Whispir&rsquo;s messaging engine takes this information and processes it in bulk sendout.</p>

<p>This process allows users to easily specify recipient information within the file, and this can be processed within the message content.</p>

<p>This file could be saved and uploaded to Whispir&rsquo;s bulk messaging engine.  As a result, Whispir would then propose the following variables to be available for use in the message:</p>

<p>@@first_name@@<br/>
@@last_name@@<br/>
@@mobile@@<br/>
@@amount_owed@@<br/>
@@date_due@@<br/></p>

<p>The user then has the option to construct a message using this information, and Whispir will dynamically replace these variables at send time.  For example your message content could be as follows:</p>

<p><br/></p>

<h3 id="sending-dynamic-messages">Sending Dynamic Messages</h3>

<p>The bulk message sending is an easy two-step process.</p>

<ol>
<li>Upload the resource file via API (CSV, JSON or XML)</li>
<li>Create a new message using the resource file as source data.</li>
</ol>

<p><br/>
<strong>Step 1: Upload the Resource file via API</strong></p>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/resources?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.resource-v1+xml
Accept: application/vnd.whispir.resource-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns3:resource</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>sample.json<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;scope&gt;</span>private<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;mimeType&gt;</span>application/json<span class="nt">&lt;/mimeType&gt;</span>
    <span class="nt">&lt;derefUri&gt;</span><span class="c">&lt;!--base64 encoded JSON content --&gt;</span><span class="nt">&lt;/derefUri&gt;</span>
<span class="nt">&lt;/ns3:resource&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">resource</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">resource</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"sample.json"</span><span class="p">,</span><span class="x">
  </span><span class="s">"scope"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"private"</span><span class="p">,</span><span class="x">
  </span><span class="s">"mimeType"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"application/json"</span><span class="p">,</span><span class="x">
  </span><span class="s">"derefUri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"//base64 encoded JSON content"</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></code></pre>

<blockquote>
<blockquote>
<p>This will return a Resource ID that applications can use in the next step.</p>
</blockquote>
</blockquote>

<p>To upload a file to Whispir&rsquo;s API, users will make an API call to the <code class="prettyprint">/resources</code> endpoint.</p>

<p>Applications can use this endpoint to store the source files for dynamic messages. This endpoint can also be used to store any file based data (e.g. images, pdf documents, spreadsheets) for an unlimited amount of time.</p>

<p><strong>Note:</strong> The types of files allowed are - CSV, JSON, XML, Images [JPEG, PNG], and WAV.</p>

<p>Information about the resources endpoint is documented in the <a href="https://whispir.github.io/api/#resources">Resources</a> section of the documentation.</p>

<p><br/>
<strong>Step 2: Invoke the bulk message with reference to the resource ID and the desired content</strong></p>

<p>Once the resource file has been uploaded and the location of the resource being returned, applications can use this to populate a dynamic message using the <strong>/messages</strong> endpoint.</p>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.bulkmessage-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;resource&gt;</span>
      <span class="nt">&lt;resourceId/&gt;</span>
      <span class="nt">&lt;smsMappingField/&gt;</span>
      <span class="nt">&lt;emailMappingField/&gt;</span>
      <span class="nt">&lt;voiceMappingField&gt;</span>
      <span class="nt">&lt;options&gt;</span>
        <span class="nt">&lt;resolveRecipients/&gt;</span>
      <span class="nt">&lt;/options&gt;</span>
    <span class="nt">&lt;/resource&gt;</span>
    <span class="nt">&lt;messageTemplateId&gt;</span>
    <span class="nt">&lt;subject&gt;&lt;/subject&gt;</span>
    <span class="nt">&lt;body&gt;&lt;/body&gt;</span>
    <span class="nt">&lt;email&gt;</span>
        <span class="nt">&lt;body&gt;&lt;/body&gt;</span>
        <span class="nt">&lt;footer&gt;&lt;/footer&gt;</span>
        <span class="nt">&lt;type&gt;&lt;/type&gt;</span>
    <span class="nt">&lt;/email&gt;</span>
    <span class="nt">&lt;voice&gt;</span>
        <span class="nt">&lt;header&gt;&lt;/header&gt;</span>
        <span class="nt">&lt;body&gt;&lt;/body&gt;</span>
        <span class="nt">&lt;footer&gt;&lt;/footer&gt;</span>
        <span class="nt">&lt;other&gt;&lt;/other&gt;</span>
        <span class="nt">&lt;type&gt;&lt;/type&gt;</span>
    <span class="nt">&lt;/voice&gt;</span>
    <span class="nt">&lt;web&gt;</span>
        <span class="nt">&lt;body&gt;&lt;/body&gt;</span>
        <span class="nt">&lt;type&gt;&lt;/type&gt;</span>
    <span class="nt">&lt;/web&gt;</span>
    <span class="nt">&lt;callbackId/&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">bulkmessage</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"resource"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"resourceId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
        </span><span class="s">"smsMappingField"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
        </span><span class="s">"emailMappingField"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
        </span><span class="s">"voiceMappingField"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
        </span><span class="s">"options"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"resolveRecipients"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">}</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"messageTemplateId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
        </span><span class="s">"footer"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"header"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
        </span><span class="s">"footer"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
        </span><span class="s">"other"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"web"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"callbackId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<h3 id="dynamic-messaging">Dynamic Messaging</h3>

<h4 id="method-definition-and-descriptions">Method Definition and Descriptions</h4>

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Value</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Service URL</td>
            <td>https://api.<region>.whispir.com/messages <br/> https://api.<region>.whispir.com/workspaces/[id]/messages</td>
        </tr>
        <tr>
            <td>Methods Supported</td>
            <td>GET, POST</td>
        </tr>
        <tr>
            <td>Request MIME Type</td>
            <td>application/vnd.whispir.bulkmessage-v1+xml <br/> application/vnd.whispir.bulkmessage-v1+json</td>
        </tr>
    </tbody>
</table>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">/messages</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">GET:</td>
            <td>
                Provides a List of all the currently sent messages within the company or workspace (URIs)
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">POST:</td>
            <td>
                Creates and sends a new message/bulk message.
            </td>
        </tr>
    </tbody>
</table>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">/messages/{id}</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">GET:</td>
            <td>
                Retrieves the representation of the requested message.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">POST:</td>
            <td>
                NOT SUPPORTED
            </td>
        </tr>
    </tbody>
</table>

<p><strong>Note</strong>: The endpoint does not support PUT and DELETE in bulk messages. Similarly there is no POST for the <strong>/messages/{id}</strong>.</p>

<h3 id="request-components">Request Components</h3>

<p>The structure of the Bulk Message is used to define the resource that should be used in the sendout, while also giving the user the capability to override the message content in the event a message template is not desired.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Main Section</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">messageTemplateId</td>
            <td>
                The resource identifier of the Message Template that should be used for this request.<br/>
                Sample Value: 4FBBC384BCE3DAABFE3
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">callbackId</td>
            <td>
                The id of the callback to be used for responses to this message.<br/>
                Sample Value: SampleCallback
                <br/><br/>
                <b>Note:</b> callback IDs are configured by Administrators within the Whispir Platform.
            </td>
        </tr>
    </tbody>
</table>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Resource Section</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">resourceId</td>
            <td>
                The resource identifier returned from the POST to /resources.<br/>
                Resource referred to must be a valid CSV file.<br/>
                Sample Value: 384BCE34FBBCDAABFE3
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">smsMappingField</td>
            <td>
                The column name from within the CSV file that refers to the field on each row that should be used for SMS messages.<br/>
                Sample Value: Mobile
                <br/><br/>
                <strong>Note:</strong> This field will default to ‘mobile’ if present in the file and this field is not populated.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">emailMappingField</td>
            <td>
                The column name from within the CSV file that refers to the field on each row that should be used for Email messages.<br/>
                Sample Value: Email
                <br/><br/>
                <strong>Note:</strong> This field will default to ‘email’ if present in the file and this field is not populated.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">voiceMappingField</td>
            <td>
                The column name from within the CSV file that refers to the field on each row that should be used for Voice messages.<br/>
                Sample Value: Mobile
                <br/><br/>
                <strong>Note:</strong> This field will default to ‘mobile’ if present in the file and this field is not populated.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">options</td>
            <td>
                This specifies other options that are available within this bulk message.
                <br/>
                <ul>
                  <li>resolveRecipients (true/false) - Whether recipients should be resolved to contacts in the Whispir Workspace. Default: true for less than 5000 recipients</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Message Content Section – *Required when no template is used.*</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">Subject</td>
            <td>
                Defines the subject of the message.  The subject also acts as the first line of the SMS message.<br/>
                Sample Value: Mary had a little lamb.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Body</td>
            <td>
                The body of the SMS message being delivered.<br/>
                Sample Value: And its fleece was white as snow. Everywhere that Mary went, the lamb was sure to check her in 4Square. Soon, Mary was the president of the town.
            </td>
        </tr>
    </tbody>
</table>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Email Section – *Required for email messages*</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">Body</td>
            <td>
                The body of the email message being delivered.<br/>
                Sample Value: Jack and Jill went up the hill.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Footer</td>
            <td>
                The footer of the email message being delivered. Usually used as an area for a signature.<br/>
                Sample Value: Regards, the well.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Type</td>
            <td>
                The type of the email content.<br/>
                Sample Value: text/plain (default) / text/html.
            </td>
        </tr>
    </tbody>
</table>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Voice Section – *Required for voice messages*</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">Header</td>
            <td>
                The header of the voice content.<br/>
                Sample Value: The text to speech content of the introduction message for the voice call.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Body</td>
            <td>
                The content of the voice message.<br/>
                Sample Value: The text to speech content of the body message for the voice call.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Type</td>
            <td>
                The type parameter defines the other optional elements of the voice call.<br/>
                Sample Value: ConfCall:ConfAccountNo:ConfPinNo:ConfModPinNo:Pin:
            </td>
        </tr>
    </tbody>
</table>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Web Section – *Required for web/rich push messages*</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">Body</td>
            <td>
                The body of the web message<br/>
                Sample Value: The body content of the web message to be delivered.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Type</td>
            <td>
                The type of the web message<br/>
                Sample Value: text/plain (default) / text/html.
            </td>
        </tr>
    </tbody>
</table>

<h2 id="response-structure">Response Structure</h2>

<blockquote>
<blockquote>
<p>If the /message call is successful, the following response will be received.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 202 Accepted
Location: https://api.&lt;region&gt;.whispir.com/messages/4FBBC384BCE3DAABFE3?apikey=&lt;your_api_key&gt;

Your request has been accepted for processing.
</code></pre>

<blockquote>
<blockquote>
<p>The Location value in the Header contains the messageId (for the sent message) as shown in the response above.</p>
</blockquote>
</blockquote>

<p>If the request was successful, the response contains the information for the calling application to retrieve information about the message.</p>

<p>If the request was not successful, the response will contain the information about why the request could not be processed.  This will be as per the standard Whispir API response code rules.</p>

<p>In case of a dynamic message, the outcome of this message will be a complete message with placeholder variables @@ replaced with the supplied values.</p>

<p>For more information about retrieving the responses and status of the sent message, refer to <a href="/#message-status">message status</a> below.</p>

<h2 id="recipient-information">Recipient Information</h2>

<p>Using the Whispir API, users can send message to either ad-hoc or predefined recipients.</p>

<p>The details below describe how these can be used in the <code class="prettyprint">&lt;to&gt;</code> field for any type of message.</p>

<p><strong>For ad-hoc recipients:</strong></p>

<p>Any valid E-mail address</p>

<ul>
<li><to>jsmtih@test.com</to></li>
</ul>

<p>Any valid Mobile number for SMS or Voice calls (countrycode prefixed)</p>

<ul>
<li><to>61423589146,6596624876</to></li>
</ul>

<p>Any valid Landline number for Voice calls only (countrycode prefixed)</p>

<ul>
<li><to>6197468794</to></li>
</ul>

<p><strong>For pre-entered Whispir recipients:</strong></p>

<p>Contacts can be used as a message recipient simply by specifying any valid Whispir Contact MRI</p>

<ul>
<li><to>John_Smith.782749@Contact.whispir.com</to></li>
</ul>

<p>Users can be used as a message recipient simply by specifying any valid Whispir User MRI</p>

<ul>
<li><to>John_Smith@User.whispir.com</to></li>
</ul>

<p>Distribution Lists can be used as a message recipient simply by specifying any valid Whispir Distribution List MRI</p>

<ul>
<li><to>Crisis_Management.Critical_Incident_Management@list.project.whispir.com</to></li>
</ul>

<p>Each of these can be found by using the Whispir API to search for the resource type and locate the MRI field in the response.</p>

<h2 id="retrieve-a-previously-sent-message">Retrieve a previously sent Message</h2>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B?apikey=[your_api_key]
Authorization: Basic &lt;YOUR AUTH HEADER&gt;
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test Message<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;body&gt;</span>This is the body of my test SMS message<span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;label/&gt;</span> 
    <span class="nt">&lt;voice/&gt;</span>
    <span class="nt">&lt;from&gt;&lt;/from&gt;</span>
    <span class="nt">&lt;direction&gt;</span>OUTGOING<span class="nt">&lt;/direction&gt;</span>
    <span class="nt">&lt;responseCount&gt;</span>0<span class="nt">&lt;/responseCount&gt;</span>
    <span class="nt">&lt;social/&gt;</span>
    <span class="nt">&lt;createdTime&gt;</span>2012-09-24T15:36:16+10:00<span class="nt">&lt;/createdTime&gt;</span>

    ...

    <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
       <span class="na">rel=</span><span class="s">"self"</span> 
       <span class="na">uri=</span><span class="s">"http://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B?apikey=[your-api-key]"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test Message"</span><span class="p">,</span><span class="x">
    </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of my test SMS message"</span><span class="p">,</span><span class="x">
    </span><span class="s">"label"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"web"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"from"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"direction"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"OUTGOING"</span><span class="p">,</span><span class="x">
    </span><span class="s">"social"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"createdTime"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1469414786000"</span><span class="x">
    </span><span class="s">"responseCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x">

    </span><span class="o">...</span><span class="x">

    </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B?apikey=[your-api-key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>A call to GET /messages gives you the list of last 20 sent messages. You can use the <a href="#pagination">Pagination</a> to retrieve further messages.</p>

<p>If a specific message has to retrieved then, you must know the message ID of the message. This can be done by retrieving the list of messages using <em>GET /messages</em> (include workspace if needed) and then loop through them to get details of each and every individual message.</p>

<p><em>Note:</em> GET /messages will only retrieve the messages sent by you. But if you want to retrieve all the messages sent in the workspace (sent by others aswell), then append <code class="prettyprint">&amp;viewType=shared</code> in the URL query.</p>

        <h1 id="message-status">Message Status</h1>

<blockquote>
<p>API Endpoint</p>

<blockquote>
<p>The following calls describe how to access message status information from within your message resource</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="c">&lt;!-- From the default workspace --&gt;</span>

https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/messages/{:messageId}/messagestatus/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Accept: application/vnd.whispir.messagestatus-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="c">//From the default workspace</span><span class="x">

</span><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/messages/{:messageId}/messagestatus/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">messagestatus</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>
<pre><code class="highlight xml"><span class="c">&lt;!-- or from a defined workspace --&gt;</span>

https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/workspaces/{:id}/messages/{:messageId}/messagestatus/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Accept: application/vnd.whispir.messagestatus-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="c">//or from a defined workspace</span><span class="x">

</span><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/workspaces/{:id}/messages/{:messageId}/messagestatus/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">messagestatus</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The following resource types are supported for messages status</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">- application/vnd.whispir.messagestatus-v1+xml
- application/vnd.whispir.messagestatus-v1+json
</code></pre>

<blockquote>
<blockquote>
<p>The following methods are supported for the message status endpoint</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">- GET
</code></pre>

<p>Whispir will automatically monitor the status of each message after it has been sent to each recipient.  Using the message status information, you are able to determine who received the message, what exact time they received it, on what message channel (SMS, Email, Voice, Web, Push Notification), whether they replied to the message, what time they replied, and on what messaging channel.</p>

<p>Each message progresses through various states, from Pending to Acknowledged.</p>

<p><img src="https://developer.whispir.com/files/MessageStatus.png" /></p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Message Status Descriptions</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">Pending (PENDING):</td>
            <td>
                The message has not yet been processed by Whispir.  It is in a queue and will be processed shortly.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Sent (SENT):</td>
            <td>
                The message has been sent from Whispir to the recipient, however, there has been no acknowledgement from the recipient via read receipt that the message has arrived.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Received (DELIVRD):</td>
            <td><strong>Email:</strong> Whispir has received acknowledgement via a read receipt that the message has arrived in the inbox.
            <br/><br/>
            <strong>SMS:</strong> Received status can mean one of two things for SMS.

            <ol>
                <li>The message has been received by the network and is being processed for delivery to the handset.<br/><br/>How long the message stays in this state is up to the telco.<br/><br/></li>
                <li>The message has been received by the handset and confirmed by the telco.</li>
            </ol>

            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Acknowledged (READ):</td>
            <td>
               Whispir has received an intended response from the recipient, either by reply SMS, Email or Voice prompt
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Undeliverable (FAILED):</td>
            <td>
               Whispir was not able to deliver the message to the intended recipient on the specified channel.  This may be due to incorrect information e.g. wrong phone number or email address, or due to poor network coverage.
            </td>
        </tr>
    </tbody>
</table>

<p>Using the API, developers are able to access this status information at either a <strong>Summary</strong> or <strong>Detailed</strong> level.</p>

<p>The first thing a developer must do in order to retrieve the status of a sent message is retrieve the message using the API.</p>

<h2 id="retrieve-a-message">Retrieve a Message</h2>

<blockquote>
<p>Retrieve a message</p>

<blockquote>
<p>Use the API to retrieve a sent Message </p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
 <span class="nt">&lt;subject&gt;</span>test subject<span class="nt">&lt;/subject&gt;</span>
 <span class="nt">&lt;body&gt;</span>test body<span class="nt">&lt;/body&gt;</span>
 <span class="nt">&lt;voice/&gt;</span>
 <span class="nt">&lt;from&gt;&lt;/from&gt;</span>
 <span class="nt">&lt;direction&gt;</span>OUTGOING<span class="nt">&lt;/direction&gt;</span>
 <span class="nt">&lt;responseCount&gt;</span>0<span class="nt">&lt;/responseCount&gt;</span>
 <span class="nt">&lt;social/&gt;</span>
 <span class="nt">&lt;createdTime&gt;</span>2012-09-24T15:36:16+10:00<span class="nt">&lt;/createdTime&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"self"</span> 
   <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B?apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"summaryStatus"</span> 
   <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"detailedStatus"</span> 
   <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=detailed&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"summaryResponses"</span> 
   <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"detailedResponses"</span> 
   <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"summaryResponsesWithResponseRule"</span> 
   <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=responserule&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"detailedResponsesWithResponseRule"</span> 
   <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=responserule&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="o">:</span><span class="x"> </span><span class="s">"test subject"</span><span class="p">,</span><span class="x">
    </span><span class="s">"body"</span><span class="o">:</span><span class="x"> </span><span class="s">"test body"</span><span class="p">,</span><span class="x">
    </span><span class="s">"direction"</span><span class="o">:</span><span class="x"> </span><span class="s">"OUTGOING"</span><span class="p">,</span><span class="x">
    </span><span class="s">"responseCount"</span><span class="o">:</span><span class="x"> </span><span class="s">"0"</span><span class="p">,</span><span class="x">
    </span><span class="s">"createdTime"</span><span class="o">:</span><span class="x"> </span><span class="s">"1460070991"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B?apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"summaryStatus"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"detailedStatus"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=detailed&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"summaryResponses"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"detailedResponses"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"summaryResponsesWithResponseRule"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=responserule&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"detailedResponsesWithResponseRule"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=responserule&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">}]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>The example request below returns the Message that the API user requested.  </p>

<p><code class="prettyprint">GET /messages/069BF68E5E0FE99B?apikey=498nadsasdff09fewdsafjaa90f</code></p>

<p>Each of the URLs specified in the response can be accessed using the REL and appropriate METHOD to perform the specified functionality.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Rel Attribute Descriptions</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">self:</td>
            <td>
                Retrieves the current message.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">summaryStatus:</td>
            <td>
                Returns the status information of the message as a messagestatus object, in a summary view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">detailedStatus:</td>
            <td>Returns the status information of the message as a messagestatus object, in a detailed view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">summaryResponses:</td>
            <td>
               Returns the response information of the message as a messageresponse object, in a summary view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">detailedResponses:</td>
            <td>
               Returns the response information of the message as a messageresponse object, in a detailed view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">summaryResponsesWithResponseRule:</td>
            <td>
               Returns the response information of the message as a messageresponse object, filtered by the Response Rule (if one was used) in a summary view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">detailedResponsesWithResponseRule:</td>
            <td>
               Returns the response information of the message as a messageresponse object, filtered by the Response Rule (if one was used) in a detailed view.
            </td>
        </tr>
    </tbody>
</table>

<h2 id="retrieve-summary-status">Retrieve Summary Status</h2>

<blockquote>
<p>Retrieve Summary Status</p>

<blockquote>
<p>This sample of code will retrieve the Summary Status for a message</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"summaryStatus"</span> 
   <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
    </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
    </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"summaryStatus"</span><span class="p">,</span><span class="x">
    </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<p>Sample Summary Status Response</p>

<blockquote>
<p>This sample of code will retrieve the Summary Status for a message</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;ns2:messageStatuses&gt;</span>
  <span class="nt">&lt;ns2:messageStatus&gt;</span>
    <span class="nt">&lt;ns2:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
             <span class="na">rel=</span><span class="s">"self"</span> 
             <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;categories&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">name=</span><span class="s">"Sent"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;percentageTotal&gt;</span>0.0%<span class="nt">&lt;/percentageTotal&gt;</span>
        <span class="nt">&lt;recipientCount&gt;</span>0<span class="nt">&lt;/recipientCount&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">name=</span><span class="s">"Pending"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;percentageTotal&gt;</span>0.0%<span class="nt">&lt;/percentageTotal&gt;</span>
        <span class="nt">&lt;recipientCount&gt;</span>0<span class="nt">&lt;/recipientCount&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">name=</span><span class="s">"Received"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;percentageTotal&gt;</span>0.0%<span class="nt">&lt;/percentageTotal&gt;</span>
        <span class="nt">&lt;recipientCount&gt;</span>0<span class="nt">&lt;/recipientCount&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">name=</span><span class="s">"Acknowledged"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;percentageTotal&gt;</span>100.0%<span class="nt">&lt;/percentageTotal&gt;</span>
        <span class="nt">&lt;recipientCount&gt;</span>2<span class="nt">&lt;/recipientCount&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">name=</span><span class="s">"Undeliverable"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;percentageTotal&gt;</span>0.0%<span class="nt">&lt;/percentageTotal&gt;</span>
        <span class="nt">&lt;recipientCount&gt;</span>0<span class="nt">&lt;/recipientCount&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;/categories&gt;</span>
  <span class="nt">&lt;/ns2:messageStatus&gt;</span>
 <span class="nt">&lt;/ns2:messageStatuses&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
  </span><span class="s">"messageStatuses"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">],</span><span class="x">
    </span><span class="s">"categories"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Sent"</span><span class="p">,</span><span class="x">
      </span><span class="s">"recipientCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x">
      </span><span class="s">"percentageTotal"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"0.0%"</span><span class="x">
    </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Pending"</span><span class="p">,</span><span class="x">
      </span><span class="s">"recipientCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x">
      </span><span class="s">"percentageTotal"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"0.0%"</span><span class="x">
    </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Received"</span><span class="p">,</span><span class="x">
      </span><span class="s">"recipientCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x">
      </span><span class="s">"percentageTotal"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"0.0%"</span><span class="x">
    </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Acknowledged"</span><span class="p">,</span><span class="x">
      </span><span class="s">"recipientCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="m">2</span><span class="p">,</span><span class="x">
      </span><span class="s">"percentageTotal"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"100.0%"</span><span class="x">
    </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Undeliverable"</span><span class="p">,</span><span class="x">
      </span><span class="s">"recipientCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x">
      </span><span class="s">"percentageTotal"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"0.0%"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">}</span><span class="x"> </span><span class="p">],</span><span class="x">
  </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Using the links provided in the message response, the user can simply make a new API request to retrieve the <strong>summaryStatus</strong> URL. </p>

<p>In the example above, the <strong>summaryStatus</strong> URL is:</p>

<p>So the request would look as follows:</p>

<p><code class="prettyprint">GET https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f</code></p>

<p>As this is a <strong>GET</strong> request we don&rsquo;t have to provide any message body.</p>

<p>This response states that of the 2 people that were sent the message, both of them <strong>Acknowledged</strong> it by sending a response.  </p>

<p>Your application can use this information to easily determine the numbers of recipients in each state and show a small graph.</p>

<h2 id="retrieve-detailed-status">Retrieve Detailed Status</h2>

<blockquote>
<p>Retrieve Detailed Status</p>

<blockquote>
<p>This snippet will retrieve the detailed status for a message.</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"detailedStatus"</span> 
   <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=detailed&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
    </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
    </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"detailedStatus"</span><span class="p">,</span><span class="x">
    </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=detailed&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<p>Sample Detailed Status Response</p>
</blockquote>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;status&gt;</span>1 to 2 of 2<span class="nt">&lt;/status&gt;</span>
  <span class="nt">&lt;ns2:messageStatuses&gt;</span>
    <span class="nt">&lt;ns2:messageStatus&gt;</span>
      <span class="nt">&lt;ns2:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
            <span class="na">rel=</span><span class="s">"self"</span> 
                <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?apikey=498nadsasdff09fewdsafjaa90f&amp;view=detailed"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">type=</span><span class="s">"email"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;destination&gt;&lt;/destination&gt;</span>
        <span class="nt">&lt;status&gt;&lt;/status&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">type=</span><span class="s">"sms"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;acknowlegedTimestamp&gt;</span>2012-09-28T08:47:50+10:00<span class="nt">&lt;/acknowlegedTimestamp&gt;</span>
        <span class="nt">&lt;destination&gt;</span>$mobile<span class="nt">&lt;/destination&gt;</span>
        <span class="nt">&lt;receivedTimestamp&gt;</span>2012-09-28T08:47:20+10:00<span class="nt">&lt;/receivedTimestamp&gt;</span>
        <span class="nt">&lt;sentTimestamp&gt;</span>2012-09-28T08:47:17+10:00<span class="nt">&lt;/sentTimestamp&gt;</span>
        <span class="nt">&lt;status&gt;</span>READ<span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">type=</span><span class="s">"voice"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;destination&gt;&lt;/destination&gt;</span>
        <span class="nt">&lt;status&gt;&lt;/status&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;info&gt;</span> Out bound SMS text message sent OK. <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;name&gt;</span>John Smith<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;/ns2:messageStatus&gt;</span>
    <span class="nt">&lt;ns2:messageStatus&gt;</span>
      <span class="nt">&lt;ns2:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
            <span class="na">rel=</span><span class="s">"self"</span> 
                <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?apikey=498nadsasdff09fewdsafjaa90f&amp;view=detailed"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">type=</span><span class="s">"email"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;destination&gt;&lt;/destination&gt;</span>
        <span class="nt">&lt;status&gt;&lt;/status&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">type=</span><span class="s">"sms"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;acknowlegedTimestamp&gt;</span>2012-09-28T08:47:49+10:00<span class="nt">&lt;/acknowlegedTimestamp&gt;</span>
        <span class="nt">&lt;destination&gt;</span>$mobile<span class="nt">&lt;/destination&gt;</span>
        <span class="nt">&lt;receivedTimestamp&gt;</span>2012-09-28T08:47:20+10:00<span class="nt">&lt;/receivedTimestamp&gt;</span>
        <span class="nt">&lt;sentTimestamp&gt;</span>2012-09-28T08:47:17+10:00<span class="nt">&lt;/sentTimestamp&gt;</span>
        <span class="nt">&lt;status&gt;</span>READ<span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">type=</span><span class="s">"voice"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;destination&gt;&lt;/destination&gt;</span>
        <span class="nt">&lt;status&gt;&lt;/status&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;info&gt;</span> Out bound SMS text message sent OK. <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;name&gt;</span>Fred Smith<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;/ns2:messageStatus&gt;</span>
  <span class="nt">&lt;/ns2:messageStatuses&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
  </span><span class="s">"messageStatuses"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"John Smith"</span><span class="p">,</span><span class="x">
    </span><span class="s">"info"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Out bound SMS text message sent OK."</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?apikey=498nadsasdff09fewdsafjaa90f&amp;view=detailed"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">],</span><span class="x">
    </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"email"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"destination"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
    </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"sms"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"READ"</span><span class="p">,</span><span class="x">
      </span><span class="s">"destination"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
      </span><span class="s">"sentTimestamp"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1460070991"</span><span class="p">,</span><span class="x">
      </span><span class="s">"receivedTimestamp"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1460070991"</span><span class="p">,</span><span class="x">
      </span><span class="s">"acknowlegedTimestamp"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1460070991"</span><span class="x">
    </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"voice"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"destination"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
    </span><span class="p">},{</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fred Smith"</span><span class="p">,</span><span class="x">
    </span><span class="s">"info"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Out bound SMS text message sent OK."</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?apikey=498nadsasdff09fewdsafjaa90f&amp;view=detailed"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">],</span><span class="x">
    </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"email"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"destination"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
    </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"sms"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"READ"</span><span class="p">,</span><span class="x">
      </span><span class="s">"destination"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
      </span><span class="s">"sentTimestamp"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1460070991"</span><span class="p">,</span><span class="x">
      </span><span class="s">"receivedTimestamp"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1460070991"</span><span class="p">,</span><span class="x">
      </span><span class="s">"acknowlegedTimestamp"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1460070991"</span><span class="x">
    </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"voice"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"destination"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">],</span><span class="x">
  </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 2 of 2"</span><span class="p">,</span><span class="x">
  </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Similar to the <strong>summaryStatus</strong>, using the links provided in the message response, the user can simply make a new API request to retrieve the <strong>detailedStatus</strong> URL. </p>

<p><code class="prettyprint">GET https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=detailed&amp;apikey=</code></p>

<p>As this is a <strong>GET</strong> request we don&rsquo;t have to provide any message body. </p>

<p>The user can easily use this information to receive a far more detailed status breakdown of (for each recipient):</p>

<ul>
<li>  The name of the recipient</li>
<li>  The channel type (SMS, Email, Voice, Web)</li>
<li>  The sent timestamp for each channel</li>
<li>  The received timestamp for each channel</li>
<li>  The acknowledged timestamp for each channel</li>
<li>  The undeliverable timestamp (only present when the channel is undeliverable)</li>
<li>  The overall status for this recipient (PENDING, SENT, DELIVRD, READ, FAILED)</li>
<li>  The information text describing how this message has progressed.</li>
</ul>

<p>Once you have processed the status information, the next likely piece of information you will be looking to find is the content of the responses (if any).  The section on Message Responses describes how to retrieve this information.</p>

        <h1 id="message-responses">Message Responses</h1>

<blockquote>
<p>API Endpoint</p>

<blockquote>
<ul>
<li>generic</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/messages/{:messageId}/messageresponses/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Accept: application/vnd.whispir.messageresponse-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/messages/{:messageId}/messageresponses/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">messageresponse</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<ul>
<li>limited to a workspace</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/workspaces/{:id}/messages/{:messageId}/messageresponses/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Accept: application/vnd.whispir.messageresponse-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/workspaces/{:id}/messages/{:messageId}/messageresponses/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">messageresponse</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">&gt; Resource type

- application/vnd.whispir.messageresponse-v1+xml
- application/vnd.whispir.messageresponse-v1+json


&gt; Methods supported

- GET
</code></pre>

<p>Recipients of Whispir Messages have the ability to respond directly to the message via the channels that they received the message on.  </p>

<p>If they received the message via SMS, they can respond directly to the SMS message, and this will be visible through the Whispir.io API.</p>

<p><img title="Message Response" src="https://developer.whispir.com/files/MessageResponse.png" /></p>

<p>The sections below describe the process to retrieve the responses to any messages that you have sent via the Whispir.io API.</p>

<h2 id="retrieve-a-message">Retrieve a Message</h2>

<blockquote>
<p>Retrieve a message</p>

<blockquote>
<p>Use the API to retrieve a sent Message </p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
 <span class="nt">&lt;subject&gt;</span>test subject<span class="nt">&lt;/subject&gt;</span>
 <span class="nt">&lt;body&gt;</span>test body<span class="nt">&lt;/body&gt;</span>
 <span class="nt">&lt;voice/&gt;</span>
 <span class="nt">&lt;from&gt;&lt;/from&gt;</span>
 <span class="nt">&lt;direction&gt;</span>OUTGOING<span class="nt">&lt;/direction&gt;</span>
 <span class="nt">&lt;responseCount&gt;</span>0<span class="nt">&lt;/responseCount&gt;</span>
 <span class="nt">&lt;social/&gt;</span>
 <span class="nt">&lt;createdTime&gt;</span>2012-09-24T15:36:16+10:00<span class="nt">&lt;/createdTime&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"self"</span> 
   <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B?apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"summaryStatus"</span> 
   <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"detailedStatus"</span> 
   <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=detailed&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"summaryResponses"</span> 
   <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"detailedResponses"</span> 
   <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"summaryResponsesWithResponseRule"</span> 
   <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=responserule&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"detailedResponsesWithResponseRule"</span> 
   <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=responserule&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="o">:</span><span class="x"> </span><span class="s">"test subject"</span><span class="p">,</span><span class="x">
    </span><span class="s">"body"</span><span class="o">:</span><span class="x"> </span><span class="s">"test body"</span><span class="p">,</span><span class="x">
    </span><span class="s">"direction"</span><span class="o">:</span><span class="x"> </span><span class="s">"OUTGOING"</span><span class="p">,</span><span class="x">
    </span><span class="s">"responseCount"</span><span class="o">:</span><span class="x"> </span><span class="s">"0"</span><span class="p">,</span><span class="x">
    </span><span class="s">"createdTime"</span><span class="o">:</span><span class="x"> </span><span class="s">"1460070991"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B?apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"summaryStatus"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"detailedStatus"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=detailed&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"summaryResponses"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"detailedResponses"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"summaryResponsesWithResponseRule"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=responserule&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"detailedResponsesWithResponseRule"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=responserule&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">}]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>The example request below returns the Message that the API user requested.  </p>

<p><code class="prettyprint">GET /messages/069BF68E5E0FE99B?apikey=498nadsasdff09fewdsafjaa90f</code></p>

<p>Each of the URLs specified in the response can be accessed using the REL and appropriate METHOD to perform the specified functionality.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Rel Attribute Descriptions</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">self:</td>
            <td>
                Retrieves the current message.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">summaryStatus:</td>
            <td>
                Returns the status information of the message as a messagestatus object, in a summary view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">detailedStatus:</td>
            <td>Returns the status information of the message as a messagestatus object, in a detailed view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">summaryResponses:</td>
            <td>
               Returns the response information of the message as a messageresponse object, in a summary view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">detailedResponses:</td>
            <td>
               Returns the response information of the message as a messageresponse object, in a detailed view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">summaryResponsesWithResponseRule:</td>
            <td>
               Returns the response information of the message as a messageresponse object, filtered by the Response Rule (if one was used) in a summary view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">detailedResponsesWithResponseRule:</td>
            <td>
               Returns the response information of the message as a messageresponse object, filtered by the Response Rule (if one was used) in a detailed view.
            </td>
        </tr>
    </tbody>
</table>

<h2 id="summary-responses">Summary Responses</h2>

<blockquote>
<p>Summary of Responses</p>

<blockquote>
<p>This snippet of code will allow users to retrieve the summary of responses to a message.</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"summaryResponses"</span> 
   <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
    </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
    </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"summaryResponses"</span><span class="p">,</span><span class="x">
    </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<p>Sample Summary Responses Response</p>

<blockquote>
<p>This response contains the summary of responses to the message</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ns2:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
              <span class="na">rel=</span><span class="s">"self"</span> 
              <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns2:messageresponses&gt;</span>
        <span class="nt">&lt;ns2:response</span> <span class="na">type=</span><span class="s">"noresponse"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;percentageTotal&gt;</span>50%<span class="nt">&lt;/percentageTotal&gt;</span>
            <span class="nt">&lt;responseCount&gt;</span>1<span class="nt">&lt;/responseCount&gt;</span>
        <span class="nt">&lt;/ns2:response&gt;</span>
        <span class="nt">&lt;ns2:response</span> <span class="na">type=</span><span class="s">"notmatched"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;percentageTotal&gt;</span>50%<span class="nt">&lt;/percentageTotal&gt;</span>
            <span class="nt">&lt;responseCount&gt;</span>1<span class="nt">&lt;/responseCount&gt;</span>
        <span class="nt">&lt;/ns2:response&gt;</span>
    <span class="nt">&lt;/ns2:messageresponses&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
  </span><span class="s">"messageresponses"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"percentageTotal"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"50%"</span><span class="p">,</span><span class="x">
    </span><span class="s">"responseCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">],</span><span class="x">
    </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"noresponse"</span><span class="x">
  </span><span class="p">},{</span><span class="x">
    </span><span class="s">"percentageTotal"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"50%"</span><span class="p">,</span><span class="x">
    </span><span class="s">"responseCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">],</span><span class="x">
    </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"notmatched"</span><span class="x">
  </span><span class="p">}</span><span class="x"> </span><span class="p">],</span><span class="x">
  </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="p">,</span><span class="x">
    </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
    </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
  </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Using the links provided in the message response, the user can simply make a new API request to retrieve the <strong>summaryStatus</strong> URL. </p>

<p>The request for this information would look as follows:</p>

<p><code class="prettyprint">GET https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f</code></p>

<p>This request is asking for a couple of things:</p>

<ol>
<li> The URL is specifically asking for all of the <strong>messageresponses</strong> to the message with ID <strong>069BF68E5E0FE99B</strong></li>
<li> The <strong>View</strong> parameter is specifying that the message responses should be shown in a <strong>summary</strong> view</li>
<li> The <strong>Filter</strong> parameter is specifying that the filter should not use a response rule, it should show the <strong>default</strong> filter</li>
</ol>

<p>As this is a <strong>GET</strong> request we don&rsquo;t have to provide any message body.</p>

<p>This response states that of the 2 people that were sent the message, both of them <strong>Acknowledged</strong> it by sending a response.  </p>

<p>Your application can use this information to easily determine the numbers of recipients in each state and show a small graph.</p>

<h2 id="detailed-responses">Detailed Responses</h2>

<blockquote>
<p>Detailed Responses</p>

<blockquote>
<p>This snippet allows the user to retrieve the detailed response report for a message</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"detailedResponses"</span> 
   <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
    </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
    </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"detailedResponses"</span><span class="p">,</span><span class="x">
    </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<p>Sample Detailed Responses Response</p>

<blockquote>
<p>This is the detailed response report for a message</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 2 of 2<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:messageresponses&gt;</span>
        <span class="nt">&lt;ns2:response&gt;</span>
            <span class="nt">&lt;from&gt;</span>
                <span class="nt">&lt;email&gt;</span>jsmith@test.com<span class="nt">&lt;/email&gt;</span>                
                <span class="nt">&lt;mobile&gt;</span>$mobile<span class="nt">&lt;/mobile&gt;</span> 
                <span class="nt">&lt;mri&gt;</span>John_Smith.484215.Critical_Incident_Management@Contact.whispir.com<span class="nt">&lt;/mri&gt;</span>
                <span class="nt">&lt;name&gt;</span>John Smith<span class="nt">&lt;/name&gt;</span>
                <span class="nt">&lt;voice&gt;</span>$mobile<span class="nt">&lt;/voice&gt;</span> 
            <span class="nt">&lt;/from&gt;</span>
            <span class="nt">&lt;responseCategory&gt;</span>noresponse<span class="nt">&lt;/responseCategory&gt;</span>
            <span class="nt">&lt;responseMessage</span> <span class="na">channel=</span><span class="s">"N/A"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;acknowledged&gt;</span>N/A<span class="nt">&lt;/acknowledged&gt;</span>
                <span class="nt">&lt;content&gt;</span>N/A<span class="nt">&lt;/content&gt;</span>
            <span class="nt">&lt;/responseMessage&gt;</span>
        <span class="nt">&lt;/ns2:response&gt;</span>
        <span class="nt">&lt;ns2:response&gt;</span>
            <span class="nt">&lt;from&gt;</span>
                <span class="nt">&lt;email&gt;</span>fsmith@test.com<span class="nt">&lt;/email&gt;</span>
                <span class="nt">&lt;mobile&gt;</span>$mobile<span class="nt">&lt;/mobile&gt;</span>  
                <span class="nt">&lt;mri&gt;</span>Fred_Smith.341550.Critical_Incident_Management@Contact.whispir.com<span class="nt">&lt;/mri&gt;</span>
                <span class="nt">&lt;name&gt;</span>Fred Smith<span class="nt">&lt;/name&gt;</span>
                <span class="nt">&lt;voice&gt;</span>$mobile<span class="nt">&lt;/voice&gt;</span> 
            <span class="nt">&lt;/from&gt;</span>
            <span class="nt">&lt;responseCategory&gt;</span>notmatched<span class="nt">&lt;/responseCategory&gt;</span>
            <span class="nt">&lt;responseMessage</span> <span class="na">channel=</span><span class="s">"SMS"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;acknowledged&gt;</span>28/09/12 08:48<span class="nt">&lt;/acknowledged&gt;</span>
                <span class="nt">&lt;content&gt;</span>OK, got it. Thanks.<span class="nt">&lt;/content&gt;</span>
            <span class="nt">&lt;/responseMessage&gt;</span>
        <span class="nt">&lt;/ns2:response&gt;</span>
    <span class="nt">&lt;/ns2:messageresponses&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
  </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 2 of 2    "</span><span class="p">,</span><span class="x">
  </span><span class="s">"messageresponses"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"from"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"John Smith"</span><span class="p">,</span><span class="x">
      </span><span class="s">"mri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"John_Smith.484215.Critical_Incident_Management@Contact.whispir.com"</span><span class="p">,</span><span class="x">
      </span><span class="s">"mobile"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
      </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"jsmith@test.com"</span><span class="p">,</span><span class="x">
      </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"responseCategory"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"noresponse"</span><span class="p">,</span><span class="x">
    </span><span class="s">"responseMessage"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"content"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"N/A"</span><span class="p">,</span><span class="x">
      </span><span class="s">"acknowledged"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"N/A"</span><span class="p">,</span><span class="x">
      </span><span class="s">"channel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"N/A"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">},{</span><span class="x">
    </span><span class="s">"from"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fred Smith"</span><span class="p">,</span><span class="x">
      </span><span class="s">"mri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fred_Smith.341550.Critical_Incident_Management@Contact.whispir.com"</span><span class="p">,</span><span class="x">
      </span><span class="s">"mobile"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
      </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"fsmith@test.com"</span><span class="p">,</span><span class="x">
      </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"responseCategory"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"notmatched"</span><span class="p">,</span><span class="x">
    </span><span class="s">"responseMessage"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"content"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"OK, got it. Thanks."</span><span class="p">,</span><span class="x">
      </span><span class="s">"acknowledged"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"28/09/12 08:48"</span><span class="p">,</span><span class="x">
      </span><span class="s">"channel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"SMS"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">}</span><span class="x"> </span><span class="p">],</span><span class="x">
  </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>This shows the application client that there were two intended recipients of this message.</p>

<p>One of the recipients is in the <strong>noresponse</strong> category, meaning they have not provided a response.  The other recipient is in the <strong>notmatched</strong> category, meaning the response did not match any search criteria.</p>
</blockquote>
</blockquote>

<p>Using the links provided in the message response, the user can simply make a new API request to retrieve the <strong>detailedResponses</strong> URL. </p>

<p>The resulting request would look as follows:</p>

<p><code class="prettyprint">GET https://api.&lt;region&gt;.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f</code></p>

<p>This request is asking for a couple of things:</p>

<ol>
<li> The URL is specifically asking for all of the <strong>messageresponses</strong> to the message with ID <strong>069BF68E5E0FE99B</strong></li>
<li> The <strong>View</strong> parameter is specifying that the message responses should be shown in a <strong>detailed</strong> view</li>
<li> The <strong>Filter</strong> parameter is specifying that the filter should not use a response rule, it should show the <strong>default</strong> filter</li>
</ol>

<p>As this is a <strong>GET</strong> request we don&rsquo;t have to provide any message body.</p>

<p><strong>Note:</strong> Searching responses will be described further on in this documentation.</p>

<ul>
<li>  The <strong>responseMessage channel</strong> describes the messaging channel that the response has come in to the Whispir Platform via.</li>
<li>  The <strong>responseMessage content</strong> describes the actual content of the inbound message.</li>
<li>  The <strong>responseMessage acknowledged</strong> shows the date of when the response was received by the Whispir Platform</li>
</ul>

        <h1 id="templates">Templates</h1>

<blockquote>
<p>API Endpoint</p>

<blockquote>
<ul>
<li>generic</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/templates/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.template-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/templates/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">template</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<ul>
<li>limited to a workspace</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/workspaces/{:id}/templates/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.template-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/workspaces/{:id}/templates/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">template</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">&gt; Resource type

- application/vnd.whispir.template-v1+xml
- application/vnd.whispir.template-v1+json


&gt; Methods supported

- GET
- POST
- PUT
- DELETE
</code></pre>

<p>Using the Whispir.io API, messages can be stored as Message Templates that can be easily referenced within your API calls.</p>

<p>The purpose of using a Message Template rather than including your content directly into your messages API call is to ensure a separation of message content/design and application code.</p>

<p>If you are including the content and design of messages within your application code, in the event these need to change, this is often a task for a developer, resulting in potentially lengthy change request cycles.</p>

<p>The simple inclusion of a Message Template can alleviate this completely, allowing the designers to control the look and feel of the message, while the developer can control when it is triggered.</p>

<h2 id="creating-templates">Creating Templates</h2>

<blockquote>
<p>Creating Templates</p>

<blockquote>
<p>The following API calls allow users to manage Templates using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/templates?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.template-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;ns3:template</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> 
              <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;messageTemplateName&gt;</span>Sample SMS Template<span class="nt">&lt;/messageTemplateName&gt;</span>
  <span class="nt">&lt;messageTemplateDescription&gt;</span>
    Template to provide an example on whispir.io
  <span class="nt">&lt;/messageTemplateDescription&gt;</span>
  <span class="nt">&lt;subject&gt;</span>Test SMS Message<span class="nt">&lt;/subject&gt;</span>
  <span class="nt">&lt;body&gt;</span>This is the body of my test SMS message<span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;email&gt;&lt;/email&gt;</span>
  <span class="nt">&lt;voice&gt;&lt;/voice&gt;</span>
  <span class="nt">&lt;web&gt;&lt;/web&gt;</span>
<span class="nt">&lt;/ns3:template&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">template</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x"> 
   </span><span class="s">"messageTemplateName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Sample SMS Template"</span><span class="p">,</span><span class="x"> 
   </span><span class="s">"messageTemplateDescription"</span><span class="o">:</span><span class="x"> </span><span class="s">"Template to provide an example on whispir.io"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test SMS Message"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of my test SMS message"</span><span class="p">,</span><span class="x">
   </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{},</span><span class="x">
   </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{},</span><span class="x">
   </span><span class="s">"web"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The sample code above will create a simple SMS only message template within the default workspace.<br/><br/>
The expected response to this call is an <strong>HTTP 201 - Created</strong>.</p>
</blockquote>
</blockquote>

<p>To create a new message template, you can use the <code class="prettyprint">/templates</code> endpoint.</p>

<p>The following fields are required:</p>

<ol>
<li>messageTemplateName - the name of the template to be stored</li>
<li>subject - the first line or identifier of the SMS</li>
<li>body - At least one of the <strong>Body</strong> fields must be populated (SMS, Email, Voice or Web).</li>
<li>email - The email content for the message. If no email is required, an empty object must be presented.</li>
<li>voice - The voice content for the message. If no voice call is required, an empty object must be presented.</li>
<li>web - The web content for the message. If no web content is required, an empty object must be presented.</li>
</ol>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">messageTemplateName:</td>
            <td><strong>String</strong><br/>
                Specifies the name of the message template to be used within message requests.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">messageTemplateDescription:</td>
            <td><strong>String</strong><br/>
                Specifies the description of the message template for others to understand it&rsquo;s purpose.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">responseTemplateId:</td>
            <td><strong>String</strong><br/>
                Specifies the ID of the Response Rule that should be associated with this Message Template.<br/><br/>
                Response Rules are further described later in this documentation.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">subject:</td>
            <td><strong>String</strong><br/>
                Specifies the first line of the SMS message or Voice call, and the subject of the Email message.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">body:</td>
            <td><strong>String</strong><br/>
                Specifies the content of the SMS message.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">email:</td>
            <td><strong>Object</strong><br/>
                Email object described below. Used for sending email messages.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">voice:</td>
            <td><strong>Object</strong><br/>
                Voice object described below. Used for sending voice calls to mobile phones and landlines.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">web:</td>
            <td><strong>Object</strong><br/>
                Web object described below. Used for web publishing and Rich Messages.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">social:</td>
            <td><strong>Object</strong><br/>
                Social object described below. Used for publishing content to social media (Twitter, Facebook, LinkedIn).
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">type:</td>
            <td><strong>String</strong><br/>
                Allows the user to modify the message behaviour for replies and DLRs (delivery receipts) e.g.
                <ul>
                    <li>defaultNoReply - Used to reject any replies to this message.</li>
                    <li>noDlr - Used to specify that DLRs should not be enabled for this message.</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">features:</td>
            <td><strong>Object</strong><br/>
                Allows the user to modify the push notifications properties if these are configured in the company.
                <br/>
                <br/>
                <strong>pushOptions:</strong>
                <ul>
                    <li>notifications - enabled/disabled</li>
                    <li>escalationMins - # mins to await a push notifications response</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<p><strong>Note:</strong> All of the options above are the same as provided in the <code class="prettyprint">/messages</code> endpoint <a href="#communications">here</a></p>

<h2 id="retrieving-templates">Retrieving Templates</h2>

<blockquote>
<p>Retrieving Templates</p>

<blockquote>
<p>The following API Methods allow you to access templates via the API</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/templates?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.template-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 4 of 4<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:messagetemplates&gt;</span>
        <span class="nt">&lt;ns2:template&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/templates/F0547F6F2E4839F8?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;id&gt;</span>F0547F6F2E4839F8<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;messageTemplateDescription&gt;</span>
            <span class="nt">&lt;/messageTemplateDescription&gt;</span>
            <span class="nt">&lt;messageTemplateName&gt;</span>
              Appointment Reminder
            <span class="nt">&lt;/messageTemplateName&gt;</span>
        <span class="nt">&lt;/ns2:template&gt;</span>
        <span class="nt">&lt;ns2:template&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/templates/DDE10AC13FB0E457?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;id&gt;</span>DDE10AC13FB0E457<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;messageTemplateDescription&gt;</span>
            <span class="nt">&lt;/messageTemplateDescription&gt;</span>
            <span class="nt">&lt;messageTemplateName&gt;</span>
              Customer Survey
            <span class="nt">&lt;/messageTemplateName&gt;</span>
        <span class="nt">&lt;/ns2:template&gt;</span>
        <span class="nt">&lt;ns2:template&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/templates/900972D1C916FE84?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;id&gt;</span>900972D1C916FE84<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;messageTemplateDescription&gt;</span>
            <span class="nt">&lt;/messageTemplateDescription&gt;</span>
            <span class="nt">&lt;messageTemplateName&gt;</span>
              Service announcement
            <span class="nt">&lt;/messageTemplateName&gt;</span>
        <span class="nt">&lt;/ns2:template&gt;</span>
        <span class="nt">&lt;ns2:template&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/templates/9CB9BE20B885542D?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;id&gt;</span>9CB9BE20B885542D<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;messageTemplateDescription&gt;</span>
            <span class="nt">&lt;/messageTemplateDescription&gt;</span>
            <span class="nt">&lt;messageTemplateName&gt;</span>
              Shift Opportunity
            <span class="nt">&lt;/messageTemplateName&gt;</span>
        <span class="nt">&lt;/ns2:template&gt;</span>
    <span class="nt">&lt;/ns2:messagetemplates&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">template</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 4 of 4    "</span><span class="p">,</span><span class="x">
  </span><span class="s">"messagetemplates"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"messageTemplateName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Appointment Reminder"</span><span class="p">,</span><span class="x">
    </span><span class="s">"messageTemplateDescription"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"F0547F6F2E4839F8"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/templates/F0547F6F2E4839F8?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"messageTemplateName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Customer Survey"</span><span class="p">,</span><span class="x">
    </span><span class="s">"messageTemplateDescription"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"DDE10AC13FB0E457"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/templates/DDE10AC13FB0E457?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"messageTemplateName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Service announcement"</span><span class="p">,</span><span class="x">
    </span><span class="s">"messageTemplateDescription"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"900972D1C916FE84"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/templates/900972D1C916FE84?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"messageTemplateName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Shift Opportunity"</span><span class="p">,</span><span class="x">
    </span><span class="s">"messageTemplateDescription"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"9CB9BE20B885542D"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/templates/9CB9BE20B885542D?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">}</span><span class="x"> </span><span class="p">],</span><span class="x">
  </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>To retrieve a list of templates from the Whispir.io API you can execute an <strong>HTTP GET</strong> using the <code class="prettyprint">/templates</code> endpoint.</p>

<p>You will need to supply one of the following headers (for retrieving JSON or XML):</p>

<ul>
<li><code class="prettyprint">Accept: application/vnd.whispir.template-v1+xml</code></li>
<li><code class="prettyprint">Accept: application/vnd.whispir.template-v1+json</code></li>
</ul>

<p>An array of Message Templates will be returned to you in the HTTP response body.</p>

<p>Each of these templates will provide the following information:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Response Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">messageTemplateName:</td>
            <td><strong>String</strong><br/>
                Specifies the name of the message template to be used within message requests.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">messageTemplateDescription:</td>
            <td><strong>String</strong><br/>
                Specifies the description of the message template for others to understand it&rsquo;s purpose.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">id:</td>
            <td><strong>String</strong><br/>
                Specifies the ID of the template that can be used for message sending.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">link:</td>
            <td><strong>Array</strong><br/>
                Provides a list of URLs that can be used to manipulate or access the message template.
                <ul>
                  <li>uri - the link to access the message template</li>
                  <li>rel - the descriptor for what the link will do</li>
                  <li>method - the HTTP method to use with this particular link</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<h2 id="updating-templates">Updating Templates</h2>

<blockquote>
<p>Updating Templates</p>

<blockquote>
<p>The following API calls allow users to update Template content using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 PUT https://api.&lt;region&gt;.whispir.com/templates/C37DCBAEFF73FEDA45?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.template-v1+xml
Accept: application/vnd.whispir.template-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;ns3:template</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> 
              <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;messageTemplateName&gt;</span>Sample SMS Template<span class="nt">&lt;/messageTemplateName&gt;</span>
  <span class="nt">&lt;messageTemplateDescription&gt;</span>
    Template to provide an example on whispir.io
  <span class="nt">&lt;/messageTemplateDescription&gt;</span>
  <span class="nt">&lt;subject&gt;</span>Test SMS Message<span class="nt">&lt;/subject&gt;</span>
  <span class="nt">&lt;body&gt;</span>This is the body of my test SMS message<span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;email&gt;</span>
    <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;body&gt;</span>
      This is the content of my plain text email in the template
    <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/email&gt;</span>
  <span class="nt">&lt;voice&gt;</span>
    <span class="c">&lt;!-- Don't put line breaks in this section --&gt;</span>
    <span class="nt">&lt;type&gt;</span>
        ConfCall:,
        ConfAccountNo:,
        ConfPinNo:,
        ConfModPinNo:,
        Pin:
    <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;header&gt;</span>This is the intro of my voice call<span class="nt">&lt;/header&gt;</span>
    <span class="nt">&lt;body&gt;</span>This is the content of my voice call<span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/voice&gt;</span>
  <span class="nt">&lt;web&gt;</span> 
    <span class="nt">&lt;body&gt;</span>This is web body of my test message<span class="nt">&lt;/body&gt;</span> 
    <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span> 
  <span class="nt">&lt;/web&gt;</span> 
  <span class="nt">&lt;social&gt;</span>
    <span class="nt">&lt;social</span> <span class="na">id=</span><span class="s">"social"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;body&gt;</span>Twitter Content.<span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/social&gt;</span>
    <span class="nt">&lt;social</span> <span class="na">id=</span><span class="s">"social_long"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;body&gt;</span>Facebook Content.<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/social&gt;</span>
  <span class="nt">&lt;/social&gt;</span>
  <span class="nt">&lt;type&gt;</span>defaultNoReply<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;features&gt;</span>
    <span class="nt">&lt;pushOptions&gt;</span>
      <span class="nt">&lt;notifications&gt;</span>enabled<span class="nt">&lt;/notifications&gt;</span>
      <span class="nt">&lt;escalationMins&gt;</span>3<span class="nt">&lt;/escalationMins&gt;</span>
    <span class="nt">&lt;/pushOptions&gt;</span>
  <span class="nt">&lt;/features&gt;</span>
<span class="nt">&lt;/ns3:template&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">template</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">template</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x"> 
   </span><span class="s">"messageTemplateName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Sample SMS Template"</span><span class="p">,</span><span class="x"> 
   </span><span class="s">"messageTemplateDescription"</span><span class="o">:</span><span class="x"> </span><span class="s">"Template to provide an example on whispir.io"</span><span class="p">,</span><span class="x">
   </span><span class="s">"responseTemplateId"</span><span class="o">:</span><span class="x"> </span><span class="s">"Template to provide an example on whispir.io"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="o">:</span><span class="x"> </span><span class="s">"Test SMS Message"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of my test SMS message"</span><span class="p">,</span><span class="x">
    </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of my test Email message"</span><span class="p">,</span><span class="x">
        </span><span class="s">"footer"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the footer of my message 
                    (generally where a signature would go)"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"header"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the introduction, 
                    read out prior to any key press"</span><span class="p">,</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of the voice call, 
                  read out after the key press"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ConfCall:,
                  ConfAccountNo:,
                  ConfPinNo:,
                  ConfModPinNo:,
                  Pin:"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"web"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the content of my web publishing 
                 or Rich Push Message"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"social"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"social"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"social"</span><span class="p">,</span><span class="x">
            </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Twitter Content."</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="s">"social"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"social_long"</span><span class="p">,</span><span class="x">
            </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Facebook Content."</span><span class="p">,</span><span class="x">
            </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
        </span><span class="p">}</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"defaultNoReply"</span><span class="p">,</span><span class="x">
    </span><span class="s">"features"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"pushOptions"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"notifications"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"enabled"</span><span class="p">,</span><span class="x">
            </span><span class="s">"escalationMins"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"3"</span><span class="x">
        </span><span class="p">}</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The sample code above will update the message template specified by ID: <strong>C37DCBAEFF73FEDA45</strong> within the default workspace.<br/><br/>
The expected response to this call is an <strong>HTTP 204 - No Content</strong>.</p>
</blockquote>
</blockquote>

<p>To update existing message templates, you can use a PUT request the <code class="prettyprint">/templates</code> endpoint.</p>

<p>The following fields are required:</p>

<ol>
<li>messageTemplateName - the name of the template to be stored</li>
<li>subject - the first line or identifier of the SMS</li>
<li>body - At least one of the <strong>Body</strong> fields must be populated (SMS, Email, Voice or Web).</li>
</ol>

<p><strong>Note:</strong> Currently users cannot update templates with the same name as a template that already exists in Whispir. Users can overcome this by saving the updated template with a new name, then either changing this back in a subsequent save, or retaining the updated name.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">messageTemplateName:</td>
            <td><strong>String</strong><br/>
                Specifies the name of the message template to be used within message requests.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">messageTemplateDescription:</td>
            <td><strong>String</strong><br/>
                Specifies the description of the message template for others to understand it&rsquo;s purpose.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">responseTemplateId:</td>
            <td><strong>String</strong><br/>
                Specifies the ID of the Response Rule that should be associated with this Message Template.<br/><br/>
                Response Rules are further described later in this documentation.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">subject:</td>
            <td><strong>String</strong><br/>
                Specifies the first line of the SMS message or Voice call, and the subject of the Email message.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">body:</td>
            <td><strong>String</strong><br/>
                Specifies the content of the SMS message.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">email:</td>
            <td><strong>Object</strong><br/>
                Email object described below. Used for sending email messages.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">voice:</td>
            <td><strong>Object</strong><br/>
                Voice object described below. Used for sending voice calls to mobile phones and landlines.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">web:</td>
            <td><strong>Object</strong><br/>
                Web object described below. Used for web publishing and Rich Messages.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">social:</td>
            <td><strong>Object</strong><br/>
                Social object described below. Used for publishing content to social media (Twitter, Facebook, LinkedIn).
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">type:</td>
            <td><strong>String</strong><br/>
                Allows the user to modify the message behaviour for replies and DLRs (delivery receipts) e.g.
                <ul>
                    <li>defaultNoReply - Used to reject any replies to this message.</li>
                    <li>noDlr - Used to specify that DLRs should not be enabled for this message.</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">features:</td>
            <td><strong>Object</strong><br/>
                Allows the user to modify the push notifications properties if these are configured in the company.
                <br/>
                <br/>
                <strong>pushOptions:</strong>
                <ul>
                    <li>notifications - enabled/disabled</li>
                    <li>escalationMins - # mins to await a push notifications response</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<p><strong>Note:</strong> All of the options above are the same as provided in the <code class="prettyprint">/messages</code> endpoint <a href="#communications">here</a></p>

<h2 id="deleting-template">Deleting Template</h2>
<pre><code class="highlight plaintext">&gt; Deleting a template

&gt; &gt; Exact URI of the template has to be provided. 

HTTP 1.1 DELETE https://api.&lt;region&gt;.whispir.com/templates/C37DCBAEFF73FEDA45?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight plaintext">&gt; Response

&gt; &gt; 204 No Content
</code></pre>

<p>Deleting a template is done via the <code class="prettyprint">DELETE</code> method. The exact link url of the specific template has to be used as the end point. To get it, one can perform a <code class="prettyprint">GET /templates</code> which returns the list of all templates and their link url. If the template is within a workspace, ensure that the workspace is included in the URI.</p>

<p><strong>Note:</strong> When a template is DELETED, all the associated Scenarios, events, and references of template use in other endpoints will fail. So, ensure that the template is not used anywhere before it is deleted. Whispir <strong>will not</strong> do that check before it deletes the template.</p>

<h2 id="using-templates">Using Templates</h2>

<blockquote>
<p>Using Templates</p>

<blockquote>
<p>The following methods allow you to use the templates that you&rsquo;ve created in your Whispir Messages</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>john.smith@test.com<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;messageTemplateId&gt;</span>BACEB8D46BEF5315<span class="nt">&lt;/messageTemplateId&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x"> 
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"messageTemplateId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"BACEB8D46BEF5315"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>Alternatively, you can enter the Message Template Name in place of the Message Template ID:</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;messageTemplateName&gt;</span>Sample SMS Template<span class="nt">&lt;/messageTemplateName&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x"> 
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"messageTemplateName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Sample SMS Template"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Whispir.io API messages can simply specify the Message Template ID in the messages request, instead of specifying the entire content payload.</p>

<p>The message template can then easily be changed (using either another API request or by logging in to the Whispir Platform) and the part of the application sending the messages does not need to be altered.</p>

<h2 id="overriding-templates">Overriding Templates</h2>

<blockquote>
<p>Overriding Templates</p>

<blockquote>
<p>You can override content in the template by supplying it inline with the message request</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;messageTemplateName&gt;</span>Sample SMS Template<span class="nt">&lt;/messageTemplateName&gt;</span>
    <span class="nt">&lt;subject&gt;</span>This will override the template Subject<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;body&gt;</span>This will override the template SMS Body<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x"> 
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"messageTemplateName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Sample SMS Template"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This will override the template Subject"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This will override the template SMS Body"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Users can easily override the content of the Message Template by supplying the content inline with the request to the <code class="prettyprint">/messages</code> endpoint.</p>

<p>Any information provided in the message request will take precidence over the templated content.</p>

<p>All of the features that are specified on the template (for example, any message aliasing) will still be respected when the message is delivered.</p>

        <h1 id="response-rules">Response Rules</h1>

<blockquote>
<p>API Endpoint</p>

<blockquote>
<ul>
<li>generic</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/responserules/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.responserule-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/responserules/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">responserule</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<ul>
<li>limited to a workspace</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/workspaces/{:id}/responserules/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.responserule-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/workspaces/{:id}/responserules/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">responserule</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">&gt; Resource type

- application/vnd.whispir.responserule-v1+xml
- application/vnd.whispir.responserule-v1+json


&gt; Methods supported

- GET
- POST
- PUT
- DELETE
</code></pre>

<p>Using Response Rules in combination with Message Templates allows users to automatically group responses to messages into different response groups for reporting purposes.</p>

<p>Response Rules are useful when users are sending messages with known responses, e.g. Ratings (1-5), Yes/No, or Accept/Decline.</p>

<p>Once the Response Rule has been defined, it can be associated with a Message Template and any responses to messages sent using the template will be automatically categorised.</p>

<p><strong>Note:</strong> Response Rules are sometimes called Response Templates. These names can be used interchangably.</p>

<h2 id="creating-response-rules">Creating Response Rules</h2>

<blockquote>
<p>Creating Response Rules</p>

<blockquote>
<p>The following API calls allow users to create new Response Rules using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/responserules?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.responserule-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns3:responserule</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>Response Rule 1<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;description&gt;&lt;/description&gt;</span> 
    <span class="nt">&lt;responseTemplatePatterns&gt;</span>
        <span class="nt">&lt;responseTemplatePattern&gt;</span>
            <span class="nt">&lt;name&gt;</span>Yes Rule<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;textPrompt&gt;</span>YES<span class="nt">&lt;/textPrompt&gt;</span>
            <span class="nt">&lt;voicePrompt&gt;</span>1<span class="nt">&lt;/voicePrompt&gt;</span>
            <span class="nt">&lt;spokenVoicePrompt&gt;</span>to select YES<span class="nt">&lt;/spokenVoicePrompt&gt;</span>
            <span class="nt">&lt;pattern&gt;</span>startswith<span class="nt">&lt;/pattern&gt;</span>
            <span class="nt">&lt;colour&gt;</span>#00947d<span class="nt">&lt;/colour&gt;</span>
        <span class="nt">&lt;/responseTemplatePattern&gt;</span>
    <span class="nt">&lt;/responseTemplatePatterns&gt;</span>
<span class="nt">&lt;/ns3:responserule&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">responserule</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Response Rule 1"</span><span class="p">,</span><span class="x">
  </span><span class="s">"description"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
  </span><span class="s">"responseTemplatePatterns"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"responseTemplatePattern"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Yes Rule"</span><span class="p">,</span><span class="x">
      </span><span class="s">"textPrompt"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"YES"</span><span class="p">,</span><span class="x">
      </span><span class="s">"voicePrompt"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1"</span><span class="p">,</span><span class="x">
      </span><span class="s">"spokenVoicePrompt"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"to select YES"</span><span class="p">,</span><span class="x">
      </span><span class="s">"pattern"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"startswith"</span><span class="p">,</span><span class="x">
      </span><span class="s">"colour"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"#00947d"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The sample code above will create a simple Response Rule with a single rule within the default workspace.<br/><br/>
The expected response to this call is an <strong>HTTP 201 - Created</strong>.</p>
</blockquote>
</blockquote>

<p>To create a new Response Rule, you can use the <code class="prettyprint">/responserules</code> endpoint.</p>

<p>The following fields can be utilised within the request:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">name:</td>
            <td><strong>String</strong><br/>
                Specifies the name of the Response Rule.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">description:</td>
            <td><strong>String</strong><br/>
                Specifies the description of the response rule for others to understand it&rsquo;s purpose.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">responseTemplatePatterns:</td>
            <td><strong>Object</strong><br/>
                This object contains the responseTemplatePattern array which contains each of the response rule elements.
            </td>
        </tr>
    </tbody>
</table>

<h3 id="response-template-patterns">Response Template Patterns</h3>

<p>Each Response Rule has a series of <strong>Patterns</strong> that allow the creator to specify what textual content should be matched in the response SMS or Email, and a number that should be entered when IVR (Voice) is being used.</p>

<p>The patterns specify the following information:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Response Template Pattern Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">name:</td>
            <td><strong>String</strong><br/>
                The name of the Response Category.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">pattern:</td>
            <td><strong>String</strong><br/>
                Specifies the mechanism for matching the textPrompt.<br/><br/>
                The following options are available:
                <ul>
                    <li>startsWith</li>
                    <li>contains</li>
                    <li>exactmatch</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">textPrompt:</td>
            <td><strong>String</strong><br/>
                Specifies the textual string that should be matched using the pattern (specified above) within the Email, SMS or Web response. 
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">voicePrompt:</td>
            <td><strong>String</strong><br/>
                The number (from 0-9, * or #) that the recipient of the voice call should enter to select this response category.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">spokenVoicePrompt:</td>
            <td><strong>String</strong><br/>
                The TTS (text-to-speech) that is dynamically read out when describing to the user what this response category is.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">colour:</td>
            <td><strong>String</strong><br/>
                The hexidecimal colour code that is used in the Message Response Report to show this category being used.
            </td>
        </tr>
    </tbody>
</table>

<p>Each Response Rule can specify as many Response Template Patterns as required.</p>

<p>Each of the Patterns specified will also dynamically create buttons within any Rich Message that is associated with the Response Rule.</p>

<p>This provides an out of the box capability to quickly gather feedback from the field using a Rich User interface, and leveraging SMS as the delivery mechanism.</p>

<p>For more information about using <strong>Rich Messages</strong>, click <a href="#rich-messages">here</a>.</p>

<h2 id="using-response-rules">Using Response Rules</h2>

<p>After creating a Response Rule, you must create a new Message Template (or update an existing one) and associate the Response Rule ID.</p>

<p><strong>Note:</strong> The Response Rule ID will be returned in the <code class="prettyprint">Location</code> header after a successful creation.</p>

<p>This association of Response Rule to Message Template is performed using the <code class="prettyprint">responseTemplateId</code> field within the Message Template.</p>

<p>For more information on Creating Message Templates, click <a href="#creating-templates">here</a>.</p>

<h2 id="matched-rule">Matched Rule</h2>

<blockquote>
<p>Matched Rule</p>

<blockquote>
<p>Sending a message using template and callback</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;messageTemplateName&gt;</span>ReplyYesNoTemplate<span class="nt">&lt;/messageTemplateName&gt;</span>
    <span class="nt">&lt;callbackId&gt;</span>myCallbackName<span class="nt">&lt;/callbackId&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x"> 
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"messageTemplateName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ReplyYesNoTemplate"</span><span class="p">,</span><span class="x">
   </span><span class="s">"callbackId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"myCallbackName"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>If a message is sent using a template and associated ResponseRule, it would be helpful to know what response rule condition has matched when the reply is recieved from the end user. Whispir API facilitates this to be know in real time via the /callbacks endpoint.</p>

<p>How to use a callback to get the matched response rule condition?</p>

<ul>
<li>Create a response rule with required conditions</li>
<li>Create a template/use and existing template - with the above responserule id added to it</li>
<li>Create a callback/use an existing callback</li>
<li>Send a message using the messages endpoint specifying the to, template, and callbackId values</li>
</ul>

<p><strong>After the Message is received:</strong></p>

<ul>
<li>The user has replied to the message</li>
<li>Message is received by Whispir</li>
<li>Response Rules are applied to the response</li>
<li>Callback is invoked</li>
<li>Response body contains the response given by the user, the channel, timestamps (refer to callback Documentation) and <em>customParameters</em></li>
</ul>

<blockquote>
<blockquote>
<p>Custom Parameters in Callback specifying the matched rule and category</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="nt">&lt;customParameters&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>matchedCategory<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>Reserved<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>responseRule<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>Reserved Words<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>

    ...

<span class="nt">&lt;/customParameters&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="s">"customParameters"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"matchedCategory"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Reserved"</span><span class="p">,</span><span class="x">
    </span><span class="s">"responseRule"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Reserved Words"</span><span class="p">,</span><span class="x">

    </span><span class="o">...</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p><strong>What is inside the custom Parameters?</strong></p>

<ul>
<li>Custom Parameters gives you details of various processing/processed values associated with the message</li>
<li><p>While many parameters are sent, the ones that are associated with response rules are :</p>

<ul>
<li><strong>responseRule</strong> - the name of responseRule that has matched</li>
<li><strong>matchedCategory</strong> - the category/condition inside the responseRule that has matched</li>
</ul></li>
</ul>

<p>For more details on the callbackParameters, refer to the /callbacks endpoint.</p>

        <h1 id="contacts">Contacts</h1>

<blockquote>
<p>API Endpoint</p>

<blockquote>
<ul>
<li>generic</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/contacts/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.contact-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/contacts/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<ul>
<li>limited to a workspace</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/workspaces/{:id}/contacts/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.contact-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/workspaces/{:id}/contacts/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">&gt; Resource type

- application/vnd.whispir.contact-v1+xml
- application/vnd.whispir.contact-v1+json


&gt; Methods supported

- GET
- POST
- PUT
- DELETE
</code></pre>

<p>Contacts form the core of the Whispir offerings. They make up the base data to which and from all the communications are performed.</p>

<p>The Whispir API provides secure cloud based storage for your contact information.  This can then easily be retrieved by any application or device that requires access, and has permission to do so.</p>

<h2 id="creating-new-contacts">Creating new Contacts</h2>

<blockquote>
<p>Creating new Contacts</p>

<blockquote>
<p>Users can easily create new contacts by using the following request structure</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">POST https://api.&lt;region&gt;.whispir.com/contacts?apikey=[your api key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.contact-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:contact</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;firstName&gt;</span>John<span class="nt">&lt;/firstName&gt;</span>
    <span class="nt">&lt;lastName&gt;</span>Wick<span class="nt">&lt;/lastName&gt;</span>
    <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;timezone&gt;</span>Australia/Melbourne<span class="nt">&lt;/timezone&gt;</span>
    <span class="nt">&lt;workEmailAddress1&gt;</span>jsmith@testcompany.com<span class="nt">&lt;/workEmailAddress1&gt;</span>
    <span class="nt">&lt;workMobilePhone1&gt;</span>61423456789<span class="nt">&lt;/workMobilePhone1&gt;</span>
    <span class="nt">&lt;workCountry&gt;</span>Australia<span class="nt">&lt;/workCountry&gt;</span>
    <span class="nt">&lt;messagingoptions&gt;</span>
        <span class="nt">&lt;messagingoption</span> <span class="na">channel=</span><span class="s">"sms"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;primary&gt;</span>WorkMobilePhone1<span class="nt">&lt;/primary&gt;</span>
            <span class="nt">&lt;secondary&gt;&lt;/secondary&gt;</span>
            <span class="nt">&lt;tertiary&gt;&lt;/tertiary&gt;</span>
        <span class="nt">&lt;/messagingoption&gt;</span>
        <span class="nt">&lt;messagingoption</span> <span class="na">channel=</span><span class="s">"email"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;primary&gt;</span>WorkEmailAddress1<span class="nt">&lt;/primary&gt;</span>
            <span class="nt">&lt;secondary&gt;&lt;/secondary&gt;</span>
            <span class="nt">&lt;tertiary&gt;&lt;/tertiary&gt;</span>
        <span class="nt">&lt;/messagingoption&gt;</span>
        <span class="nt">&lt;messagingoption</span> <span class="na">channel=</span><span class="s">"voice"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;primary&gt;</span>WorkMobilePhone1<span class="nt">&lt;/primary&gt;</span>
            <span class="nt">&lt;secondary&gt;&lt;/secondary&gt;</span>
            <span class="nt">&lt;tertiary&gt;&lt;/tertiary&gt;</span>
        <span class="nt">&lt;/messagingoption&gt;</span>
    <span class="nt">&lt;/messagingoptions&gt;</span>
<span class="nt">&lt;/ns2:contact&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"John"</span><span class="p">,</span><span class="x">
    </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Wick"</span><span class="p">,</span><span class="x">
    </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
    </span><span class="s">"timezone"</span><span class="o">:</span><span class="x"> </span><span class="s">"Australia/Melbourne"</span><span class="p">,</span><span class="x">
    </span><span class="s">"workEmailAddress1"</span><span class="o">:</span><span class="x"> </span><span class="s">"jsmith@testcompany.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"workMobilePhone1"</span><span class="o">:</span><span class="x"> </span><span class="s">"61423456789"</span><span class="p">,</span><span class="x">
    </span><span class="s">"workCountry"</span><span class="o">:</span><span class="x"> </span><span class="s">"Australia"</span><span class="p">,</span><span class="x">
    </span><span class="s">"messagingoptions"</span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
          </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"sms"</span><span class="p">,</span><span class="x">
          </span><span class="s">"enabled"</span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
          </span><span class="s">"primary"</span><span class="o">:</span><span class="x"> </span><span class="s">"WorkMobilePhone1"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
          </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"email"</span><span class="p">,</span><span class="x">
          </span><span class="s">"enabled"</span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
          </span><span class="s">"primary"</span><span class="o">:</span><span class="x"> </span><span class="s">"WorkEmailAddress1"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
          </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"voice"</span><span class="p">,</span><span class="x">
          </span><span class="s">"enabled"</span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
          </span><span class="s">"primary"</span><span class="o">:</span><span class="x"> </span><span class="s">"WorkMobilePhone1"</span><span class="x">
    </span><span class="p">}]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The successful response will be a 201 with the details of the contact created and its associated unique <code class="prettyprint">mri</code>.</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:contact</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;type&gt;</span>COMPANY<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;firstName&gt;</span>John<span class="nt">&lt;/firstName&gt;</span>
    <span class="nt">&lt;lastName&gt;</span>Wick<span class="nt">&lt;/lastName&gt;</span>
    <span class="nt">&lt;locations&gt;</span>
        <span class="nt">&lt;location&gt;</span>
            <span class="nt">&lt;latitude&gt;</span>0.0<span class="nt">&lt;/latitude&gt;</span>
            <span class="nt">&lt;longitude&gt;</span>0.0<span class="nt">&lt;/longitude&gt;</span>
            <span class="nt">&lt;type&gt;</span>CurrentLocation<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;/location&gt;</span>
    <span class="nt">&lt;/locations&gt;</span>
    <span class="nt">&lt;lastModifiedTime&gt;</span>2015-06-04T17:37:01+10:00<span class="nt">&lt;/lastModifiedTime&gt;</span>
    <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;timezone&gt;</span>+10<span class="nt">&lt;/timezone&gt;</span>
    <span class="nt">&lt;workEmailAddress1&gt;</span>jsmith@testcompany.com<span class="nt">&lt;/workEmailAddress1&gt;</span>
    <span class="nt">&lt;workMobilePhone1&gt;</span>61423456789<span class="nt">&lt;/workMobilePhone1&gt;</span>
    <span class="nt">&lt;workCountry&gt;</span>Australia<span class="nt">&lt;/workCountry&gt;</span>
    <span class="nt">&lt;mri&gt;</span>John_Wick.1143139@Contact.whispir.sg<span class="nt">&lt;/mri&gt;</span>
    <span class="nt">&lt;messagingoptions&gt;</span>
        <span class="nt">&lt;messagingoption</span> <span class="na">channel=</span><span class="s">"sms"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;primary&gt;</span>WorkMobilePhone1<span class="nt">&lt;/primary&gt;</span>
            <span class="nt">&lt;secondary&gt;&lt;/secondary&gt;</span>
            <span class="nt">&lt;tertiary&gt;&lt;/tertiary&gt;</span>
        <span class="nt">&lt;/messagingoption&gt;</span>
        <span class="nt">&lt;messagingoption</span> <span class="na">channel=</span><span class="s">"email"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;primary&gt;</span>WorkEmailAddress1<span class="nt">&lt;/primary&gt;</span>
            <span class="nt">&lt;secondary&gt;&lt;/secondary&gt;</span>
            <span class="nt">&lt;tertiary&gt;&lt;/tertiary&gt;</span>
        <span class="nt">&lt;/messagingoption&gt;</span>
        <span class="nt">&lt;messagingoption</span> <span class="na">channel=</span><span class="s">"voice"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;primary&gt;</span>WorkMobilePhone1<span class="nt">&lt;/primary&gt;</span>
            <span class="nt">&lt;secondary&gt;&lt;/secondary&gt;</span>
            <span class="nt">&lt;tertiary&gt;&lt;/tertiary&gt;</span>
        <span class="nt">&lt;/messagingoption&gt;</span>
    <span class="nt">&lt;/messagingoptions&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/contacts/CB4558257DD86D09?apikey=[your api key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/contacts/CB4558257DD86D09?apikey=[your api key]"</span> <span class="na">rel=</span><span class="s">"updateContact"</span> <span class="na">method=</span><span class="s">"PUT"</span> <span class="na">type=</span><span class="s">"application/vnd.whispir.contact-v1+json,application/vnd.whispir.contact-v1+xml"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/contacts/CB4558257DD86D09?apikey=[your api key]"</span> <span class="na">rel=</span><span class="s">"deleteContact"</span> <span class="na">method=</span><span class="s">"DELETE"</span><span class="nt">/&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
  </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"CB4558257DD86D09"</span><span class="p">,</span><span class="x">
  </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"COMPANY"</span><span class="p">,</span><span class="x">
  </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"John"</span><span class="p">,</span><span class="x">
  </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Wick"</span><span class="p">,</span><span class="x">
  </span><span class="s">"locations"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"latitude"</span><span class="o">:</span><span class="x"> </span><span class="s">"0.0"</span><span class="p">,</span><span class="x">
      </span><span class="s">"longitude"</span><span class="o">:</span><span class="x"> </span><span class="s">"0.0"</span><span class="p">,</span><span class="x">
      </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"CurrentLocation"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">],</span><span class="x">
  </span><span class="s">"lastModifiedTime"</span><span class="o">:</span><span class="x"> </span><span class="s">"2015-06-04T17:37:01+10:00"</span><span class="p">,</span><span class="x">
  </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
  </span><span class="s">"timezone"</span><span class="o">:</span><span class="x"> </span><span class="s">"+10"</span><span class="p">,</span><span class="x">
  </span><span class="s">"workEmailAddress1"</span><span class="o">:</span><span class="x"> </span><span class="s">"jsmith@testcompany.com"</span><span class="p">,</span><span class="x">
  </span><span class="s">"workMobilePhone1"</span><span class="o">:</span><span class="x"> </span><span class="s">"61423456789"</span><span class="p">,</span><span class="x">
  </span><span class="s">"workCountry"</span><span class="o">:</span><span class="x"> </span><span class="s">"Australia"</span><span class="p">,</span><span class="x">
  </span><span class="s">"mri"</span><span class="o">:</span><span class="x"> </span><span class="s">"John_Wick.1143139@Contact.whispir.sg"</span><span class="p">,</span><span class="x">
  </span><span class="s">"messagingoptions"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"sms"</span><span class="p">,</span><span class="x">
      </span><span class="s">"enabled"</span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
      </span><span class="s">"primary"</span><span class="o">:</span><span class="x"> </span><span class="s">"WorkMobilePhone1"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"email"</span><span class="p">,</span><span class="x">
      </span><span class="s">"enabled"</span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
      </span><span class="s">"primary"</span><span class="o">:</span><span class="x"> </span><span class="s">"WorkEmailAddress1"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"voice"</span><span class="p">,</span><span class="x">
      </span><span class="s">"enabled"</span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
      </span><span class="s">"primary"</span><span class="o">:</span><span class="x"> </span><span class="s">"WorkMobilePhone1"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">],</span><span class="x">
  </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/contacts/CB4558257DD86D09?apikey=[your api key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/contacts/CB4558257DD86D09?apikey=[your api key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"updateContact"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"PUT"</span><span class="p">,</span><span class="x">
      </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"application/vnd.whispir.contact-v1+json,application/vnd.whispir.contact-v1+xml"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/contacts/CB4558257DD86D09?apikey=[your api key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"deleteContact"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"DELETE"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>To create a new contact, you can use the <code class="prettyprint">/contacts</code> endpoint. The method is POST. Ensure that the following mandatory fields are provided for.</p>

<p>The following fields are required:</p>

<ul>
<li>firstName</li>
<li>lastName</li>
<li>workEmailAddress1</li>
<li>workMobilePhone1</li>
<li>workCountry</li>
<li>timezone</li>
</ul>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">firstName:</td>
            <td><strong>String</strong><br/>
                Specifies the firstName of the contact
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">lastName:</td>
            <td><strong>String</strong><br/>
                Specifies the lastName of the contact
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">title:</td>
            <td><strong>String</strong><br/>
                The title of the name
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">status:</td>
            <td><strong>String</strong><br/>
                Specifies the validity status of the contact. The status can be one of - 
                <ul>
                    <li>Active (A)</li>
                    <li>Disabled (D)</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">companyName:</td>
            <td><strong>String</strong><br/>
                Specifies the company name
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">jobTitle:</td>
            <td><strong>String</strong><br/>
                Specifies the job title at the company
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">division:</td>
            <td><strong>String</strong><br/>
                Specifies the Division in the company to which this contact is associated with
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">businessUnit:</td>
            <td><strong>String</strong><br/>
                Specifies the Business Unit in the company to which this contact is associated with
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">department:</td>
            <td><strong>String</strong><br/>
                Specifies the Department in the company to which this contact is associated with
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Teams and Roles:</td>
            <td><strong>String</strong><br/>
                Specifies the primary and Secondary values for each respective variable
                <ul>
                    <li>teamName1, teamName2</li>
                    <li>role1, role2</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Work Place Address:</td>
            <td><strong>String</strong><br/>
                Specifies the primary and Secondary values for each respective type. Of all these the <b>workEmailAddress1</b> is the mandatory field.
                <ul>
                    <li>workEmailAddress1, workEmailAddress2</li>
                    <li>workAddress1, workAddress2</li>
                    <li>workSuburb, workState</li>
                    <li>workPostCode, workCountry</li>
                    <li>workPostalAddress1, workPostalAddress2</li>
                    <li>workPostalSuburb, workPostalState</li>
                    <li>workPostalPostCode, workPostalCountry</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Work Place Phones:</td>
            <td><strong>Number</strong><br/>
                Specifies the primary and Secondary values for each respective type. Of all these the <b>workMobilePhone1</b> is the mandatory field.
                <ul>
                    <li>workMobilePhone1, workMobilePhone2</li>
                    <li>workPhoneAreaCode1, workPhone1</li>
                    <li>workPhoneAreaCode2, workPhone2</li>
                    <li>workFaxAreaCode1, workFax1</li>
                    <li>workSetellitePhone, WorkOtherPhone</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">timezone:</td>
            <td><strong>String</strong><br/>
                Specifies the timezone in which the contact lives in. Values in relation to GMT.<br/><br/>
                Supported values are:
                <ul>
                    <li>Offset from GMT in the format `+/-NN` e.g. `+10`</li>
                    <li>Worldwide Timezone Format in the format `Country/City` e.g. `Australia/Melbourne`</li>
                </ul> 
                For a list of available worldwide timezones, click <a href="http://developer.whispir.com/files/Whispir-Timezones-v1.csv" title="Timezone IDs" target="_blank">here</a>.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Personal Address:</td>
            <td><strong>String</strong><br/>
                Specifies the primary and Secondary values for each respective type
                <ul>
                    <li>personalEmailAddress1, personalEmailAddress2</li>
                    <li>personalAddress1, personalAddress2</li>
                    <li>personalSuburb, personalState</li>
                    <li>personalCountry, personalPostCode</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Personal Phones:</td>
            <td><strong>Number</strong><br/>
                Specifies the primary and Secondary values for each respective type
                <ul>
                    <li>personalPhoneAreaCode1, personalPhone1</li>
                    <li>personalPhoneAreaCode2, personalPhone2</li>
                    <li>personalFaxAreaCode1, personalFax1</li>
                    <li>otherPhoneAreaCode1, otherPhone1</li>
                    <li>otherMobile</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Alias Fields:</td>
            <td><strong>String</strong><br/>
                The other (alias) name and title fields
                <ul>
                    <li>otherFirstName, otherLastName, otherTitle</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Messaging Options:</td>
            <td><strong>Object</strong><br/>
                Read Format of Messaging Options below.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Other Fields :</td>
            <td><strong>String</strong><br/>
                Whispir allows external developers to build a &lsquo;Self-Subscription&rsquo; portal to allow their own contacts to self-register for internal systems. This is only applicable for customers using Whispir&rsquo;s &ldquo;Contact Portal&rdquo; Product. To support this feature, the following fields are provided.<br>
                <ul>
                    <li>username - must be unique within the company (users and active contacts)</li>
                    <li>password - mandatory only in conjunction with the username</li>
                    <li>secretQuestion - mandatory (used for password reset)</li>
                    <li>secretAnswer - mandatory (used for password reset)</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<h3 id="format-of-messaging-options">Format of Messaging Options</h3>
<pre><code class="highlight xml">    <span class="nt">&lt;messagingoptions&gt;</span>
        <span class="nt">&lt;messagingoption</span> <span class="na">channel=</span><span class="s">"sms"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;primary&gt;</span>WorkMobilePhone1<span class="nt">&lt;/primary&gt;</span>
            <span class="nt">&lt;secondary&gt;&lt;/secondary&gt;</span>
            <span class="nt">&lt;tertiary&gt;&lt;/tertiary&gt;</span>
        <span class="nt">&lt;/messagingoption&gt;</span>
        <span class="nt">&lt;messagingoption</span> <span class="na">channel=</span><span class="s">"email"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;primary&gt;</span>WorkEmailAddress1<span class="nt">&lt;/primary&gt;</span>
            <span class="nt">&lt;secondary&gt;&lt;/secondary&gt;</span>
            <span class="nt">&lt;tertiary&gt;&lt;/tertiary&gt;</span>
        <span class="nt">&lt;/messagingoption&gt;</span>
        <span class="nt">&lt;messagingoption</span> <span class="na">channel=</span><span class="s">"voice"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;primary&gt;</span>WorkMobilePhone1<span class="nt">&lt;/primary&gt;</span>
            <span class="nt">&lt;secondary&gt;&lt;/secondary&gt;</span>
            <span class="nt">&lt;tertiary&gt;&lt;/tertiary&gt;</span>
        <span class="nt">&lt;/messagingoption&gt;</span>
    <span class="nt">&lt;/messagingoptions&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="s">"messagingoptions"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"sms"</span><span class="p">,</span><span class="x">
      </span><span class="s">"enabled"</span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
      </span><span class="s">"primary"</span><span class="o">:</span><span class="x"> </span><span class="s">"WorkMobilePhone1"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"email"</span><span class="p">,</span><span class="x">
      </span><span class="s">"enabled"</span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
      </span><span class="s">"primary"</span><span class="o">:</span><span class="x"> </span><span class="s">"WorkEmailAddress1"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"voice"</span><span class="p">,</span><span class="x">
      </span><span class="s">"enabled"</span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
      </span><span class="s">"primary"</span><span class="o">:</span><span class="x"> </span><span class="s">"WorkMobilePhone1"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">]</span><span class="x">
</span></code></pre>

<p>Whispir allows to define the different channels that needs to be enabled/used for communication. Using Messaging options, one can define the preferred/allowed channels and the respective primary, secondary, and tertiary contact numbers, emails to be used. These values again are derived from the above specified various personal, work attributes.</p>

<p>Available messaging options -</p>

<ul>
<li>sms</li>
<li>email</li>
<li>voice</li>
</ul>

<p>Each messaging options allows to specify the following 3 configuration settings</p>

<dl>
    <dt>enabled</dt>
    <dd>- true</dd>
    <dd>- false</dd>
    <dt>primary</dt>
    <dd>workMobilePhone1 (Can be any of the valid attribute which has a value in it)</dd>
    <dt>secondary</dt>
    <dd><i>optional</i> - workMobilePhone2</dd>
    <dt>tertiary</dt>
    <dd><i>optional</i> - personalMobilePhone1</dd>
</dl>

<h2 id="retrieving-contacts">Retrieving Contacts</h2>

<blockquote>
<p>Retrieving a list of Contacts</p>

<blockquote>
<p>Contacts can easily be retrieved from the Whispir API using the following endpoints:</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/contacts?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.contact-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 1 of 1<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:contacts&gt;</span>
        <span class="nt">&lt;ns2:contact&gt;</span>
            <span class="nt">&lt;id&gt;</span>AF48A9EC3F02E43C<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;firstName&gt;</span>Fred<span class="nt">&lt;/firstName&gt;</span>
            <span class="nt">&lt;lastName&gt;</span>Smith<span class="nt">&lt;/lastName&gt;</span>
            <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
            <span class="nt">&lt;messagingoptions/&gt;</span> &gt; 
            <span class="nt">&lt;ns2:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
                      <span class="na">rel=</span><span class="s">"self"</span> 
                      <span class="na">uri=</span><span class="s">"http://api.&lt;region&gt;.whispir.com/contacts/AF48A9EC3F02E43C?apikey=&lt;your_api_key&gt;"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:contact&gt;</span>
    <span class="nt">&lt;/ns2:contacts&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 1 of 1"</span><span class="p">,</span><span class="x">
  </span><span class="s">"contacts"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"AF48A9EC3F02E43C"</span><span class="p">,</span><span class="x">
      </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Fred"</span><span class="p">,</span><span class="x">
      </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Smith"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
      </span><span class="s">"messagingoptions"</span><span class="o">:</span><span class="x"> </span><span class="p">[],</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
        </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
        </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"http://api.&lt;region&gt;.whispir.com/contacts/AF48A9EC3F02E43C?apikey=&lt;your_api_key&gt;"</span><span class="x">
      </span><span class="p">}</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Contacts can be retrieved quite easily with a GET request to the <code class="prettyprint">/contacts</code>. A simple /contacts will result in all contacts being retrieved with all of their information. No filters are applied.</p>

<p>Once the request is placed, the response will be a list of url&rsquo;s to each of the contacts that the API user has access to/or has requested for via the search criteria.  </p>

<p><strong>Note:</strong> The sample request here shows contacts from the default workspace. If you need to retrieve contacts from a specific workspace, please ensure that the workspace information is passed in the URL.</p>

<dl>
    <dt>URI for default workspace</dt>
    <dd>- https://api.<region>.whispir.com/contacts?apikey=<your_api_key></dd>
</dl>

<dl>
    <dt>URI for a specific workspace with id BC348DC83DF1AB34</dt>
    <dd>- https://api.<region>.whispir.com/workspaces/BC348DC83DF1AB34/contacts?apikey=<your_api_key></dd>
</dl>

<h3 id="get-a-specific-contact">Get a specific contact</h3>

<blockquote>
<p>Retrieving a specific Contact</p>

<blockquote>
<p>Users can retrieve a specific contact by supplying the Contact ID in the URL.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/contacts/AF48A9EC3F02E43C?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.contact-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:contact</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;id&gt;</span>AF48A9EC3F02E43C<span class="nt">&lt;/id&gt;</span>
   <span class="nt">&lt;firstName&gt;</span>Fred<span class="nt">&lt;/firstName&gt;</span>
   <span class="nt">&lt;lastName&gt;</span>Smith<span class="nt">&lt;/lastName&gt;</span>
   <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
   <span class="nt">&lt;messagingoptions/&gt;</span> &gt; 
   <span class="nt">&lt;ns2:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
             <span class="na">rel=</span><span class="s">"self"</span> 
             <span class="na">uri=</span><span class="s">"http://api.&lt;region&gt;.whispir.com/contacts/AF48A9EC3F02E43C?apikey=&lt;your_api_key&gt;"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/ns2:contact&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"AF48A9EC3F02E43C"</span><span class="p">,</span><span class="x">
   </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Fred"</span><span class="p">,</span><span class="x">
   </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Smith"</span><span class="p">,</span><span class="x">
   </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
   </span><span class="s">"messagingoptions"</span><span class="o">:</span><span class="x"> </span><span class="p">[],</span><span class="x">
   </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
     </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
     </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
     </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"http://api.&lt;region&gt;.whispir.com/contacts/AF48A9EC3F02E43C?apikey=&lt;your_api_key&gt;"</span><span class="x">
   </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>To get details of a specific contact, the URI must be passed with the ID of the contact. So, the URI shall be:</p>

<p><code class="prettyprint">https://api.&lt;region&gt;.whispir.com/contacts/AF48A9EC3F02E43C</code> </p>

<p>Where <code class="prettyprint">AF48A9EC3F02E43C</code> is the contact id.</p>

<h3 id="showing-custom-fields">Showing Custom Fields</h3>

<blockquote>
<p>Showing Custom Fields on Contacts</p>

<blockquote>
<p>Within Whispir, contacts can have Custom Fields present to store data that is not supported on the default contact profile.  Users can show this custom data for contacts by adding the <code class="prettyprint">customFields=true</code> query parameter.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/contacts?apikey=&lt;your_api_key&gt;&amp;customFields=true
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.contact-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<p>Whispir supports extension of the default Contact Profile through the use of Custom Fields. Custom fields can support other fields that may be required to be stored on your Contacts, such as Staff ID, Internal Billing Codes, or One Up Manager.</p>

<p>These custom fields can be configured on any account through a Change Request to Whispir.</p>

<p>In order to reveal these custom fields on the contact profile, you can use the <code class="prettyprint">customFields=true</code> flag within your API request.</p>

<p><code class="prettyprint">/contacts/AB38CB3EFD38AFDB?customFields=true</code></p>

<h2 id="searching-for-contacts">Searching for Contacts</h2>

<blockquote>
<p>Searching for Contacts</p>

<blockquote>
<p>Users can easily use further query parameters to search for specific contacts within Whispir.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/contacts?apikey=&lt;your_api_key&gt;&amp;firstName=Sam&amp;sortOrder=desc&amp;sortFields=workEmailAddressPrimary
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.contact-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<p>Contacts can be searched for in a given workspace by passing in valid search criteria. The search criteria usually can be any of the contact elements (field names) and will be sent in as part of the URI as query parameters.</p>

<p>This searching mechanism can be useful to see if any contacts exist in the system with a specific email address, phone number, or job role and so on. Simply to state, the API can help you search based on any attribute associated with the contact.</p>

<p>The key parameters that are required on the URL to facilitate this search are as follows:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">URI Request Elements as Query Params</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">fieldname:</td>
            <td><strong>String</strong><br/>
                Specifies the field name of the contact object. The field name could be any thing as long as it is a valid contact object.
                <br><br>
                <b>Ex:</b><br>
                http://api.<region>.whispir.com/contacts?apikey=<your_api_key><b>&firstName=Sam</b>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">sortOrder:</td>
            <td><strong>String</strong><br/>
                The order in which you require the results to be returned. Either `asc` or `desc`.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">sortFields:</td>
            <td><strong>String</strong><br/>
                The fields that you require the ordering to be performed on. Multiple fields can be provided, separated by a comma.
                <br><br>
                <b>Ex:</b><br>
                http://api.<region>.whispir.com/contacts?apikey=<your_api_key>&firstName=Sam<b>&sortFields=lastName,jobTitle</b>
            </td>
        </tr>
    </tbody>
</table>

<p>The search can also be done inside a specific workspace if needed, by adding the workspace information in the URI.</p>

<p><strong>Note:</strong> There is no global search feature available where one can search on all the workspaces present in the system (under allowed user permission). So, When no workspace is provided, the search is performed on the default workspace of the user.</p>

<h3 id="searching-for-contacts-with-custom-fields">Searching for contacts with Custom Fields</h3>

<blockquote>
<p>Searching for Contacts using Custom Fields</p>

<blockquote>
<p>Within Whispir, contacts can have Custom Fields present to store data that is not supported on the default contact profile.  Users can search for contacts using this data using the API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/contacts?apikey=&lt;your_api_key&gt;&amp;custom_staffID=123456
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.contact-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<p>As Whispir supports extension of the default Contact Profile through the use of Custom Fields. There may be cases where users want to search for Contacts that contain these specific fields. As such, the Whispir API supports searching for contacts using these custom fields.</p>

<p>Any custom field can be searched by adding the <code class="prettyprint">custom_</code> prepended to the name.</p>

<p>For example, if the field name is <strong>StaffId</strong>, then the URL would search for:</p>

<p><code class="prettyprint">/contacts?custom_StaffId=12345</code></p>

<h2 id="updating-contacts">Updating Contacts</h2>

<blockquote>
<p>Updating Contacts</p>

<blockquote>
<p>The following endpoints allow users to update contacts using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 PUT https://api.&lt;region&gt;.whispir.com/contacts/CB4558257DD86D09?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.contact-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:contact</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;firstName&gt;</span>John<span class="nt">&lt;/firstName&gt;</span>
    <span class="nt">&lt;lastName&gt;</span>Wick<span class="nt">&lt;/lastName&gt;</span>
    <span class="nt">&lt;timeZone&gt;</span>+8<span class="nt">&lt;/timezone&gt;</span>
    <span class="nt">&lt;jobTitle&gt;&lt;/jobTitle&gt;</span>

    ... remaining of the contact object
<span class="nt">&lt;/ns2:contact&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"John"</span><span class="p">,</span><span class="x">
    </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Wick"</span><span class="p">,</span><span class="x">
    </span><span class="s">"timeZone"</span><span class="o">:</span><span class="x"> </span><span class="s">"+8"</span><span class="p">,</span><span class="x">
    </span><span class="s">"jobTitle"</span><span class="o">:</span><span class="x"> </span><span class="s">"Whispir API Specialist"</span><span class="p">,</span><span class="x">

    </span><span class="o">...</span><span class="x"> </span><span class="n">remaining</span><span class="x"> </span><span class="n">of</span><span class="x"> </span><span class="n">the</span><span class="x"> </span><span class="n">contact</span><span class="x"> </span><span class="n">object</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The response to the PUT request upon success is a <code class="prettyprint">204 No Content</code> with no content being provided.</p>
</blockquote>
</blockquote>

<p>Updating a contact can be performed using a PUT request to the <code class="prettyprint">/contacts/{id}</code> endpoint. So, to perform this, one must be knowing the exact &ldquo;link&rdquo; associated with the contact.</p>

<p>The application must provide all the fields during the update request, even if they are not being updated. </p>

<p><strong>Any missing fields will be automatically removed from the existing record.</strong></p>

<p>The Content-Type can be -</p>

<ul>
<li>application/vnd.whispir.contact-v1+xml <strong>or</strong> </li>
<li>application/vnd.whispir.contact-v1+json</li>
</ul>

<p><strong>Note:</strong> You cannot selectively update the contact fields needed as this is a PUT request. </p>

<p>So the standard process for updating a contact record is -</p>

<ol>
<li>GET /contact/{id of contact}</li>
<li>Update the contact field in the object to the required value</li>
<li>PUT /contact/{id of contact} the new object</li>
</ol>

<p>The response to the PUT request upon success is usually a <code class="prettyprint">204</code> with no content being provided.</p>

<h2 id="deleting-a-contact">Deleting a contact</h2>

<blockquote>
<p>Deleting a contact</p>

<blockquote>
<p>The following statement allows users to delete contacts using the Whispir API.  Please note, this contact will only be deleted from the current workspace.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 DELETE https://api.&lt;region&gt;.whispir.com/contacts/124F6B2D46A5A268?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>

<p>Deleting a contact can be performed using a DELETE request to the /contacts/{id} endpoint. So, to perform this, one must be knowing the exact &ldquo;link&rdquo; associated with the contact.</p>

<p>After performing this request, the response does not contain any information other than the headers as it is not necessary.</p>

<p>The user has requested to delete a contact, and when the response of <code class="prettyprint">204 No Content</code> is returned, the contact is successfully deleted.</p>

<p>You can also delete a contact from all mapped workspace in a single api call. Please refer to the <em>Advanced Options &gt; Deleting a contact from all workspaces</em> topic below.</p>

<h2 id="advanced-options">Advanced Options</h2>

<p>Whispir API provides some advanced options to perform search and data related queries on the contact information. These options can be performed by adding relevant query parameters to the URL.</p>

<h3 id="deleting-a-contact-from-all-workspaces">Deleting a contact from all workspaces</h3>

<blockquote>
<p>Deleting a contact from all workspaces</p>

<blockquote>
<p>The following statement allows users to delete a given contact from all mapped/copied workspaces using the API. Please note, this process is asynchronous and cannot be terminated once triggered.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 DELETE https://api.&lt;region&gt;.whispir.com/workspaces/A51D76194DDC09CC/contacts/124F6B2D46A5A268?apikey=&lt;your_api_key&gt;&amp;action=deleteAll 
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>

<p>Whispir API allows to delete a contact from one workspace only by default at a time. However, due to certain business scenarios, there could be a need to delete all the references of a given contact from all workspaces in the company. Usually such references are made when there is a contact mapping rule (either automated, or via contact api) is in place. </p>

<p>To accomodate such a case, and also avoid calling DELETE /contacts/{id} repeatedly on all workspaces, Whispir API allows a &ldquo;Delete All&rdquo; functionality for contacts.</p>

<p>The API call involves passing a <em>action=deleteAll</em> parameter in the url query params. Once this action is triggered, all the contact references in all the workspaces for a given contact{id} are deleted, asynchronously. There is no way to stop the process once it is triggered. So, use it wisely and only when you are sure of a need to delete the contact in all workspaces. <em>You have been warned.</em></p>

<p>The following are the types of contact that can be deleted:</p>

<ul>
<li>Mapped contacts</li>
<li>Copied contacts</li>
<li>Mapped contacts by contact mapping rules</li>
<li>Mapped contacts via SFTP and contact mapping rules</li>
<li>Mapped contacts of a customized company Account</li>
</ul>

<h3 id="searching-with-multiple-criteria">Searching with multiple criteria</h3>

<blockquote>
<p>Searching with multiple search criteria</p>

<blockquote>
<p>The following query parameters allow users to search with more than one piece of search criteria on the contact profile.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/contacts?apikey=&lt;your_api_key&gt;&amp;firstName=Sam&amp;lastname=gamjee
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>

<p>The API allows to search for a contact based on any attribute/ data element associated with the contact. This is not limited to just one attribute, but multiple attributes can be searched at the same time.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">URI Request Elements as Query Params</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">fieldname:</td>
            <td><strong>String</strong><br/>
                Specifies the field name of the contact object. The field name could be any thing as long as it is a valid contact object.
                <br><br>
                <b>Ex:</b><br>
                http://api.<region>.whispir.com/contacts?apikey=<your_api_key><b>&firstName=Sam&lastName=gamjee</b>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">sortOrder:</td>
            <td><strong>String</strong><br/>
                The order in which you require the results to be returned. Either `asc` or `desc`.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">sortFields:</td>
            <td><strong>String</strong><br/>
                The fields that you require the ordering to be performed on. Multiple fields can be provided, separated by a comma.
                <br><br>
                <b>Ex:</b><br>
                http://api.<region>.whispir.com/contacts?apikey=<your_api_key>&firstName=Sam<b>&sortFields=lastName,jobTitle</b>
            </td>
        </tr>
    </tbody>
</table>

<h3 id="choosing-the-data-elements">Choosing the data elements</h3>

<blockquote>
<p>Choosing specific data elements to return</p>

<blockquote>
<p>The following query parameters allow users to return data fields from the contact profile that are specifically what they are looking to retrieve.</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">HTTP 1.1 GET https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/contacts?apikey=<span class="nt">&lt;your_api_key&gt;</span><span class="err">&amp;</span>fields=workEmailAddress1,workMobilePhone1<span class="err">&amp;</span>firstname=Sam
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
Accept: application/vnd.whispir.contact-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 1 of 1<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:contacts&gt;</span>
        <span class="nt">&lt;ns2:contact&gt;</span>
            <span class="nt">&lt;id&gt;</span>DC09CC30243A51D5<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;workEmailAddress1&gt;</span>sam@gamjee.com<span class="nt">&lt;/workEmailAddress1&gt;</span>
            <span class="nt">&lt;workMobilePhone1&gt;</span>61423456789<span class="nt">&lt;/workMobilePhone1&gt;</span>
            <span class="nt">&lt;messagingoptions/&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/contacts/DC09CC30243A51D5?apikey=&lt;your_key_api&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:contact&gt;</span>
    <span class="nt">&lt;ns2:contacts&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">HTTP</span><span class="x"> </span><span class="m">1.1</span><span class="x"> </span><span class="n">GET</span><span class="x"> </span><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/contacts?apikey=&lt;your_api_key&gt;&amp;fields=workEmailAddress1,workMobilePhone1&amp;firstname=Sam</span><span class="x">
</span><span class="n">Authorization</span><span class="o">:</span><span class="x"> </span><span class="n">Basic</span><span class="x"> </span><span class="n">am9obi5zbWl0aDpteXBhc3N3b3Jk</span><span class="x">
</span><span class="n">x</span><span class="o">-</span><span class="n">api</span><span class="o">-</span><span class="n">key</span><span class="o">:</span><span class="x"> </span><span class="n">your_api_key</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"contacts"</span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
      </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"DC09CC30243A51D5"</span><span class="p">,</span><span class="x">
        </span><span class="s">"workEmailAddress1"</span><span class="o">:</span><span class="s">"sam@gamjee.com"</span><span class="p">,</span><span class="x">
        </span><span class="s">"workMobilePhone1"</span><span class="o">:</span><span class="s">"61423456789"</span><span class="x">
        </span><span class="s">"messagingoptions"</span><span class="o">:</span><span class="x"> </span><span class="p">[],</span><span class="x">
        </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/contacts/DC09CC30243A51D5?apikey=&lt;your_key_api&gt;"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}]</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span></code></pre>

<p>When requesting the contact information, a simple GET request on the /contact API gives you the basic details of the contact.</p>

<p>To get all the details or fields other than the ones given by default, you have to follow the <code class="prettyprint">link</code> and do another GET request. This can be easily skipped, by asking the API to give you specific fields and data right away in the first <code class="prettyprint">GET \contact</code> call itself.</p>

<p>This can be done by passing the required fields in the URL via the <code class="prettyprint">fields</code> parameter. You can also use this in conjunction with the search criteria. An Example use could be to get the mobile  number and the email of all contacts with firstname as &#39;Sam&rsquo;.</p>

        <h1 id="contact-devices">Contact Devices</h1>

<p>Unlike SMS, or EMail, where the recipient is an adhoc phone number, or email, Push in Whispir has to be sent to registered contacts. So, sending Push by putting in the push-token in &ldquo;to&rdquo; field is not allowed. The reason for this primarily is the way Push works. A push/device token alone is not suffecient for the push to succeed, it needs the API Keys (in GCM), and Certificates (in APNS) of your App too. Providing that information in every API call is costly and troublesome, so Whispir has consciouly built the product to reduce the friction from such calls and into a simple pre-registered Apps and contact-devices method.</p>

<p>So, to send a push notification to a user device, one has to register the push token as a device under a contact. The device is a combination of device token, app platform information (APN, GCM, &hellip;), and other meta data that helps Whispir to manage and do push properly.</p>

<blockquote>
<p>API Endpoint</p>

<blockquote>
<ul>
<li>generic</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/contacts/{:contact-id}/devices?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.contactdevice-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/contacts/{:contact-id}/devices?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contactdevice</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<ul>
<li>limited to a workspace</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/workspaces/{:workspace-id}/contacts/{:contact-id}/devices?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.contactdevice-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/workspaces/{:workspace-id}/contacts/{:contact-id}/devices?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contactdevice</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">&gt; Resource type

- application/vnd.whispir.contactdevice-v1+xml
- application/vnd.whispir.contactdevice-v1+json


&gt; Methods supported

- GET
- POST
- PUT
- DELETE
</code></pre>

<p>A Device is a sub-resource to contact, and a Contact can have minimum of 0 to a maximum of 3 devices by default. However, the 3 device limit can be raised to a 10 depending on your app profile needs. Such limit is set during the <a href="#registering-an-app"> App Registration </a></p>

<p>To understand the relationship easily, refer to the <code class="prettyprint">apps</code> section.</p>

<h2 id="creating-new-devices">Creating new Devices</h2>

<blockquote>
<p>Creating new Devices</p>

<blockquote>
<p>New Devices can only be created under a given contact easily by following the request structure</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">POST https://api.&lt;region&gt;.whispir.com/workspaces/{:wid}/contacts/{:cid}/devices?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.contactdevice-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:device</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;deviceName&gt;</span>Device 1<span class="nt">&lt;/deviceName&gt;</span>
    <span class="nt">&lt;appId&gt;</span>B1A24A8BF2DBB10E<span class="nt">&lt;/appId&gt;</span>
    <span class="nt">&lt;platform&gt;</span>APNS<span class="nt">&lt;/platform&gt;</span>
    <span class="nt">&lt;deviceOS&gt;</span>IOS 7<span class="nt">&lt;/deviceOS&gt;</span>
    <span class="nt">&lt;deviceModel&gt;</span>Iphone 7 Plus<span class="nt">&lt;/deviceModel&gt;</span>
    <span class="nt">&lt;status&gt;</span>active<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;pushToken&gt;</span>15a01046 16f6f4f9 2f2055b5 f12d2c93 a70de908 487762f9 7b6c7115 e30083b1<span class="nt">&lt;/pushToken&gt;</span>
<span class="nt">&lt;/device&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contactdevice</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"deviceName"</span><span class="o">:</span><span class="x"> </span><span class="s">"BCDF6B61-CA55-F287FF272101-4496-9DA9"</span><span class="p">,</span><span class="x">
    </span><span class="s">"appId"</span><span class="o">:</span><span class="x"> </span><span class="s">"B1A24A8BF2DBB10E"</span><span class="p">,</span><span class="x">
    </span><span class="s">"platform"</span><span class="o">:</span><span class="x"> </span><span class="s">"APNS"</span><span class="p">,</span><span class="x">
    </span><span class="s">"deviceOS"</span><span class="o">:</span><span class="x"> </span><span class="s">"IOS 9"</span><span class="p">,</span><span class="x">
    </span><span class="s">"deviceModel"</span><span class="o">:</span><span class="x"> </span><span class="s">"Iphone X"</span><span class="p">,</span><span class="x">
    </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"active"</span><span class="p">,</span><span class="x">
    </span><span class="s">"pushToken"</span><span class="o">:</span><span class="x"> </span><span class="s">"15a01046 16f6f4f9 2f2055b5 f12d2c93 a70de908 487762f9 7b6c7115 e30083b1"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The successful response will be a 201 with the details of the device created and its associated unique <code class="prettyprint">deviceID</code>.</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:device</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id&gt;</span>1B0C3FC62D59BF90<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;deviceName&gt;</span>Device 1<span class="nt">&lt;/deviceName&gt;</span>
    <span class="nt">&lt;appId&gt;</span>B1A24A8BF2DBB10E<span class="nt">&lt;/appId&gt;</span>
    <span class="nt">&lt;registrationDate&gt;</span>2017-11-17<span class="nt">&lt;/registrationDate&gt;</span>
    <span class="nt">&lt;lastModifiedDate&gt;</span>2017-11-17<span class="nt">&lt;/lastModifiedDate&gt;</span>
    <span class="nt">&lt;platform&gt;</span>APNS<span class="nt">&lt;/platform&gt;</span>
    <span class="nt">&lt;deviceOS&gt;</span>IOS<span class="nt">&lt;/deviceOS&gt;</span>
    <span class="nt">&lt;deviceModel&gt;</span>Iphone 7 Plus<span class="nt">&lt;/deviceModel&gt;</span>
    <span class="nt">&lt;status&gt;</span>active<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;pushToken&gt;</span>15a01046 16f6f4f9 2f2055b5 f12d2c93 a70de908 487762f9 7b6c7115 e30083b1<span class="nt">&lt;/pushToken&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/{:wid}/contacts/{:cid}/devices/1B0C3FC62D59BF90?apikey=[your api key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/{:wid}/contacts/{:cid}/devices/1B0C3FC62D59BF90?apikey=[your api key]"</span> <span class="na">rel=</span><span class="s">"updateDevice"</span> <span class="na">method=</span><span class="s">"PUT"</span> <span class="na">type=</span><span class="s">"application/vnd.whispir.contactdevice-v1+json,application/vnd.whispir.contactdevice-v1+xml"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/{:wid}/contacts/{:cid}/devices/1B0C3FC62D59BF90?apikey=[your api key]"</span> <span class="na">rel=</span><span class="s">"deleteDevice"</span> <span class="na">method=</span><span class="s">"DELETE"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/device&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
    </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"1B0C3FC62D59BF90"</span><span class="p">,</span><span class="x">
    </span><span class="s">"deviceName"</span><span class="o">:</span><span class="x"> </span><span class="s">"BCDF6B61-CA55-F287FF272101-4496-9DA9"</span><span class="p">,</span><span class="x">
    </span><span class="s">"appId"</span><span class="o">:</span><span class="x"> </span><span class="s">"B1A24A8BF2DBB10E"</span><span class="p">,</span><span class="x">
    </span><span class="s">"registrationDate"</span><span class="o">:</span><span class="s">"2017-11-17"</span><span class="p">,</span><span class="x">
    </span><span class="s">"lastModifiedDate"</span><span class="o">:</span><span class="s">"2017-11-17"</span><span class="p">,</span><span class="x">
    </span><span class="s">"platform"</span><span class="o">:</span><span class="x"> </span><span class="s">"APNS"</span><span class="p">,</span><span class="x">
    </span><span class="s">"deviceOS"</span><span class="o">:</span><span class="x"> </span><span class="s">"IOS 9"</span><span class="p">,</span><span class="x">
    </span><span class="s">"deviceModel"</span><span class="o">:</span><span class="x"> </span><span class="s">"Iphone X"</span><span class="p">,</span><span class="x">
    </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"active"</span><span class="p">,</span><span class="x">
    </span><span class="s">"pushToken"</span><span class="o">:</span><span class="x"> </span><span class="s">"15a01046 16f6f4f9 2f2055b5 f12d2c93 a70de908 487762f9 7b6c7115 e30083b1"</span><span class="p">,</span><span class="x">
  </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/{:wid}/contacts/{:cid}/devices/1B0C3FC62D59BF90?apikey=[your api key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/{:wid}/contacts/{:cid}/devices/1B0C3FC62D59BF90?apikey=[your api key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"updateDevice"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"PUT"</span><span class="p">,</span><span class="x">
      </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"application/vnd.whispir.contactdevice-v1+json,application/vnd.whispir.contactdevice-v1+xml"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/{:wid}/contacts/{:cid}/devices/1B0C3FC62D59BF90?apikey=[your api key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"deleteDevice"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"DELETE"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>To create a new device, you can use the <code class="prettyprint">/contacts/{:cid}/devices</code> endpoint. The method is POST. Ensure that the following mandatory fields are provided for.</p>

<p>The following fields are required:</p>

<ul>
<li>deviceName</li>
<li>appId</li>
<li>platform</li>
<li>deviceOS</li>
<li>appVersion</li>
<li>deviceModel</li>
<li>pushToken</li>
</ul>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">deviceName:</td>
            <td><strong>String</strong><br/>
                Specifies the name of the device for visual reference in UI
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">appId:</td>
            <td><strong>String</strong><br/>
                Specifies the ID of the app the device is installed with. This ID refers to the Apps Endpoint > App ID
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">appVersion:</td>
            <td><strong>String</strong><br/>
                The version of your App installed on the user device. This is purely meta information that helps to understand the push success/failure based on app version if any.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">platform:</td>
            <td><strong>String</strong><br/>
                Specifies the app&rsquo;s platform. The value can be one of - 
                <ul>
          <li>APNS - for Production APNS apps</li>
                    <li>APNS_SANDBOX - for Sandbox APNS apps</li>
                    <li>GCM - for FCM/GCM Apps</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">deviceOS:</td>
            <td><strong>String</strong><br/>
                Specifies the device OS. The value can be one of - 
                <ul>
                    <li>IOS</li>
                    <li>Android</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">deviceModel:</td>
            <td><strong>String</strong><br/>
                Specifies the model of the user device
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">status:</td>
            <td><strong>String</strong><br/>
                Specifies the status of the device. Push will be only sent to the active devices under a given contact. It can be one of
                <ul>
                    <li>ACTIVE (A)</li>
                    <li>DISABLED (D)</li>
                    <li>DELETED (E)</li>
                </ul>
                Note: The default value is &ldquo;Active&rdquo;.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">pushToken:</td>
            <td><strong>String</strong><br/>
                Specifies the pushToken .a.k.a. deviceToken given to your app by APNS/GCM to receive the push notification. 
            </td>
        </tr>
    </tbody>
</table>

<h3 id="notes:">Notes:</h3>

<ul>
<li>Ensure that the deviceName is unique for each device.</li>
<li>Ensure that the values for deviceOS, deviceModel are properly set. Do not leave them as blank or give invalid/erroneous data. These values are the ones that are shown on the UI and in the reports. So proper values gives you an easier way to identify the devices under a given contact.</li>
<li>Ensure that before the Device is created, you have the appID, and the push token values available.</li>
<li>A contact can have as many number of devices needed, but limited to the value set in the <code class="prettyprint">deviceLimit</code> in APP creation on the /apps endpoint. You can set it to a maximum of 10 per contact.</li>
</ul>

<h2 id="retrieving-devices">Retrieving Devices</h2>

<blockquote>
<p>Retrieving the list of Devices under a Contact</p>

<blockquote>
<p>Devices can easily be retrieved from the Whispir API using the following endpoints:</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/workspaces/{:wid}/contacts/{:cid}?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.contact-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;ns2:contact&gt;</span>
            <span class="nt">&lt;id&gt;</span>AF48A9EC3F02E43C<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;firstName&gt;</span>Fred<span class="nt">&lt;/firstName&gt;</span>
            <span class="nt">&lt;lastName&gt;</span>Smith<span class="nt">&lt;/lastName&gt;</span>
            <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
            <span class="nt">&lt;messagingoptions/&gt;</span>
            <span class="nt">&lt;devices/&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
                      <span class="na">rel=</span><span class="s">"self"</span> 
                      <span class="na">uri=</span><span class="s">"http://api.&lt;region&gt;.whispir.com/workspaces/{:wid}/contacts/{:cid}?apikey=&lt;your_api_key&gt;"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:contact&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"AF48A9EC3F02E43C"</span><span class="p">,</span><span class="x">
      </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Fred"</span><span class="p">,</span><span class="x">
      </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Smith"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
      </span><span class="s">"messagingoptions"</span><span class="o">:</span><span class="x"> </span><span class="p">[],</span><span class="x">
      </span><span class="s">"devices"</span><span class="o">:</span><span class="p">[],</span><span class="x"> </span><span class="c">//list of devices as array of objects if any</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
        </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
        </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"http://api.&lt;region&gt;.whispir.com/workspaces/{:wid}/contacts/{:cid}?apikey=&lt;your_api_key&gt;"</span><span class="x">
      </span><span class="p">}</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Devices are sub-resource to Contacts. So, Devices belonging to a specific contact can be retrieved quite easily with a GET request to the <code class="prettyprint">/workspaces/{:wid}/contacts/{:cid}</code>. A simple <code class="prettyprint">workspaces/{:wid}/contacts/{:cid}</code> will result in all devices being retrieved for that contact with all of their information under the <code class="prettyprint">devices</code> key. No filters are applied.</p>

<p><em>Note:</em> Deleted devices cannot be retrieved. Only the &ldquo;Active&rdquo; and &ldquo;Disabled&rdquo; status devices can be seen</p>

<h2 id="updating-devices">Updating Devices</h2>

<blockquote>
<p>Updating Contact Devices</p>

<blockquote>
<p>The following endpoints allow users to update contact&rsquo;s devices using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 PUT https://api.&lt;region&gt;.whispir.com/workspaces/{:wid}/contacts/{:cid}/devices/{:did}?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.contactdevice-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="err">&lt;</span><span class="nt">&lt;ns2:device</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;deviceName&gt;</span>Device 1<span class="nt">&lt;/deviceName&gt;</span>
    <span class="nt">&lt;appId&gt;</span>B1A24A8BF2DBB10E<span class="nt">&lt;/appId&gt;</span>
    <span class="nt">&lt;platform&gt;</span>APNS<span class="nt">&lt;/platform&gt;</span>
    <span class="nt">&lt;deviceOS&gt;</span>IOS 9<span class="nt">&lt;/deviceOS&gt;</span>
    <span class="nt">&lt;deviceModel&gt;</span>Iphone 7 Plus<span class="nt">&lt;/deviceModel&gt;</span>
    <span class="nt">&lt;status&gt;</span>active<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;pushToken&gt;</span>15a01046 16f6f4f9 2f2055b5 f12d2c93 a70de908 487762f9 7b6c7115 e30083b1<span class="nt">&lt;/pushToken&gt;</span>
<span class="nt">&lt;/device&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contactdevice</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"deviceName"</span><span class="o">:</span><span class="x"> </span><span class="s">"BCDF6B61-CA55-F287FF272101-4496-9DA9"</span><span class="p">,</span><span class="x">
    </span><span class="s">"appId"</span><span class="o">:</span><span class="x"> </span><span class="s">"B1A24A8BF2DBB10E"</span><span class="p">,</span><span class="x">
    </span><span class="s">"platform"</span><span class="o">:</span><span class="x"> </span><span class="s">"APNS"</span><span class="p">,</span><span class="x">
    </span><span class="s">"deviceOS"</span><span class="o">:</span><span class="x"> </span><span class="s">"IOS 9"</span><span class="p">,</span><span class="x">
    </span><span class="s">"deviceModel"</span><span class="o">:</span><span class="x"> </span><span class="s">"Iphone 8"</span><span class="p">,</span><span class="x">
    </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"active"</span><span class="p">,</span><span class="x">
    </span><span class="s">"pushToken"</span><span class="o">:</span><span class="x"> </span><span class="s">"15a01046 16f6f4f9 2f2055b5 f12d2c93 a70de908 487762f9 7b6c7115 e30083b1"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The response to the PUT request upon success is a <code class="prettyprint">204 No Content</code> with no content being provided.</p>
</blockquote>
</blockquote>

<p>Updating a device can be performed using a PUT request to the <code class="prettyprint">/contacts/{:cid}/devices/{:did}</code> endpoint. So, to perform this, one must be knowing the exact “link” associated with the contactdevice.</p>

<p>The application must provide all the fields during the update request, even if they are not being updated. </p>

<p>The Content-Type can be -</p>

<ul>
<li>application/vnd.whispir.contactdevice-v1+xml <strong>or</strong> </li>
<li>application/vnd.whispir.contactdevice-v1+json</li>
</ul>

<p><strong>Note:</strong> You cannot selectively update the device fields needed as this is a PUT request. </p>

<p>So the standard process for updating a contact device record is -</p>

<ol>
<li>GET /contact/{id of contact}/devices/{id of device}</li>
<li>Update the device field in the object to the required value</li>
<li>PUT /contact/{id of contact}/devices/{id of device} the new object</li>
</ol>

<p><strong>Reasons to Update</strong></p>

<ol>
<li>Device token (Push tokens) might change when the user re-installs or upgrades the OS on their phone</li>
<li>Device information might have changed as a result of user upgrading their OS</li>
<li>Change of device status to &ldquo;Disabled&rdquo;, if the push fails consistently. Whispir does not update the device to &ldquo;Disabled&rdquo; upon first failure, it only does that on second failure given the device was not updated after first failure. So, you will only be charged for the Push, as long as the status is &ldquo;Active&rdquo;</li>
<li>Update does not automatically reset the &ldquo;Disabled&rdquo; status. You as the App owner has to specifically turn on the status back to &ldquo;ACTIVE&rdquo;, so that new push notifications can be triggered again.</li>
<li>Disabled devices will not receive any push notifications.</li>
</ol>

<p>The response to the PUT request upon success is usually a <code class="prettyprint">204</code> with no content being provided.</p>

<h2 id="deleting-a-device">Deleting a device</h2>

<blockquote>
<p>Deleting a contact device</p>

<blockquote>
<p>The following statement allows users to delete contact&rsquo;s device using the Whispir API.  Please note, this device cannot be recovered back once deleted.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 DELETE https://api.&lt;region&gt;.whispir.com/contacts/124F6B2D46A5A268/device/{:did}?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>

<p>Deleting a contact device can be performed using a DELETE request to the /contacts/{:cid}/devices/{:did} endpoint. So, to perform this, one must be knowing the exact “link” associated with the contact device.</p>

<p>After performing this request, the response does not contain any information other than the headers as it is not necessary.</p>

<p>The user has requested to delete a contactdevice, and when the response of <code class="prettyprint">204 No Content</code> is returned, the contactdevice is successfully deleted.</p>

<h2 id="faq">FAQ</h2>

<p>The following are some of the FAQ on contact devices</p>

<ol>
<li><p>I do not want to reveal my app user&rsquo;s name under the contact due to security reasons. How can i still create a contact and do Push?
<br>Ans: Whispir asks for firstName, lastName, timeZone, and Country of the contact. You can choose to set any masked value for the firstName and lastName data points. The masked value is only understood by your program and cor-relates that to your actual user in your DB. Whispir has no interest in that information. So, your personal identifiable data is safe withing your servers still.</p></li>
<li><p>How many devices can i register for a single App?
<br>Ans: This is dependent on the options.deviceLimit value set for the App when you registered it. Default is 3, and max allowed by Whispir is 10. This means your app user has upto 10 devices and has the app installed on all the 10 devices. Something not possible in real world, but still allowed.</p></li>
<li><p>My app user&rsquo;s push token is changed. What should i do?
<br>Ans: Update the contact devices that are tied to that token with the latest value, by using <a href="#updating-devices"> Updating Devices </a>. Whispir would not know that the token has changed, so its your responsibility to periodically update the token to keep them correct and so Whispir can ensure a successful delivery of your Push</p></li>
<li><p>What happens if i register two devices with same tokens, and appId information under a single contact?
<br>Ans: If both the devices are &ldquo;ACTIVE&rdquo;, then Whispir will send 2 push notifcations to the App.</p></li>
<li><p>Can i specifically mention, which device under my contact should receive the push?
<br>Ans: No. Whispir sends the push to all devices that matches the appID under the given MRI.</p></li>
<li><p>What If I registered two devices from two different platforms (APNS/GCM) under the same contact, and want to send to both of them at the same time?
<br>Ans: As the Apps registered for each platform will be different, you should trigger the message twice, once for each app. A single trigger does not allow sending messages to both platforms in one go.</p></li>
<li><p>Can I tie/related the same device to multiple contacts?
<br>Ans: No. You have to register them separately under each contact, and also update them properly if the push token changes.</p></li>
<li><p>If I use contact mapping, will my devices be also mapped automatically between workspaces?
<br>Ans: Yes, and this feature allows you to register your contacts in one workspace, and with mapping be able to trigger Push in other mapped workspaces also by using the base workspace contact mri value.</p></li>
</ol>

        <h1 id="distribution-lists">Distribution Lists</h1>

<blockquote>
<p>API Endpoint</p>

<blockquote>
<ul>
<li>generic</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/distributionlists/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.distributionlist-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/distributionlists/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">distributionlist</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<ul>
<li>limited to a workspace</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/workspaces/{:id}/distributionlists/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.distributionlist-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/workspaces/{:id}/distributionlists/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">distributionlist</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">&gt; Resource type

- application/vnd.whispir.distributionlist-v1+xml
- application/vnd.whispir.distributionlist-v1+json


&gt; Methods supported

- GET
- POST
- PUT
- DELETE
</code></pre>

<p>Whispir&rsquo;s API allows users to categorise their contacts into different groups to simplify the distribution of messages. This allows for </p>

<ul>
<li>Effective management and maintenance of contacts</li>
<li>Group messaging</li>
<li>Reporting</li>
</ul>

<p>These logical groups can help to target specific communications to specific people. A contact can be part of any number of groups.</p>

<p>Whispir supports 3 types of distribution lists.</p>

<ul>
<li><strong>Static</strong> : In a static distribution list you manually add contacts and, if required, one or more existing distribution lists. The contacts on the list don’t change unless you manually add or remove them (unlike a dynamic distribution list).</li>
<li><strong>Dynamic</strong> : In a dynamic distribution list you add contacts based on rules relating to information saved in their Whispir profiles. The list of contacts updates automatically if those specified details change in any profiles. For example, if you add contacts based on a specific role (such as ‘trainer’) and a contact moves to a different role, the list will exclude that contact when the message is sent.</li>
<li><strong>Shared</strong> : You can create a shared distribution list that’s made up of manually selected recipients, like a static distribution list. This list is then available for sharing with other workspaces (unlike static lists).</li>
</ul>

<aside class="notice">
Only Static, and Dynamic Distribution lists are allowed to be created via the API. Shared Distribution list creation is limited to the Platform UI only.
</aside>

<h2 id="creating-distribution-lists">Creating Distribution lists</h2>

<blockquote>
<p>Creating Distribution Lists</p>

<blockquote>
<p>Distribution Lists can contain lists of Contacts, Users or other Distribution Lists</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">POST https://api.&lt;region&gt;.whispir.com/distributionlists?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.distributionlist-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns1:distributionlists</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>My Distribution List<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;description&gt;&lt;/description&gt;</span>
    <span class="nt">&lt;access&gt;</span>Open<span class="nt">&lt;/access&gt;</span>
    <span class="nt">&lt;visibility&gt;</span>Public<span class="nt">&lt;/visibility&gt;</span>
    <span class="nt">&lt;contactIds&gt;&lt;/contactIds&gt;</span>
    <span class="nt">&lt;userIds&gt;&lt;/userIds&gt;</span>
    <span class="nt">&lt;distListIds&gt;&lt;/distListIds&gt;</span>
<span class="nt">&lt;/ns1:distributionlists&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">distributionlist</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"My Distribution List"</span><span class="p">,</span><span class="x">
    </span><span class="s">"description"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"access"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Open"</span><span class="p">,</span><span class="x">
    </span><span class="s">"visibility"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Public"</span><span class="p">,</span><span class="x">
    </span><span class="s">"contactIds"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"userIds"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"distListIds"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>Users should expect a <code class="prettyprint">201 Created</code> response after executing this request.</p>
</blockquote>

<p>Creating Dynamic Distribution Lists</p>

<blockquote>
<p>Dynamic Distribution Lists contains rules with filters to determine the members dynamically</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">POST https://api.&lt;region&gt;.whispir.com/distributionlists?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.distributionlist-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns1:distributionlist</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;name&gt;</span>My Dynamic DistributionList<span class="nt">&lt;/name&gt;</span>
   <span class="nt">&lt;description&gt;</span>My Distribution list<span class="nt">&lt;/description&gt;</span>
   <span class="nt">&lt;access&gt;</span>Open<span class="nt">&lt;/access&gt;</span>
   <span class="nt">&lt;type&gt;</span>dynamic<span class="nt">&lt;/type&gt;</span>
   <span class="nt">&lt;entityType&gt;</span>Contact<span class="nt">&lt;/entityType&gt;</span>
   <span class="nt">&lt;visibility&gt;</span>Public<span class="nt">&lt;/visibility&gt;</span>
   <span class="nt">&lt;rules&gt;</span>
       <span class="nt">&lt;ruleContent&gt;</span>sales<span class="nt">&lt;/ruleContent&gt;</span>
       <span class="nt">&lt;ruleFilter&gt;</span>division<span class="nt">&lt;/ruleFilter&gt;</span>
       <span class="nt">&lt;ruleFilterActualName&gt;</span>Division<span class="nt">&lt;/ruleFilterActualName&gt;</span>
   <span class="nt">&lt;/rules&gt;</span>
   <span class="nt">&lt;rules&gt;</span>
       <span class="nt">&lt;ruleContent&gt;</span>apac<span class="nt">&lt;/ruleContent&gt;</span>
       <span class="nt">&lt;ruleFilter&gt;</span>businessUnit<span class="nt">&lt;/ruleFilter&gt;</span>
       <span class="nt">&lt;ruleFilterActualName&gt;</span>Business Unit<span class="nt">&lt;/ruleFilterActualName&gt;</span>
   <span class="nt">&lt;/rules&gt;</span>
<span class="nt">&lt;/ns1:distributionlist&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">distributionlist</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

  </span><span class="p">{</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"My Dynamic DistributionList"</span><span class="p">,</span><span class="x">
    </span><span class="s">"description"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"My Distribution list"</span><span class="p">,</span><span class="x">
    </span><span class="s">"access"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Open"</span><span class="p">,</span><span class="x">
    </span><span class="s">"visibility"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Public"</span><span class="p">,</span><span class="x">
    </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"dynamic"</span><span class="p">,</span><span class="x">
    </span><span class="s">"entityType"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Contact"</span><span class="p">,</span><span class="x">
    </span><span class="s">"rules"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
            </span><span class="s">"ruleFilter"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"division"</span><span class="p">,</span><span class="x">
            </span><span class="s">"ruleFilterActualName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Division"</span><span class="p">,</span><span class="x">
            </span><span class="s">"ruleContent"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"sales"</span><span class="x">
        </span><span class="p">},{</span><span class="x">
            </span><span class="s">"ruleFilter"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"businessUnit"</span><span class="p">,</span><span class="x">
            </span><span class="s">"ruleFilterActualName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Business Unit"</span><span class="p">,</span><span class="x">
            </span><span class="s">"ruleContent"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"apac"</span><span class="x">
        </span><span class="p">}]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>Users should expect a <code class="prettyprint">201 Created</code> response after executing this request. If the rules are incorrectly passed, then a <code class="prettyprint">422 Unprocessible Entity</code> is thrown.</p>
</blockquote>
</blockquote>

<p>Distribution lists can be created within the Default Workspace, or within a Specific Workspace. Distribution lists can contain <strong>Contacts</strong>, <strong>Users</strong>, or nested <strong>Distribution Lists</strong> to create any structure that is required within your environment. </p>

<p>The MRI value is important here. It is the required unique identifier for any communications that are to be sent out to this distribution list.</p>

<p>To create a new distribution list, you can use the /distributionlists endpoint.</p>

<p>Only <strong>4 fields</strong> are required:</p>

<ol>
<li>name - the name of the distribution list to be created </li>
<li>access - Open Or Restricted </li>
<li>visibility - Private Or Public</li>
<li>type - Static or Dynamic</li>
</ol>

<p>In the case of <em><strong>Dynamic Distribution list</strong></em>, the required fields will be more than usual. As following - </p>

<ol>
<li>name - the name of the distribution list to be created </li>
<li>access - Open Or Restricted </li>
<li>visibility - Private Or Public</li>
<li>type - Dynamic</li>
<li>entityType - contact (limited to contacts only at the moment)</li>
<li>rules - The rules is an object that specifies the rules that should be applied on the entityType values to pick the appropriate contact at the moment of usage (not creation). The rules contain an array of rule definitions with a minimum of one rule to be defined. If not done so, a 422 unprocessable entity is returned by the API duuring the distribution list creation/edit.</li>
</ol>

<p><strong>Note</strong>: The contactIds, userIds, and distListIds values are ignored when the <em>type</em> is <em>dynamic</em>, as the rules govern the members of the Distribution list</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">name</td>
            <td>
            <strong>String</strong> <br>
               Specifies the name of the distribution list. This has to be unique, and should not contain any special characters (except space) in it.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">description</td>
            <td>
            <strong>String</strong> <br>
            Specifies a description for other users to see what this Distribution List should be used for.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">access</td>
            <td>
            <strong>String</strong> <br>
            Allows the user to specify the access type for this DL. <br>
            <ol>
            <li><strong>Open</strong> - Anyone can subscribe to this distribution list via the Whispir Portal</li>
            <li><strong>ByApproval</strong> - Anyone can subscribe using the Whispir Portal, however they are not officially on the list until their access is approved.</li>
            <li><strong>Restricted</strong> - The distribution list is not visible in the Whispir Portal</li>
            </ol>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">visibility</td>
            <td>
            <strong>String</strong> <br>
            Allows the user to specify the visibility for this DL. <br>
            
            <ol>
                <li><strong>Public</strong> - Any user/contact in any workspace can map themselves to this Distribution List within the Whispir Portal.</li>
                <li><strong>Private</strong> - Only users/contacts in the current workspace can map themselves to this Distribution List</li>
             </ol>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">type</td>
            <td>
            <strong>String</strong> <br>
            Allows the user to specify the type for this DL. Default is `static`<br>
            
            <ol>
                <li><strong>Static</strong> - The contacts on the list don’t change unless you manually add or remove them (unlike a dynamic distribution list).</li>
                <li><strong>Dynamic</strong> - The contacts on the list change based on the rulesFilter applied at the time of usage. There is good likelyhood of contacts changing for each run depending on the rules</li>
             </ol>
            </td>
        </tr>
    <tr>
            <td style="text-align: right; font-weight: bold;">entityTpe</td>
            <td>
            <strong>String</strong> <br>
            Only mandatory when the type is dynamic. The value is currently strictly limited to &ldquo;contact&rdquo;.
            </td>
        </tr>
    <tr>
            <td style="text-align: right; font-weight: bold;">rules</td>
            <td>
            <strong>Object</strong><br>
        The rules contains array (child) of rule definitions. Each rule is a object with 3 keys in them. 
            <ol>
        <li><strong>ruleFilter</strong> - contains any of the contact profile elements that are available for searching e.g. Division, Department, Role.</li>
        <li><strong>ruleFilterActualName</strong> - contains the matching string to be compared for the distribution list.</li>
        <li><strong>ruleContent</strong> - contains the matching string to be compared with the contact element for being a part of the Distribution list</li>
            </ol>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">contactIds</td>
            <td>
            <strong>String</strong> <br>
            Comma separated list of userIds who can have access, visibility on this Distribution list. This information can be provided at the time of the DL creation or also later updated via a PUT request.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">userIds</td>
            <td>
            <strong>String</strong> <br>
            Comma separated list of userIds who can have access, visibility on this Distribution list. This information can be provided at the time of the DL creation or also later updated via a PUT request.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">distListIds</td>
            <td>
            <strong>String</strong> <br>
            Comma separated list of Distribution List IDs which can be nested distribution list to this DL.
            </td>
        </tr>
    </tbody>
</table>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">List of common ruleFilter and ruleFilterActualName values</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">Common Values</td>
            <td>
            If your company has custom contact properties, that you want to include in the DL ruleFilter, then please reach out to Whispir Support or your Account Manager for the details.<br>
<ul>
        <li>ruleFilter : ruleFilterActualName</li>
</ul>
               <ol>
        <li>businessUnit : Business Unit</li>
        <li>companyName : Organization Name</li>
        <li>createdtime__timestamp : Created Time</li>
        <li>department : Department</li>
        <li>division : Division</li>
        <li>firstName : First Name</li>
        <li>group_messagingoption_active__boolean : Is Active</li>
        <li>group_messagingoption_fieldmapping : Mapped Field</li>
        <li>group_messagingoption_type__dropdown : Type</li>
        <li>jobTitle : Job Title</li>
        <li>lastName : Last Name</li>
        <li>lastmodifiedtime__timestamp : Last Updated Time</li>
        <li>personalAddress1 : Personal Address1</li>
        <li>personalAddress2 : Personal Address2</li>
        <li>personalCountry : Personal Country</li>
        <li>personalEmailAddress1 : Personal Email Address</li>
        <li>personalEmailAddress2 : Personal Email Address Secondary</li>
        <li>personalMobilePhone1 : Personal Mobile Phone Primary</li>
        <li>personalMobilePhone2 : Personal Mobile Phone Secondary</li>
        <li>personalPhone1 : Personal Phone Primary</li>
        <li>personalPhone2 : Personal Phone Secondary</li>
        <li>personalPhoneAreaCode1 : Personal Phone Areacode Primary</li>
        <li>personalPhoneAreaCode2 : Personal Phone Areacode Secondary</li>
        <li>personalPostCode : Personal Postcode</li>
        <li>personalState : Personal State</li>
        <li>personalSuburb : Personal Suburb</li>
        <li>role1 : Role</li>
        <li>role2 : Additional Role</li>
        <li>teamName1 : Team Name</li>
        <li>teamName2 : Additional Team Name</li>
        <li>timezone : Timezone</li>
        <li>workAddress1 : Work Address1</li>
        <li>workAddress2 : Work Address2</li>
        <li>workCountry : Work Country</li>
        <li>workEmailAddress1 : Work Email Address Primary</li>
        <li>workEmailAddress2 : Work Email Address Secondary</li>
        <li>workMobilePhone1 : Work Mobile Phone Primary</li>
        <li>workMobilePhone2 : Work Mobile Phone Secondary</li>
        <li>workOtherPhone : Phone Other</li>
        <li>workPhone1 : Work Phone Primary</li>
        <li>workPhone2 : Work Phone Secondary</li>
        <li>workPhoneAreaCode1 : Work Phone Areacode Primary</li>
        <li>workPhoneAreaCode2 : Work Phone Areacode Secondary</li>
        <li>workPostCode : Work Postcode</li>
        <li>workPostalAddress1 : Work Postal Address1</li>
        <li>workPostalAddress2 : Work Postal Address2</li>
        <li>workPostalCountry : Work Postal Country</li>
        <li>workPostalPostCode : Work Postal PostCode</li>
        <li>workPostalState : Work Postal State</li>
        <li>workPostalSuburb : Work Postal Suburb</li>
        <li>workSetellitePhone : Satellite Phone</li>
        <li>workState : Work State</li>
        <li>workSuburb : Work Suburb</li>
        </ol>
            </td>
        </tr>
    </tbody>
</table>

<h2 id="retrieving-distribution-lists">Retrieving Distribution Lists</h2>

<blockquote>
<p>Retrieving Distribution Lists</p>

<blockquote>
<p>The following snippets show how you can use the Whispir API to retrieve Distribution List information.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET /distributionlists?apikey=&lt;your_api_key&gt;
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.distributionlist-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 2 of 2<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:distributionLists&gt;</span>
        <span class="nt">&lt;ns2:distributionList&gt;</span>
            <span class="nt">&lt;id&gt;</span>CF5AF1AE49ED07A6<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;name&gt;</span>DL 1<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;mri&gt;</span>dl1.company_name@list.company.whispir.sg<span class="nt">&lt;/mri&gt;</span>
            <span class="nt">&lt;description&gt;</span>Distribution list for company 1<span class="nt">&lt;/description&gt;</span>
            <span class="nt">&lt;memberCount&gt;</span>4<span class="nt">&lt;/memberCount&gt;</span>
            <span class="nt">&lt;access&gt;</span>ByApproval<span class="nt">&lt;/access&gt;</span>
            <span class="nt">&lt;visibility&gt;</span>Private<span class="nt">&lt;/visibility&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/distributionlists/CF5AF1AE49ED07A6?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:distributionList&gt;</span>
        <span class="nt">&lt;ns2:distributionList&gt;</span>
            <span class="nt">&lt;id&gt;</span>9FF7C2B470CCEC1E<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;name&gt;</span>Docs Distribution List<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;mri&gt;</span>Docs_Distribution_List.company@list.company.whispir.sg<span class="nt">&lt;/mri&gt;</span>
            <span class="nt">&lt;description&gt;</span>A Distribution List created while writing the docs<span class="nt">&lt;/description&gt;</span>
            <span class="nt">&lt;memberCount&gt;</span>2<span class="nt">&lt;/memberCount&gt;</span>
            <span class="nt">&lt;access&gt;</span>Open<span class="nt">&lt;/access&gt;</span>
            <span class="nt">&lt;visibility&gt;</span>Public<span class="nt">&lt;/visibility&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/distributionlists/9FF7C2B470CCEC1E?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:distributionList&gt;</span>
    <span class="nt">&lt;/ns2:distributionLists&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">distributionlist</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"distributionLists"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"CF5AF1AE49ED07A6"</span><span class="p">,</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"DL 1"</span><span class="p">,</span><span class="x">
    </span><span class="s">"mri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"dl1.company_name@list.company.whispir.sg"</span><span class="p">,</span><span class="x">
    </span><span class="s">"description"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"test distribution list for company"</span><span class="p">,</span><span class="x">
    </span><span class="s">"memberCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"4"</span><span class="p">,</span><span class="x">
    </span><span class="s">"access"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ByApproval"</span><span class="p">,</span><span class="x">
    </span><span class="s">"visibility"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Private"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/distributionlists/CF5AF1AE49ED07A6?apikey=your_api_key"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"9FF7C2B470CCEC1E"</span><span class="p">,</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Docs Distribution List"</span><span class="p">,</span><span class="x">
    </span><span class="s">"mri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Docs_Distribution_List.company@list.company.whispir.sg"</span><span class="p">,</span><span class="x">
    </span><span class="s">"description"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"A Distribution List created while writing the docs"</span><span class="p">,</span><span class="x">
    </span><span class="s">"memberCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"2"</span><span class="p">,</span><span class="x">
    </span><span class="s">"access"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Open"</span><span class="p">,</span><span class="x">
    </span><span class="s">"visibility"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Public"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/distributionlists/9FF7C2B470CCEC1E?apikey=your_api_key"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">}],</span><span class="x">
  </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 2 of 2    "</span><span class="p">,</span><span class="x">
  </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Similar to the creation of distribution list, retrieval of such list too is bound to the workspace it belongs to. So, a distribution list belonging to a workspace cannot be accessed from another workspace. </p>

<p>The code samples on the right describe the methods to retrieve Distribution Lists using the Whispir API.</p>

<blockquote>
<p>Retrieving a specific Distribution List by ID</p>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET /distributionlists/E07BA0DA35B0B1EF?apikey=&lt;your_api_key&gt;
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>

<h2 id="searching-for-distribution-lists">Searching for Distribution Lists</h2>

<blockquote>
<blockquote>
<p><strong>Search for a Distribution List by name</strong><br/><br/>
Users can easily append the <code class="prettyprint">&amp;name=My DL Name</code> query parameter to search the Whispir API for a specific Distribution List.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET /distributionlists?apikey=&lt;your_api_key&gt;&amp;name=My%20Distribution%20List
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>

<blockquote>
<blockquote>
<p><strong>Search for a Distribution List by description</strong><br/><br/>
Users can easily append the <code class="prettyprint">&amp;description=My DL Description</code> query parameter to search the Whispir API for a specific Distribution List.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET /distributionlists?apikey=&lt;your_api_key&gt;&amp;description=company_name
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>

<p>The distribution list is usually retrieved by its <code class="prettyprint">id</code>, but one can also search or refer to the distribution list by its name. This feature has to do with the <strong>unique name</strong> requirement for the distribution list.</p>

<p>Apart from the name, the <code class="prettyprint">description</code> field can also be used to search for a distribution list. While name can be directly used to send in messages, the description is solely for the purpose of search. Once search yields the required result, the <code class="prettyprint">mri</code> has to be picked from the selected DL and then used to send the messages.</p>

<p>Both these operations can be performed by passing in the relevant search parameters in the URL - as query params</p>

<ul>
<li><strong>&amp;name=</strong> - to search for name</li>
<li><strong>&amp;description=</strong> - to search by description</li>
</ul>

<h2 id="modifying-distribution-lists">Modifying Distribution Lists</h2>

<blockquote>
<p>Getting the DL</p>

<blockquote>
<p>Request</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">GET https://api.&lt;region&gt;.whispir.com/distributionlists/CF5AF1AE49ED07A6?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>

<blockquote>
<blockquote>
<p>Response</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">Accept: application/vnd.whispir.distributionlist-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns1:distributionlists</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id&gt;</span>CF5AF1AE49ED07A6<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;name&gt;</span>Rockstar Distribution List<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;description&gt;</span>All the rocks were once stars - astrophysicist inside me<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;access&gt;</span>Open<span class="nt">&lt;/access&gt;</span>
    <span class="nt">&lt;visibility&gt;</span>Public<span class="nt">&lt;/visibility&gt;</span>
    <span class="nt">&lt;contactIds&gt;</span>7CC205AE17FFDC8A,92XC05AE154FDC8A<span class="nt">&lt;/contactIds&gt;</span>
    <span class="nt">&lt;userIds&gt;&lt;/userIds&gt;</span>
    <span class="nt">&lt;distListIds&gt;&lt;/distListIds&gt;</span>
...
<span class="nt">&lt;/ns1:distributionlists&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">distributionlist</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="p">{</span><span class="x">
    </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"CF5AF1AE49ED07A6"</span><span class="p">,</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Rockstar Distribution List"</span><span class="p">,</span><span class="x">
    </span><span class="s">"description"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"All the rocks were once stars - astrophysicist inside me"</span><span class="p">,</span><span class="x">
    </span><span class="s">"access"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Open"</span><span class="p">,</span><span class="x">
    </span><span class="s">"visibility"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Public"</span><span class="p">,</span><span class="x">
    </span><span class="s">"contactIds"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"7CC205AE17FFDC8A,92XC05AE154FDC8A"</span><span class="p">,</span><span class="x">
    </span><span class="s">"userIds"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"distListIds"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
</span><span class="o">...</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<p>Updating the DL</p>

<blockquote>
<p>Lets do the following in a single request</p>

<ol>
<li>Remove a contactId</li>
<li>Add two new UserId values</li>
</ol>

<p>Request</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">PUT https://api.&lt;region&gt;.whispir.com/distributionlists/CF5AF1AE49ED07A6?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.distributionlist-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns1:distributionlists</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id&gt;</span>CF5AF1AE49ED07A6<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;name&gt;</span>Rockstar Distribution List<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;description&gt;</span>All the rocks were once stars - astrophysicist inside me<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;access&gt;</span>Open<span class="nt">&lt;/access&gt;</span>
    <span class="nt">&lt;visibility&gt;</span>Public<span class="nt">&lt;/visibility&gt;</span>
    <span class="nt">&lt;contactIds&gt;</span>7CC205AE17FFDC8A,92XC05AE154FDC8A<span class="nt">&lt;/contactIds&gt;</span>
    <span class="nt">&lt;userIds&gt;&lt;/userIds&gt;</span>
    <span class="nt">&lt;distListIds&gt;&lt;/distListIds&gt;</span>
...
<span class="nt">&lt;/ns1:distributionlists&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">distributionlist</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"CF5AF1AE49ED07A6"</span><span class="p">,</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Rockstar Distribution List"</span><span class="p">,</span><span class="x">
    </span><span class="s">"description"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"All the rocks were once stars - astrophysicist inside me"</span><span class="p">,</span><span class="x">
    </span><span class="s">"access"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Open"</span><span class="p">,</span><span class="x">
    </span><span class="s">"visibility"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Public"</span><span class="p">,</span><span class="x">
    </span><span class="s">"contactIds"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"7CC205AE17FFDC8A"</span><span class="p">,</span><span class="x">
    </span><span class="s">"userIds"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"F0547F6F2E4839F8,900972D1C916FE84"</span><span class="p">,</span><span class="x">
    </span><span class="s">"distListIds"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
</span><span class="o">...</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>Response</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">204 No Content
</code></pre>

<p>A distribution list allows you to associate the following -</p>

<ul>
<li><strong>ContactIds</strong> (type: String) is a comma separated list of Contact IDs that you would like added to the list.</li>
<li><strong>UserIds</strong> (type: String) specifies the Whispir Users that should also be notified when this list is used.</li>
<li><strong>DistListIds</strong> (type: String) specifies the nested lists that are contained within this distribution list.</li>
</ul>

<p>Any or all three of these can be updated via the PUT method along with the DL properties (name, description, location etc).</p>

<p>The steps usually are -</p>

<ol>
<li>Create a Distribution List (DL)</li>
<li><p>While creating the DL itself, you can put in the ContactIds, UserIds, distListIds (nested) so that the DL is created with those values readily placed in.</p></li>
<li><p>After the DL is created, if you want to add/update the values, then</p></li>
<li><p>Do a GET request to retrieve the specific DL.</p>

<p>a. GET https://api.<region>.whispir.com/workspaces/{id}/distributionlists/{id}?apikey=xxxx</p>

<p>b. This will return you the DL object</p></li>
<li><p>Modify the DL properties (name, description, contactIds, UserIds, dlIds, location etc) as needed</p></li>
<li><p>Do a PUT request to update the DL details</p>

<p>a. PUT https://api.<region>.whispir.com/workspaces/{id}/distributionlists/{id}?apikey=xxxx</p>

<p>b. Successful update gives you a 204 No Content</p>

<p>c. The contactIds, userIds, distListIds can be passed all together in a single request.</p></li>
</ol>

<p>Note:</p>

<ol>
<li><p>If an existing contactId is again added, it does neither throws an error, nor create two entries. The contactId is just neglected and only 1 record is maintained.</p></li>
<li><p>If the PUT request was successful, the expected response code is a <code class="prettyprint">204 No Content</code></p></li>
<li><p>For Modifying the Location Information refer to <a href="http://10.0.2.15:4567/#location-tags-for-distribution-lists">Location Tags for Distribution Lists</a></p></li>
</ol>

<h2 id="sending-messages">Sending Messages</h2>

<blockquote>
<p>Sending Messages to Distribution Lists</p>

<blockquote>
<p>The API call is a <code class="prettyprint">POST</code> request to the <code class="prettyprint">/messages</code> endpoint.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>Docs_Distribution_List.company@list.company.whispir.sg<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Simple SMS to List of contacts in the distribution list<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;body&gt;</span>This is the content of my sample sms message.<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Docs_Distribution_List.company@list.company.whispir.sg"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Simple SMS to List of contacts in the distribution list"</span><span class="p">,</span><span class="x">
    </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the content of my sample sms message."</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Sending the message via the distribution list is very straight forward. The important key needed here is MRI of the distribution list.</p>

<p>This will result in the response of 202 Accepted and the message will be sent to all distribution list participants.</p>

<h2 id="deleting-distribution-lists">Deleting Distribution Lists</h2>

<blockquote>
<p>Deleting Distribution Lists</p>

<blockquote>
<p>The following API requests allow users to remove Distribution Lists from the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">DELETE https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/distributionlists/E07BA0DA35B0B1EF?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight go"><span class="n">DELETE</span><span class="x"> </span><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/distributionlists/E07BA0DA35B0B1EF?apikey=[your_api_key]</span><span class="x">
</span><span class="n">Authorization</span><span class="o">:</span><span class="x"> </span><span class="n">Basic</span><span class="x"> </span><span class="n">asdf98nf89asdvasd2r398h8sdf</span><span class="x">
</span><span class="n">x</span><span class="o">-</span><span class="n">api</span><span class="o">-</span><span class="n">key</span><span class="o">:</span><span class="x"> </span><span class="n">your_api_key</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>After performing the request the expected successful response is <code class="prettyprint">204 No Content</code>.</p>
</blockquote>
</blockquote>

<p>Deleting the distribution is done via a <code class="prettyprint">DELETE /distributionlist/{id}</code> endpoint. </p>

<p>You can only delete the distribution list that you have created or a valid userId associated with the specific distribution list.</p>

<h2 id="location-tags-for-distribution-lists">Location Tags for Distribution Lists</h2>

<p>Distribution Lists allow to add Locations as their property. This can be useful to geo-tag a group of users or assets in a single location. The location data can be set of multiple values with each entry specifying the lat, lon values and the type of data. There is no TTL attached to these values, so using the &lsquo;type&rsquo; of location can help with proper identification and data stale ness.</p>

<p>Type can be:</p>

<ol>
<li>&#39;CurrentLocation&rsquo; - used to specify that the data is latest and is nearest best last known location of the DL asset</li>
<li>&rsquo;-any-key-identifier&rsquo; - can be any custom identifier key name that you can use to identify/associate the location value with. Like &#39;AlternativeLocation&rsquo; or &#39;LocationB&rsquo; or &#39;LocationX&rsquo; etc.</li>
</ol>

<blockquote>
<p>Creating Distribution Lists with Location values</p>

<blockquote>
<p>Distribution Lists can contain lists of Contacts, Users or other Distribution Lists</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">POST https://api.&lt;region&gt;.whispir.com/distributionlists?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.distributionlist-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns1:distributionlists</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>My Distribution List<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;description&gt;&lt;/description&gt;</span>
    <span class="nt">&lt;access&gt;</span>Open<span class="nt">&lt;/access&gt;</span>
    <span class="nt">&lt;visibility&gt;</span>Public<span class="nt">&lt;/visibility&gt;</span>
    <span class="nt">&lt;contactIds&gt;&lt;/contactIds&gt;</span>
    <span class="nt">&lt;userIds&gt;&lt;/userIds&gt;</span>
    <span class="nt">&lt;distListIds&gt;&lt;/distListIds&gt;</span>
    <span class="nt">&lt;locations&gt;</span>
    <span class="nt">&lt;location&gt;</span>
        <span class="nt">&lt;latitude&gt;</span>47.6204232<span class="nt">&lt;/latitude&gt;</span>
        <span class="nt">&lt;longitude&gt;</span>-122.3493552<span class="nt">&lt;/longitude&gt;</span>
        <span class="nt">&lt;type&gt;</span>CurrentLocation<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/location&gt;</span>
    <span class="nt">&lt;/locations&gt;</span>
<span class="nt">&lt;/ns1:distributionlists&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">distributionlist</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"My Distribution List"</span><span class="p">,</span><span class="x">
    </span><span class="s">"description"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"access"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Open"</span><span class="p">,</span><span class="x">
    </span><span class="s">"visibility"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Public"</span><span class="p">,</span><span class="x">
    </span><span class="s">"contactIds"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"userIds"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"distListIds"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"locations"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"longitude"</span><span class="o">:</span><span class="x"> </span><span class="o">-</span><span class="m">122.3493552</span><span class="p">,</span><span class="x">
          </span><span class="s">"latitude"</span><span class="o">:</span><span class="x"> </span><span class="m">47.6204232</span><span class="p">,</span><span class="x">
          </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"CurrentLocation"</span><span class="x">
        </span><span class="p">}</span><span class="x">
    </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>Users should expect a <code class="prettyprint">201 Created</code> response after executing this request. Or <code class="prettyprint">204 No Content</code> in case of a distribution lost update using <code class="prettyprint">PUT</code></p>
</blockquote>
</blockquote>

        <h1 id="callbacks">Callbacks</h1>

<p>Whispir utilises API Callbacks to send simple notifications to different registered services in the event that some change has occurred on the Whispir Platform.</p>

<p>Callbacks are used widely in web applications to transfer information that may become avialable at some point in the future.  These are sometimes referred to as &lsquo;webhooks&rsquo;.</p>

<p>The benefits of using api callbacks are:</p>

<ul>
<li>Whispir will instantly notify your callback server when there is change occurred in Whispir platform.</li>
<li>You save on your daily API call limits by NOT having to call the /messageresponses or /messagestatus endpoints.</li>
<li>Response based workflows can be built quickly and effectively.</li>
</ul>

<p><em>The word &#39;Callback&rsquo; is termed to help users understand that Whispir will call you back when data is made available.</em></p>

<p>So, it is you who creates an endpoint (a page in your application) that Whispir shall callback upon an event happening. That endpoint can simply be your existing application (as mentioned earlier) or another application that needs/processes the response information.</p>

<h2 id="callback-overview">Callback Overview</h2>

<blockquote>
<p>Callback Overview</p>

<blockquote>
<p>Whispir can notify your application when your SMS, Email or Voice messages receive a reply.
<br/><br/>
An example callback that your application or service would receive is specified below.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST http://yourserver/callback.php
</code></pre>
<pre><code class="highlight xml">Content-Type: application/xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:deliveryResponse</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;messageid&gt;</span>ABC4857BCCF484575FCA<span class="nt">&lt;/messageid&gt;</span>
  <span class="nt">&lt;messagelocation&gt;</span>https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/messages/ABC4857BCCF484575FCA<span class="nt">&lt;/messagelocation&gt;</span>
  <span class="nt">&lt;from&gt;</span>
      <span class="nt">&lt;name&gt;</span>Fred Waters<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;mri&gt;</span>Fred_Waters.528798.Sandbox@Contact.whispir.com<span class="nt">&lt;/mri&gt;</span>
      <span class="nt">&lt;mobile&gt;</span>$mobile<span class="nt">&lt;/mobile&gt;</span>
      <span class="nt">&lt;email&gt;</span>me@example.com<span class="nt">&lt;/email&gt;</span>
      <span class="nt">&lt;voice&gt;</span>$mobile<span class="nt">&lt;/voice&gt;</span>
  <span class="nt">&lt;/from&gt;</span>
  <span class="nt">&lt;responseMessage&gt;</span>
      <span class="nt">&lt;channel&gt;</span>SMS<span class="nt">&lt;/channel&gt;</span>
      <span class="nt">&lt;acknowledged&gt;</span>09/01/16 13:22<span class="nt">&lt;/acknowledged&gt;</span>
      <span class="nt">&lt;content&gt;</span>Yes, I accept. Will I need to bring steel cap boots?<span class="nt">&lt;/content&gt;</span>
  <span class="nt">&lt;/responseMessage&gt;</span>
<span class="nt">&lt;/ns2:deliveryResponse&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="x">
</span><span class="p">{</span><span class="x">
  </span><span class="s">"messageid"</span><span class="o">:</span><span class="s">"ABC4857BCCF484575FCA"</span><span class="p">,</span><span class="x">
  </span><span class="s">"messagelocation"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/ABC4857BCCF484575FCA"</span><span class="p">,</span><span class="x">
  </span><span class="s">"from"</span><span class="o">:</span><span class="p">{</span><span class="x">
    </span><span class="s">"name"</span><span class="o">:</span><span class="s">"Fred Waters"</span><span class="p">,</span><span class="x">
    </span><span class="s">"mri"</span><span class="o">:</span><span class="s">"Fred_Waters.528798.Sandbox@Contact.whispir.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"mobile"</span><span class="o">:</span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"email"</span><span class="o">:</span><span class="s">"me@example.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"voice"</span><span class="o">:</span><span class="s">"$mobile"</span><span class="x">
  </span><span class="p">},</span><span class="x">
  </span><span class="s">"responseMessage"</span><span class="o">:</span><span class="p">{</span><span class="x">
    </span><span class="s">"channel"</span><span class="o">:</span><span class="s">"SMS"</span><span class="p">,</span><span class="x">
    </span><span class="s">"acknowledged"</span><span class="o">:</span><span class="s">"09/01/16 13:22"</span><span class="p">,</span><span class="x">
    </span><span class="s">"content"</span><span class="o">:</span><span class="s">"Yes, I accept. Will I need to bring steel cap boots?"</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Callbacks allow custom applications to register URLs with Whispir that are used for notifications when certain events occur e.g. a response to a message is received, or a message was undeliverable.</p>

<p><br/><p style="text-align: center"><img src="images/Whispir_API_diagram.png"/><br/></p></p>

<p>Whispir&rsquo;s Callback Service will forward the content of each message response, along with some associated metadata to a URL that the user has pre-registered to receive this information.</p>

<p>Some other points to follow -</p>

<ol>
<li>Always use a domain name for the callback. Do NOT use an IP.</li>
<li>Ensure that your callback server is reachable on the internet. It should not be <code class="prettyprint">localhost</code> or an intranet only application that cannot be reached from the WWW.</li>
<li>Limit the port to 80 or 443. Do no use any other ports.</li>
<li>Depending on the type chosen &#39;json&rsquo; or &#39;xml&rsquo; for the Content-Type, whispir would make a similar GET (and subsequently POST) calls. So, please ensure that your your web server is configured to handle such MIME type.</li>
<li>Most importantly, if your application infrastructure is behind a firewall, then make sure that the firewall allows an incoming POST request.</li>
</ol>

<h2 id="creating-new-callbacks">Creating new Callbacks</h2>

<blockquote>
<p>Creating new Callbacks</p>

<blockquote>
<p>The following API calls allow users to create new Callbacks using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/callbacks?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.api-callback-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:companyapicallback</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span>
                    <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>Callback Name<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;url&gt;</span>http://myserver.com/mycallback.php<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;auth&gt;</span>
      <span class="nt">&lt;key&gt;</span>MY_AUTH_KEY<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;type&gt;</span>querystring<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/auth&gt;</span>
    <span class="nt">&lt;contentType&gt;</span>json<span class="nt">&lt;/contentType&gt;</span>
    <span class="nt">&lt;removeHTML&gt;</span>enabled<span class="nt">&lt;/removeHTML&gt;</span>
    <span class="nt">&lt;retriesEnabled&gt;</span>true<span class="nt">&lt;/retriesEnabled&gt;</span>
    <span class="nt">&lt;email&gt;</span>me@example.com<span class="nt">&lt;/email&gt;</span>
    <span class="nt">&lt;callbacks&gt;</span>
      <span class="nt">&lt;reply&gt;</span>enabled<span class="nt">&lt;/reply&gt;</span>
      <span class="nt">&lt;undeliverable&gt;</span>enabled<span class="nt">&lt;/undeliverable&gt;</span>
    <span class="nt">&lt;/callbacks&gt;</span>
<span class="nt">&lt;/ns2:companyapicallback&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">api</span><span class="o">-</span><span class="n">callback</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Callback Name"</span><span class="p">,</span><span class="x">
  </span><span class="s">"url"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"http://myserver.com/mycallback.php"</span><span class="p">,</span><span class="x">
  </span><span class="s">"auth"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"querystring"</span><span class="p">,</span><span class="x">
    </span><span class="s">"key"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"MY_AUTH_KEY"</span><span class="x">
  </span><span class="p">},</span><span class="x">
  </span><span class="s">"contentType"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"json"</span><span class="p">,</span><span class="x">
  </span><span class="s">"removeHTML"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"disabled"</span><span class="p">,</span><span class="x">
  </span><span class="s">"retriesEnabled"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
  </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"me@example.com"</span><span class="p">,</span><span class="x">
  </span><span class="s">"callbacks"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"reply"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"enabled"</span><span class="p">,</span><span class="x">
    </span><span class="s">"undeliverable"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"enabled"</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The sample code above will create a callback endpoint that can be used within messages being sent from Whispir.<br/><br/>
The expected response to this call is an <strong>HTTP 201 - Created</strong>.</p>
</blockquote>
</blockquote>

<p>To create a new API Callback, you can use the <code class="prettyprint">/callbacks</code> endpoint.</p>

<p>The following table describes the fields that can be used within the request.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">name:</td>
            <td><strong>String</strong><br/>
                Specifies the name (ID) of the callback to be used within message requests.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">url:</td>
            <td><strong>String</strong><br/>
                Specifies the service URL that API Callbacks should be forwarded to.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">auth:</td>
            <td><strong>Object</strong><br/>
                Specifies the Authorization type that should be used with this endpoint.  The specific elements of this object are described below.<br/><br/>
                The options for this parameter are:
                <ul>
                  <li>querystring</li>
                  <li>httpheader</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">contentType:</td>
            <td><strong>String</strong><br/>
                Specifies the content type that should be sent to this endpoint.<br/><br/>
                The choices are as follows:
                <ul>
                  <li>json</li>
                  <li>xml</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">removeHTML:</td>
            <td><strong>String</strong><br/>
                Specifies whether HTML should be stripped from responses.<br/><br/>
                The choices are as follows:
                <ul>
                  <li>enabled</li>
                  <li>disabled</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">retriesEnabled:</td>
            <td><strong>Boolean</strong><br/>
                Specifies whether Whispir should perform retries in the event there is a failure accessing the callback service.<br/><br/>
                The choices are as follows:
                <ul>
                  <li>true</li>
                  <li>false</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">email:</td>
            <td><strong>String</strong><br/>
                Specifies the email address where failure notifications should be sent.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">callbacks:</td>
            <td><strong>Object</strong><br/>
                Object to store the callbacks that should be invoked for this endpoint.  The specific elements of this object are described below. <br/><br/>
                The options for this parameter are:
                <ul>
                  <li><strong>reply</strong>: enabled/disabled</li>
                  <li><strong>undeliverable</strong>: enabled/disabled</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<p><em>Note:</em></p>

<ol>
<li>The callback server must be expecting and accepting both GET and POST requests.</li>
<li>During the callback creation, Whispir shall make a GET request to ensure the callback URL provided is valid. The responseCode for this request should be <code class="prettyprint">200</code>. Any other code is considered a failure and the callback creation will fail.</li>
<li>This is the only time a GET request is made. Subsequent requests (callbacks) will all be POST requests.</li>
</ol>

<h3 id="callback-creation-errors"><strong>Callback Creation Errors</strong></h3>

<p>Usually callback creation is simple and straight forward. But you may face errors at times when the configuration details given in the API are malformed.</p>

<p><strong>400 Malformed Error</strong></p>

<p>This is the common error that you may face when creating a callback. If you get this issue, then check for the following:</p>

<ol>
  <li>Read the error detail in the response body. It will give you the hint on what the issue is - immediately.</li>
  <li>Is the callback URL reachable from outside of your intranet?<br/>Try again one more time from outside of your network.</li>
  <li>Is the response for a GET request to the URL a 200?<br/>Try it in your browser and see what is the status you get in the Network tab of Developer Tools (F12). Or you may use cURL.<br/>
    <ul>
      <li>If the GET request does not receive a 200 response, Whispir will consider the Callback creation request a failure and throws a 400 Malformed Request.</li>
      <li>The &ldquo;request&rdquo; is malformed - in the sense that the URL given is not working and so a bad configuration/malformed detail is given to Whispir.</li>
    </ul>
  </li>
  <li>A callback with the same name already exists in the Whispir under your account.</li>
</ol>

<h3 id="callback-authorization"><strong>Callback Authorization</strong></h3>

<blockquote>
<p>Callback Authorization</p>

<blockquote>
<p>Callback Servers should validate that the inbound request they are receiving is actually coming from Whispir.<br/><br/></p>

<p><strong>HTTP Header Auth Token</strong>
<br/>Users can specify their Authorization token as an HTTP Header. Whispir will add the <strong>X-Whispir-Callback-Key</strong> Header to the request.</p>

<p>Below is an example of callback made by Whispir. The example shows the response object format that will be sent to your callback server.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://yourserver/callback.php
X-Whispir-Callback-Key: MY_AUTH_TOKEN
</code></pre>
<pre><code class="highlight xml">Content-Type: application/xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:deliveryResponse</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;messageid&gt;</span>ABC4857BCCF484575FCA<span class="nt">&lt;/messageid&gt;</span>
    <span class="nt">&lt;messagelocation&gt;</span>https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/messages/ABC4857BCCF484575FCA<span class="nt">&lt;/messagelocation&gt;</span>
    <span class="nt">&lt;from&gt;</span>
      <span class="nt">&lt;name&gt;</span>Fred Waters<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;mri&gt;</span>Fred_Waters.528798.Sandbox@Contact.whispir.com<span class="nt">&lt;/mri&gt;</span>
      <span class="nt">&lt;mobile&gt;</span>$mobile<span class="nt">&lt;/mobile&gt;</span>
      <span class="nt">&lt;email&gt;</span>me@example.com<span class="nt">&lt;/email&gt;</span>
      <span class="nt">&lt;voice&gt;</span>$mobile<span class="nt">&lt;/voice&gt;</span>
    <span class="nt">&lt;/from&gt;</span>
    <span class="nt">&lt;responseMessage&gt;</span>
      <span class="nt">&lt;channel&gt;</span>SMS<span class="nt">&lt;/channel&gt;</span>
      <span class="nt">&lt;acknowledged&gt;</span>09/01/16 13:22<span class="nt">&lt;/acknowledged&gt;</span>
      <span class="nt">&lt;content&gt;</span>Yes, I accept. Will I need to bring steel cap boots?<span class="nt">&lt;/content&gt;</span>
    <span class="nt">&lt;/responseMessage&gt;</span>
<span class="nt">&lt;/ns2:deliveryResponse&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"messageid"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ABC4857BCCF484575FCA"</span><span class="p">,</span><span class="x">
  </span><span class="s">"messagelocation"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/ABC4857BCCF484575FCA"</span><span class="p">,</span><span class="x">
  </span><span class="s">"from"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fred Waters"</span><span class="p">,</span><span class="x">
    </span><span class="s">"mri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fred_Waters.528798.Sandbox@Contact.whispir.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"mobile"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"me@example.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="x">
  </span><span class="p">},</span><span class="x">
  </span><span class="s">"responseMessage"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"channel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"SMS"</span><span class="p">,</span><span class="x">
    </span><span class="s">"acknowledged"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"09/01/13 13:22"</span><span class="p">,</span><span class="x">
    </span><span class="s">"content"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Yes, I accept. Will I need to bring steel cap boots?"</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p><strong>URL Query Parameter Auth Token</strong>
<br/>Users can specify their Authorization token as a URL query parameter.  This will come as <strong><code class="prettyprint">auth=:your_token</code></strong> on the URL.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://yourserver/callback.php?auth=MY_AUTH_TOKEN
</code></pre>
<pre><code class="highlight xml">Content-Type: application/xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:deliveryResponse</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;messageid&gt;</span>ABC4857BCCF484575FCA<span class="nt">&lt;/messageid&gt;</span>
    <span class="nt">&lt;messagelocation&gt;</span>https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/messages/ABC4857BCCF484575FCA<span class="nt">&lt;/messagelocation&gt;</span>
    <span class="nt">&lt;from&gt;</span>
      <span class="nt">&lt;name&gt;</span>Fred Waters<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;mri&gt;</span>Fred_Waters.528798.Sandbox@Contact.whispir.com<span class="nt">&lt;/mri&gt;</span>
      <span class="nt">&lt;mobile&gt;</span>$mobile<span class="nt">&lt;/mobile&gt;</span>
      <span class="nt">&lt;email&gt;</span>me@example.com<span class="nt">&lt;/email&gt;</span>
      <span class="nt">&lt;voice&gt;</span>$mobile<span class="nt">&lt;/voice&gt;</span>
    <span class="nt">&lt;/from&gt;</span>
    <span class="nt">&lt;responseMessage&gt;</span>
      <span class="nt">&lt;channel&gt;</span>SMS<span class="nt">&lt;/channel&gt;</span>
      <span class="nt">&lt;acknowledged&gt;</span>09/01/16 13:22<span class="nt">&lt;/acknowledged&gt;</span>
      <span class="nt">&lt;content&gt;</span>Yes, I accept. Will I need to bring steel cap boots?<span class="nt">&lt;/content&gt;</span>
    <span class="nt">&lt;/responseMessage&gt;</span>
<span class="nt">&lt;/ns2:deliveryResponse&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"messageid"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ABC4857BCCF484575FCA"</span><span class="p">,</span><span class="x">
  </span><span class="s">"messagelocation"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/ABC4857BCCF484575FCA"</span><span class="p">,</span><span class="x">
  </span><span class="s">"from"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fred Waters"</span><span class="p">,</span><span class="x">
    </span><span class="s">"mri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fred_Waters.528798.Sandbox@Contact.whispir.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"mobile"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"me@example.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="x">
  </span><span class="p">},</span><span class="x">
  </span><span class="s">"responseMessage"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"channel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"SMS"</span><span class="p">,</span><span class="x">
    </span><span class="s">"acknowledged"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"09/01/13 13:22"</span><span class="p">,</span><span class="x">
    </span><span class="s">"content"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Yes, I accept. Will I need to bring steel cap boots?"</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Whispir Callbacks have been designed to be simple, yet secure.</p>

<p>In order to make your Callback Server processing much safer, Whispir recommends the following security measures:</p>

<ul>
<li>Use SSL on your Callback URL</li>
<li>Use an unique token</li>
</ul>

<p>The unique token should be an alphanumeric string generated and assigned specifically for Whispir Callbacks.</p>

<p>When provided in the callback payload, Whispir will include this in every request made to the listening application. The token&rsquo;s presence ensures and confirms that the request has originated truly from Whispir.</p>

<p>There are two options for the location of this Authorization Token:</p>

<p><strong>1. HTTP Header</strong></p>

<p>Using an HTTP Header for authorisation is the preferred approach. This method will use a custom HTTP Header <em>X-Whispir-Callback-Key</em>.</p>

<p>This can be added to the callback by specifying the code block:</p>

<p><code class="prettyprint">&quot;auth&quot; : { &quot;type&quot; : &quot;httpheader&quot;, &quot;key&quot; : &quot;MY_AUTH_TOKEN&quot; }</code></p>

<p>Every request to the specified URL will include the supplied AUTH Token within this Header.  Alternatively, this could be supplied as a query parameter as follows.</p>

<p><strong>2. URL Query Parameter</strong></p>

<p>In this method, the Authorization will be passed to the callback server on the query string using an &#39;Auth&rsquo; parameter as follows:</p>

<p><code class="prettyprint">&quot;auth&quot; : { &quot;type&quot; : &quot;querystring&quot;, &quot;key&quot; : &quot;MY_AUTH_TOKEN&quot; }</code></p>

<h3 id="callback-types">Callback Types</h3>

<p>Callbacks can be added to any message that is sent from the Whispir API using the <code class="prettyprint">/messages</code> endpoint.</p>

<p>Each callback can be invoked from one of two actions occurring:</p>

<ul>
<li>A message has been replied to, or</li>
<li>A message delivery failure occurred (wrong number, or service unavailable)</li>
</ul>

<p>Users can control which of these actions are delivered to the endpoint using the <code class="prettyprint">callbacks</code> object when registering new callbacks.</p>

<p>The options that are available are:</p>

<ul>
<li>reply: enabled/disabled</li>
<li>undeliverable: enabled/disabled</li>
</ul>

<p>When these are enabled, any reply or failed delivery will cause a <code class="prettyprint">GET</code> request to be invoked on the Callback URL.</p>

<h2 id="retrieving-callbacks">Retrieving Callbacks</h2>

<blockquote>
<p>Retrieving Callbacks</p>

<blockquote>
<p>The following API Methods allow you to access callbacks via the API</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/callbacks?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.api-callback-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 3 of 3<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:callbacks&gt;</span>
        <span class="nt">&lt;ns2:callback&gt;</span>
            <span class="nt">&lt;id&gt;</span>BCD374DABC73649B<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;name&gt;</span>Sample Callback 1<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;url&gt;</span>http://myserver.com/callback1.php<span class="nt">&lt;/url&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/callbacks/BCD374DABC73649B?apikey=[API_KEY]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:callback&gt;</span>
        <span class="nt">&lt;ns2:callback&gt;</span>
            <span class="nt">&lt;id&gt;</span>AD34DBCEFD74EABC<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;name&gt;</span>Sample Callback 2<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;url&gt;</span>http://myserver.com/callback2.php<span class="nt">&lt;/url&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/callbacks/AD34DBCEFD74EABC?apikey=[API_KEY]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:callback&gt;</span>
        <span class="nt">&lt;ns2:callback&gt;</span>
            <span class="nt">&lt;id&gt;</span>73BDCEFA43DF35DB<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;name&gt;</span>Sample Callback 3<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;url&gt;</span>http://myserver.com/callback3.php<span class="nt">&lt;/url&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/callbacks/73BDCEFA43DF35DB?apikey=[API_KEY]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:callback&gt;</span>
    <span class="nt">&lt;/ns2:callbacks&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>

</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">api</span><span class="o">-</span><span class="n">callback</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 3 of 3"</span><span class="p">,</span><span class="x">
  </span><span class="s">"callbacks"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"BCD374DABC73649B"</span><span class="p">,</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Sample Callback 1"</span><span class="p">,</span><span class="x">
    </span><span class="s">"url"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"http://myserver.com/callback1.php"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/callbacks/BCD374DABC73649B?apikey=[API_KEY]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">},{</span><span class="x">
    </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"AD34DBCEFD74EABC"</span><span class="p">,</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Sample Callback 2"</span><span class="p">,</span><span class="x">
    </span><span class="s">"url"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"http://myserver.com/callback2.php"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/callbacks/AD34DBCEFD74EABC?apikey=[API_KEY]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">},{</span><span class="x">
    </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"73BDCEFA43DF35DB"</span><span class="p">,</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Sample Callback 3"</span><span class="p">,</span><span class="x">
    </span><span class="s">"url"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"http://myserver.com/callback3.php"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/callbacks/73BDCEFA43DF35DB?apikey=[API_KEY]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">},</span><span class="x"> </span><span class="p">],</span><span class="x">
  </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>To retrieve a list of callbacks from the Whispir API you can execute an <strong>HTTP GET</strong> using the <code class="prettyprint">/callbacks</code> endpoint.</p>

<p>You will need to supply one of the following headers (for retrieving JSON or XML):</p>

<ul>
<li>Accept: application/vnd.whispir.api-callback-v1+xml</li>
<li>Accept: application/vnd.whispir.api-callback-v1+json</li>
</ul>

<p>An array of Callbacks will be returned to you in the HTTP response body.</p>

<p>Each of these Callbacks will provide the following information:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Response Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">id:</td>
            <td><strong>String</strong><br/>
                The unique ID of the callback within Whispir.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">name:</td>
            <td><strong>String</strong><br/>
                The name given to the Callback at creation time. Also the ID that is used in the `/messages` endpoint.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">url:</td>
            <td><strong>String</strong><br/>
                The application URL that was given to the Callback at creation time.  Also the endpoint that will be used when supplying callback information.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">link:</td>
            <td><strong>Array</strong><br/>
                Provides a list of URLs that can be used to manipulate or access the callback.
                <ul>
                  <li>uri - the link to access the specific callback</li>
                  <li>rel - the descriptor for what the link will do</li>
                  <li>method - the HTTP method to use with this particular link</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<h2 id="using-callbacks">Using Callbacks</h2>

<blockquote>
<p>Using Callbacks</p>

<blockquote>
<p>Callbacks can be added to messages by adding the <code class="prettyprint">callbackId</code> parameter and the name of the callback as follows:</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test SMS Message"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of my test SMS message"</span><span class="p">,</span><span class="x">
   </span><span class="s">"callbackId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Sample Callback 1"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test SMS Message<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;body&gt;</span>This is the body of my test SMS message<span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;callbackId&gt;</span>Sample Callback 1<span class="nt">&lt;/callbackId&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>

<p>Callbacks can be added to messages by simply specifying the callback name within the request to the <code class="prettyprint">/messages</code> endpoint.</p>

<p>Any responses to the above sent message will be forwarded back to the URL within the Callback named <code class="prettyprint">Sample Callback 1</code>.</p>

<h2 id="handling-callback-failures">Handling Callback Failures</h2>

<blockquote>
<p>Callback Failures</p>

<blockquote>
<p>Whispir will automatically send notifications to your nominated email address in the event of a failure to access your callback server.</p>

<p>When retries are enabled, the following message will be sent.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">Dear Customer,

Your callback *callback_id* failed on *date* with response: *response*.

The callback that failed is as follows:

URL: https://yourserver/callback.php?auth=12345
Location: https://api.&lt;region&gt;.whispir.com/messages/ABC4857BCCF484575FCA
Name: Fred Waters
Mobile: $mobile
Email: me@example.com
Channel: SMS
Content: Yes, I accept. Will I need to bring steel cap boots?

Whispir will automatically retry any failed requests to this callback endpoint for 24 hours, after which the requests can be queried using the Whispir API for up to 30 days.

Please take the necessary steps to ensure your callback is configured correctly.

Regards,
Whispir Support

</code></pre>

<blockquote>
<blockquote>
<p>When retries are disabled, the message will be slightly different.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">Retries are disabled on this callback endpoint so no retries will be attempted. Any requests can be queried using the Whispir API for up to 12 months from this notification.
</code></pre>

<p>In the event the provided callback URL could not be reached or the connection to the service times out, Whispir will automatically generate a notification to the nominated email address with the details of the failed attempt.</p>

<p>Whispir will automatically send an email in the following circumstances:</p>

<ul>
<li>If the Callback Server returns anything other than an HTTP 200 OK.</li>
<li>If the authorization to the Callback Server fails (e.g. returns an HTTP 400 level error)</li>
<li>If the Callback Server does not connect within 5 seconds.</li>
<li>If the Callback Server does not return a response within 60 seconds.</li>
</ul>

<p><strong>Callback Retries</strong></p>

<p>The <code class="prettyprint">retriesEnabled</code> flag can be enabled on a callback to ensure that Whispir automatically attempts to retry in the event of a failure occurring.</p>

<p>When a failure conditions occurs, Whispir will mark the callback server as <em>down</em> and log the attempted callback as <em>Failed</em>.</p>

<p>This callback will be attempted to be retried after ~5 minutes. If the server is available, the callbacks will automatically be processed through the server, the user doesn&rsquo;t need to take any further action.</p>

<p>The following rules apply to Whispir&rsquo;s automated retries for callbacks:</p>

<ul>
<li>When a failure to make a callback occurs, Whispir will begin retries ~every 5 minutes.</li>
<li>Whispir will retry any callback for up to 24h.</li>
<li>After 24h, the callbacks will no longer be retried.</li>
<li>If the callback service becomes available prior to 24h, the callbacks will automatically re-process.</li>
<li>If the callback service takes longer than 24h, the user can access the callback information from the <code class="prettyprint">/callbacks/:id/calls</code> endpoint.</li>
</ul>

<blockquote>
<p>Retrieving attempted calls to a callback endpoint</p>

<blockquote>
<p>The following API Methods allow you to access callback attempts via the API</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/callbacks/BCD374DABC73649B/calls?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.api-call-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;status&gt;</span>1 to 1 of 1<span class="nt">&lt;/status&gt;</span>
  <span class="nt">&lt;ns2:call&gt;</span>
    <span class="nt">&lt;id&gt;</span>B3EDFE83DF389DFE<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;messageId&gt;</span>ABC4857BCCF484575FCA<span class="nt">&lt;/messageId&gt;</span>
    <span class="nt">&lt;messageLocation&gt;</span>https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/messages/ABC4857BCCF484575FCA<span class="nt">&lt;/messageLocation&gt;</span>
    <span class="nt">&lt;status&gt;</span>FAILED<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;from&gt;</span>
      <span class="nt">&lt;voice&gt;&lt;/voice&gt;</span>
      <span class="nt">&lt;mri&gt;</span>Fred_Waters.528798.Sandbox@Contact.whispir.com<span class="nt">&lt;/mri&gt;</span>
      <span class="nt">&lt;name&gt;</span>Fred Waters<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;mobile&gt;</span>$mobile<span class="nt">&lt;/mobile&gt;</span>
      <span class="nt">&lt;email&gt;&lt;/email&gt;</span>
    <span class="nt">&lt;/from&gt;</span>
    <span class="nt">&lt;responseMessage&gt;</span>
      <span class="nt">&lt;acknowledged&gt;</span>09/01/13 13:22<span class="nt">&lt;/acknowledged&gt;</span>
      <span class="nt">&lt;channel&gt;</span>SMS<span class="nt">&lt;/channel&gt;</span>
      <span class="nt">&lt;content&gt;</span>Yes, I accept. Will I need to bring steel cap boots?<span class="nt">&lt;/content&gt;</span>
    <span class="nt">&lt;/responseMessage&gt;</span>
    <span class="nt">&lt;callback&gt;</span>
      <span class="nt">&lt;name&gt;</span>My Callback Server<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;attemptedDate&gt;</span>09/01/13 13:22<span class="nt">&lt;/attemptedDate&gt;</span>
      <span class="nt">&lt;id&gt;</span>B384FD38DCBADE38<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span>https://www.myapplication.com/myapp<span class="nt">&lt;/url&gt;</span>
      <span class="nt">&lt;statusMessage&gt;</span>Internal Server Error<span class="nt">&lt;/statusMessage&gt;</span>
      <span class="nt">&lt;statusCode&gt;</span>500<span class="nt">&lt;/statusCode&gt;</span>
    <span class="nt">&lt;/callback&gt;</span>
    <span class="nt">&lt;link&gt;</span>
      <span class="nt">&lt;uri&gt;</span>/callbacks/B384FD38DCBADE38/calls/B3EDFE83DF389DFE<span class="nt">&lt;/uri&gt;</span>
      <span class="nt">&lt;rel&gt;</span>updateCall<span class="nt">&lt;/rel&gt;</span>
      <span class="nt">&lt;method&gt;</span>PUT<span class="nt">&lt;/method&gt;</span>
    <span class="nt">&lt;/link&gt;</span>
  <span class="nt">&lt;/ns2:call&gt;</span>
  <span class="nt">&lt;ns2:link&gt;</span>
    <span class="nt">&lt;uri&gt;</span>/callbacks/B384FD38DCBADE38/calls?offset=20<span class="ni">&amp;amp;</span>limit=20<span class="nt">&lt;/uri&gt;</span>
    <span class="nt">&lt;rel&gt;</span>next<span class="nt">&lt;/rel&gt;</span>
    <span class="nt">&lt;method&gt;</span>GET<span class="nt">&lt;/method&gt;</span>
  <span class="nt">&lt;/ns2:link&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>

</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">api</span><span class="o">-</span><span class="n">call</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 1 of 1"</span><span class="p">,</span><span class="x">
  </span><span class="s">"calls"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"B3EDFE83DF389DFE"</span><span class="p">,</span><span class="x">
      </span><span class="s">"messageId"</span><span class="o">:</span><span class="x"> </span><span class="s">"ABC4857BCCF484575FCA"</span><span class="p">,</span><span class="x">
      </span><span class="s">"messageLocation"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/ABC4857BCCF484575FCA"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"FAILED"</span><span class="p">,</span><span class="x">
      </span><span class="s">"from"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"Fred Waters"</span><span class="p">,</span><span class="x">
        </span><span class="s">"mri"</span><span class="o">:</span><span class="x"> </span><span class="s">"Fred_Waters.528798.Sandbox@Contact.whispir.com"</span><span class="p">,</span><span class="x">
        </span><span class="s">"mobile"</span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
        </span><span class="s">"email"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
        </span><span class="s">"voice"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
      </span><span class="p">},</span><span class="x">
      </span><span class="s">"responseMessage"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"SMS"</span><span class="p">,</span><span class="x">
        </span><span class="s">"acknowledged"</span><span class="o">:</span><span class="x"> </span><span class="s">"09/01/13 13:22"</span><span class="p">,</span><span class="x">
        </span><span class="s">"content"</span><span class="o">:</span><span class="x"> </span><span class="s">"Yes, I accept. Will I need to bring steel cap boots?"</span><span class="x">
      </span><span class="p">},</span><span class="x">
      </span><span class="s">"callback"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"B384FD38DCBADE38"</span><span class="p">,</span><span class="x">
        </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"My Callback Server"</span><span class="p">,</span><span class="x">
        </span><span class="s">"url"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://www.myapplication.com/myapp"</span><span class="p">,</span><span class="x">
        </span><span class="s">"attemptedDate"</span><span class="o">:</span><span class="x"> </span><span class="s">"09/01/13 13:22"</span><span class="p">,</span><span class="x">
        </span><span class="s">"statusCode"</span><span class="o">:</span><span class="x"> </span><span class="m">500</span><span class="p">,</span><span class="x">
        </span><span class="s">"statusMessage"</span><span class="o">:</span><span class="x"> </span><span class="s">"Internal Server Error"</span><span class="x">
      </span><span class="p">},</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
        </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"updateCall"</span><span class="p">,</span><span class="x">
        </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"/callbacks/B384FD38DCBADE38/calls/B3EDFE83DF389DFE"</span><span class="p">,</span><span class="x">
        </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"PUT"</span><span class="x">
      </span><span class="p">}]</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">],</span><span class="x">
  </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
    </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"next"</span><span class="p">,</span><span class="x">
    </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"/callbacks/B384FD38DCBADE38/calls?limit=20&amp;offset=20"</span><span class="p">,</span><span class="x">
    </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
  </span><span class="p">}]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>You will need to supply one of the following headers (for retrieving JSON or XML):</p>

<ul>
<li>Accept: application/vnd.whispir.api-call-v1+xml</li>
<li>Accept: application/vnd.whispir.api-call-v1+json</li>
</ul>

<p>An array of calls will be returned to you in the HTTP response body.</p>

<p>Each of these calls will provide the following information:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Response Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">id:</td>
            <td><strong>String</strong><br/>
                The unique ID of the specific call within Whispir.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">messageid:</td>
            <td><strong>String</strong><br/>
                The unique ID of the message within Whispir.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">messagelocation:</td>
            <td><strong>String</strong><br/>
                The fully qualified URL to the original message within Whispir.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">status:</td>
            <td><strong>String</strong><br/>
                The status of this particular callback attempt. The options are:
                <ul>
                  <li>SUCCESS</li>
                  <li>FAILED</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">from:</td>
            <td><strong>Object</strong><br/>
                The details about this particular message sender / responder.<br/><br/>
                The properties of this object are as follows:
                <ul>
                  <li>name (string): The name of the sender of this message.</li>
                  <li>mri (string): The unique identifier for this contact within Whispir.</li>
                  <li>mobile (string): The mobile number associated to this sender.</li>
                  <li>voice (string): The phone number associated to the voice channel for this sender.</li>
                  <li>email (string): The email address associated to the email channel for this sender.</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">responseMessage:</td>
            <td><strong>Object</strong><br/>
                The details about this particular message that has been sent to the callback.<br/><br/>
                The properties of this object are as follows:
                <ul>
                  <li>channel (string): The channel that this message was sent on. Either <strong>SMS</strong>, <strong>EMAIL</strong> or <strong>VOICE</strong>.</li>
                  <li>acknowledged (string): The date/time that this message was acknowledged.</li>
                  <li>undeliverable (string): The date/time that this message was marked as undeliverable.</li>
                  <li>content (string): The content of the message.</li>
                </ul>
                <strong>Note:</strong> Only one of the <em>acknowledged</em> or <em>undeliverable</em> timestamps will be provided.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">callback:</td>
            <td><strong>Object</strong><br/>
                The details about this particular callback attempt.<br/><br/>
                The properties of this object are as follows:
                <ul>
                  <li>id (string): The ID of the callback that was attempted to be invoked.</li>
                  <li>name (string): The name of the callback server that was attempted to be invoked.</li>
                  <li>url (string): The url of the callback server that was attempted to be invoked.</li>
                  <li>attemptedDate (string): The date/time that the callback server was attempted to be invoked.</li>
                  <li>statusCode (integer): The statuscode that was returned from the callback service.</li>
                  <li>statusMessage (string): The status message that was returned from the callback service.</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">link:</td>
            <td><strong>Array</strong><br/>
                Provides a list of URLs that can be used to manipulate or access the callback.
                <ul>
                  <li>uri - the link to access the specific callback</li>
                  <li>rel - the descriptor for what the link will do</li>
                  <li>method - the HTTP method to use with this particular link</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<p><strong>Retrieving the list of calls based on their Status</strong></p>

<blockquote>
<p>Retrieve based on Status</p>

<blockquote>
<p>Failed Calls</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/callbacks/BCD374DABC73649B/calls?apikey=[your_api_key]&amp;status=FAILED
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>

<blockquote>
<blockquote>
<p>Success Calls</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/callbacks/BCD374DABC73649B/calls?apikey=[your_api_key]&amp;status=SUCCESS
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>

<p>To retrieve a list of attempted API calls from the Whispir API you can execute an <strong>HTTP GET</strong> using the <code class="prettyprint">/calls</code> endpoint on a specific <code class="prettyprint">callback</code>.</p>

<p>To specifically retrieve the FAILED/SUCCESS calls, one can pass a <strong>status</strong> query param in the URL.</p>

<table>
  <thead>
      <tr>
          <th style="width: 50%" colspan="2">Query params</th>
      </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right; font-weight: bold;">status:</td>
      <td><strong>String</strong><br/>
          The status value can be one of:
          <ul>
            <li>&status=SUCCESS</li>
            <li>&status=FAILED</li>
          </ul>
          Only calls with requested STATUS will be present in the response.
      </td>
    </tr>
  </tbody>
</table>

<p><strong>Updating the status of calls to a callback</strong></p>

<p>As every call to a callback endpoint is now stored within the <code class="prettyprint">calls</code> endpoint, it&rsquo;s possible that when failed calls are successfully processed through a manual exercise, that these calls will then need to be updated to reflect the current status.</p>

<p>Take the following example:</p>

<ol>
<li>Callback server becomes unavailable.</li>
<li>A message is sent via Whispir with callbacks enabled.</li>
<li>The Message gets a response, and this triggers the callback</li>
<li>The callback server is unavailable, so the response is stored with a status of &#39;FAILED&rsquo;</li>
<li>After 24h, the callback server becomes available again.  Retries have stopped, so this information will not automatically flow into the callback server.</li>
<li>The customer writes a script to <code class="prettyprint">GET</code> all of the calls stored in the <code class="prettyprint">/calls</code> endpoint and process them.</li>
<li>Once successfully processed, the customer&rsquo;s script should update the contents of the <code class="prettyprint">/calls</code> endpoint to reflect the current status of &#39;SUCCESS&rsquo;.</li>
</ol>

<p>This process can be facilitated with the use of a <code class="prettyprint">PUT</code> request to the <code class="prettyprint">/calls</code> endpoint in Whispir.</p>

<blockquote>
<p>Updating the status of the calls within the /calls endpoint</p>

<blockquote>
<p>The following API Methods allow you to update callback attempts via the API</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 PUT https://api.&lt;region&gt;.whispir.com/callbacks/BCD374DABC73649B/calls?apikey=[YOUR_API_KEY]&amp;id=YOUR_CALL_ID
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.api-call-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:call</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;status&gt;</span>SUCCESS<span class="nt">&lt;/status&gt;</span>
<span class="nt">&lt;/ns2:call&gt;</span>

</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">api</span><span class="o">-</span><span class="n">call</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"SUCCESS"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The expected response code for this process is 204 - No Content.</p>
</blockquote>
</blockquote>

<p>To update a list of attempted API calls from the Whispir API you can execute an <strong>HTTP PUT</strong> using the <code class="prettyprint">/calls</code> endpoint on a specific <code class="prettyprint">callback</code>.</p>

<p>You will need to supply one of the following headers (for retrieving JSON or XML):</p>

<ul>
<li>Accept: application/vnd.whispir.api-call-v1+xml</li>
<li>Accept: application/vnd.whispir.api-call-v1+json</li>
</ul>

<p>The expected response code for this operation is <strong>204 - No Content</strong></p>

<p>Users can specify multiple IDs to be updated using the following notation:</p>

<p><code class="prettyprint">/callbacks/:id/calls?id=ID1&amp;id=ID2&amp;id=ID3...</code></p>

<p>This ensures that all callbacks that have been processed can be updated in a single API call, rather than having to make a single API call per callback attempt.</p>

<p>The <strong>PUT</strong> request takes a single API parameter in the body:</p>

<table>
  <thead>
      <tr>
          <th style="width: 50%" colspan="2">Request Elements</th>
      </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right; font-weight: bold;">status:</td>
      <td><strong>String</strong><br/>
          The status to update the attempted calls to:
          <ul>
            <li>SUCCESS</li>
            <li>FAILED</li>
          </ul>
      </td>
    </tr>
  </tbody>
</table>

<h2 id="callback-parameters">Callback Parameters</h2>

<blockquote>
<p>Callback Parameters within a Callback Response</p>

<blockquote>
<p>a single callback parameter</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="p">{</span><span class="x">
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test SMS"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the SMS"</span><span class="p">,</span><span class="x">
   </span><span class="s">"callbackId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Sample Callback 1"</span><span class="p">,</span><span class="x">
   </span><span class="s">"callbackParameters"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"CustomID"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"890h0ef0fe09efw90e0jsdj0"</span><span class="x">
   </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test SMS<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;body&gt;</span>This is the SMS<span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;callbackId&gt;</span>Sample Callback 1<span class="nt">&lt;/callbackId&gt;</span>
    <span class="nt">&lt;callbackParameters&gt;</span>
      <span class="nt">&lt;entry&gt;</span>
        <span class="nt">&lt;key&gt;</span>CustomId<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;value&gt;</span>890h0ef0fe09efw90e0jsdj0<span class="nt">&lt;/value&gt;</span>
      <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;/callbackParameters&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>

<blockquote>
<blockquote>
<p>multiple callback parameters</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test SMS"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the SMS"</span><span class="p">,</span><span class="x">
   </span><span class="s">"callbackId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is my callback"</span><span class="p">,</span><span class="x">
   </span><span class="s">"callbackParameters"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"CustomID"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"890h0ef0fe09efw90e0jsdj0"</span><span class="p">,</span><span class="x">
      </span><span class="s">"CustomID2"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"9ef0fe09efw90e0jsdjsd43fw"</span><span class="x">
   </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test SMS<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;body&gt;</span>This is the SMS<span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;callbackId&gt;</span>Sample Callback 1<span class="nt">&lt;/callbackId&gt;</span>
    <span class="nt">&lt;callbackParameters&gt;</span>
      <span class="nt">&lt;entry&gt;</span>
        <span class="nt">&lt;key&gt;</span>CustomId<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;value&gt;</span>890h0ef0fe09efw90e0jsdj0<span class="nt">&lt;/value&gt;</span>
      <span class="nt">&lt;/entry&gt;</span>
      <span class="nt">&lt;entry&gt;</span>
        <span class="nt">&lt;key&gt;</span>CustomId2<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;value&gt;</span>9ef0fe09efw90e0jsdjsd43fw<span class="nt">&lt;/value&gt;</span>
      <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;/callbackParameters&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>

<p>The callback API allows you to pass in any values (parameters), which you want to be returned as is - included in the callback response.</p>

<p>To explain this in a simple scenario driven terms;</p>

<ul>
<li>App sends a POST /messages request to Whispir for sending a message to the Customer</li>
<li>App gets a location, messageid with responseCode as <code class="prettyprint">202</code>. Means the message is received by Whispir successfully.</li>
<li>Whispir Queues the request and executes it at the next execution cycle (usually immediate)</li>
</ul>

<p>then</p>

<ul>
<li>Customer receives the message and responds to it</li>
<li>Whispir receives the message and pushes the response to App via the callback URI</li>
</ul>

<p>then</p>

<ul>
<li>App needs to identify who is the customer that has responded</li>
<li>App uses the messageid provided earlier (in step 2) to cross check and identify</li>
</ul>

<p>As evident in the scenario, messageid plays a key role in identifying the message – response chain.</p>

<p>However, rather than using just the Whispir provided messageid, the App can send in its own free-will callback parameters like</p>

<ul>
<li>customerID or</li>
<li>an unique hash that corresponds to a specific transaction, or</li>
<li>just about anything that can be a unique value in the perspective of your App.</li>
</ul>

<p>Whispir shall take note of these callback parameters, and when the response is returned via the callback URI, these parameters are included into the payload and sent as <code class="prettyprint">callbackParameters</code> which is an object. This makes it easy for the App to identify the user data from the single / multiple / follow-on response of a conversation.</p>

<p>The data provided via the ‘callbackParameters&rsquo; is set as:
 - in JSON as</p>

<p><code class="prettyprint">{ Key : Value }</code></p>

<ul>
<li>in XML as</li>
</ul>

<p><code class="prettyprint">
&lt;entry&gt;
  &lt;key&gt;
  &lt;value&gt;
&lt;/entry&gt;
</code></p>

<p>If there are more than one set of values, the data shall be set as:</p>

<ul>
<li>in JSON as</li>
</ul>

<p><code class="prettyprint">{ Key : Value }, { Key : Value }</code></p>

<ul>
<li>in XML as</li>
</ul>

<p><code class="prettyprint">
&lt;entry&gt;
  &lt;key&gt;
  &lt;value&gt;
&lt;/entry&gt;
</code>
<code class="prettyprint">
&lt;entry&gt;
  &lt;key&gt;
  &lt;value&gt;
&lt;/entry&gt;
</code></p>

<h3 id="receiving-them-in-response">Receiving them in Response</h3>
<pre><code class="highlight go"><span class="n">HTTP</span><span class="x"> </span><span class="m">1.1</span><span class="x"> </span><span class="n">POST</span><span class="x"> </span><span class="n">https</span><span class="o">:</span><span class="c">//yourserver/callback.php</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"messageid"</span><span class="o">:</span><span class="s">"ABC4857BCCF4CA"</span><span class="p">,</span><span class="x">
    </span><span class="s">"location"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/messages/ABC4857BCCF4CA"</span><span class="p">,</span><span class="x">
    </span><span class="s">"from"</span><span class="o">:</span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="s">"Fred Waters"</span><span class="p">,</span><span class="x">
          </span><span class="s">"mri"</span><span class="o">:</span><span class="s">"Fred_Waters.528798.Sandbox@Contact.whispir.com"</span><span class="p">,</span><span class="x">
          </span><span class="s">"mobile"</span><span class="o">:</span><span class="s">"0430984567"</span><span class="p">,</span><span class="x">
          </span><span class="s">"email"</span><span class="o">:</span><span class="s">"imacros@test.com"</span><span class="p">,</span><span class="x">
          </span><span class="s">"voice"</span><span class="o">:</span><span class="s">"0761881564"</span><span class="x">
         </span><span class="p">},</span><span class="x">
    </span><span class="s">"responseMessage"</span><span class="o">:</span><span class="p">{</span><span class="x">
           </span><span class="s">"channel"</span><span class="o">:</span><span class="s">"SMS"</span><span class="p">,</span><span class="x">
           </span><span class="s">"acknowledged"</span><span class="o">:</span><span class="s">"09/01/13 13:22"</span><span class="p">,</span><span class="x">
           </span><span class="s">"content"</span><span class="o">:</span><span class="s">"Yes, I accept. Will I need to bring steel cap boots?"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"customParameters"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"CustomerId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"890h0ef0fe09efw90e0jsdj0"</span><span class="p">,</span><span class="x">
        </span><span class="s">"TransactionId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"9ef0fe09efw90e0jsdjsd43fw"</span><span class="p">,</span><span class="x">
        </span><span class="o">...</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight xml">Content-Type: application/xml

<span class="nt">&lt;ns2:deliveryResponse</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;messageid&gt;</span>ABC4857BCCF484575FCA<span class="nt">&lt;/messageid&gt;</span>
  <span class="nt">&lt;messagelocation&gt;</span>https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/messages/ABC4857BCCF484575FCA<span class="nt">&lt;/messagelocation&gt;</span>
  <span class="nt">&lt;from&gt;</span>
      <span class="nt">&lt;name&gt;</span>Fred Waters<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;mri&gt;</span>Fred_Waters.528798.Sandbox@Contact.whispir.com<span class="nt">&lt;/mri&gt;</span>
      <span class="nt">&lt;mobile&gt;</span>$mobile<span class="nt">&lt;/mobile&gt;</span>
      <span class="nt">&lt;email&gt;</span>me@example.com<span class="nt">&lt;/email&gt;</span>
      <span class="nt">&lt;voice&gt;</span>$mobile<span class="nt">&lt;/voice&gt;</span>
  <span class="nt">&lt;/from&gt;</span>
  <span class="nt">&lt;responseMessage&gt;</span>
      <span class="nt">&lt;channel&gt;</span>SMS<span class="nt">&lt;/channel&gt;</span>
      <span class="nt">&lt;acknowledged&gt;</span>09/01/13 13:22<span class="nt">&lt;/acknowledged&gt;</span>
      <span class="nt">&lt;content&gt;</span>Yes, I accept. Will I need to bring steel cap boots?<span class="nt">&lt;/content&gt;</span>
  <span class="nt">&lt;/responseMessage&gt;</span>
  <span class="nt">&lt;customParameters&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>CustomerId<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>890h0ef0fe09efw90e0jsdj0<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>TransactionId<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>9ef0fe09efw90e0jsdjsd43fw<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    ...
  <span class="nt">&lt;/customParameters&gt;</span>
<span class="nt">&lt;/ns2:deliveryResponse&gt;</span>
</code></pre>

<p>When the callback is invoked for a reply/delivery failure, the callbackParameters passed are sent in the response call to your callback server.</p>

<p>An important point to note is that - these values shall be part of <code class="prettyprint">customParameters</code> object. The response does not contain the <code class="prettyprint">callbackParameters</code> object. The naming convention could be a bit confusing at times, but the naming convention is kept from logical premise.</p>

<ul>
<li>You are passing in parameters that are custom to a specific message in the /messages call. The parameters are sent included in the callback object. So, you include them in the callbackParameters at source and when you receive them, you get them as <code class="prettyprint">customParameters</code>. the way they are intended. <code class="prettyprint">while(1) { read again; }</code> :)</li>
</ul>

<p><em>Note</em>:</p>

<ul>
<li>The calling App can supply any number of callback parameters.</li>
<li>The information will be passed back to the application every time a response is triggered.</li>
<li>The response type will always be string, even when an integer is used.</li>
<li>Apart from the callback parameters specified in the /messages request, the API also gives other set of values, that are used to process it.</li>
</ul>

<h2 id="custom-parameters">Custom Parameters</h2>

<p>Custom Parameters are different from callbackParameters. To make it clear again -</p>

<ul>
<li>callbackParameters is used by you in /messages endpoint to pass in any custom values that you need to receive back in the callback response</li>
<li>customParameters in used by Whispir in the callback response to pass back the callbackParameters (and other values) that you have passed in earlier</li>
</ul>

<p>This is important, so you may read that again now, or have a coffee and read it in 10 mins. I needed a chocolate to get that going. ;)</p>

<p>Custom Parameters are included in the response object of a callback POST that Whispir makes to your server. These parameters contain important information about</p>

<ul>
<li>the dynamically processed values that whispir used to fulfill your request (the sender, receiver channels, timestamps, and destination email address or phone number)</li>
<li>the message response rule, and condition that was applied to the response (refer to <a href="/#matched-rule">Matched Rules</a>)</li>
<li>the callbackParameters (refer to <a href="/#callback-parameters">Callback Parameters</a>)</li>
</ul>

<p>In Detail -</p>

<ul>
<li><strong>the dynamically processed values that whispir used to fulfill your request</strong></li>
</ul>

<p>Whispir allows <a href="https://whispir.github.io/api/#dynamic-messages">bulk messaging or dynamic messaging</a> via the /resources and /messages endpoint. When you use that, you would need to know the processed values that are used by Whispir to replace the @@placeholders@@ used in that specific message template against each row of your csv, json, xml data.</p>

<p>To facilitate that Whispir gives those values in the callback response under customParameters. The list of custom Parameters provided by Whispir are -</p>
<pre><code class="highlight go"><span class="s">"customParameters"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="s">"sender_full_name"</span><span class="o">:</span><span class="x"> </span><span class="s">"John Wick"</span><span class="p">,</span><span class="x">
  </span><span class="s">"sender_first_name"</span><span class="o">:</span><span class="x"> </span><span class="s">"John"</span><span class="p">,</span><span class="x">
  </span><span class="s">"sender_last_name"</span><span class="o">:</span><span class="x"> </span><span class="s">"Wick"</span><span class="p">,</span><span class="x">
  </span><span class="s">"sender_sms"</span><span class="o">:</span><span class="x"> </span><span class="s">"614235552323"</span><span class="p">,</span><span class="x">
  </span><span class="s">"sender_email"</span><span class="o">:</span><span class="x"> </span><span class="s">"JohnWick@example.com"</span><span class="p">,</span><span class="x">
  </span><span class="s">"recipient_full_name"</span><span class="o">:</span><span class="x"> </span><span class="s">"John Wick"</span><span class="p">,</span><span class="x">
  </span><span class="s">"recipient_first_name"</span><span class="o">:</span><span class="x"> </span><span class="s">"John"</span><span class="p">,</span><span class="x">
  </span><span class="s">"recipient_last_name"</span><span class="o">:</span><span class="x"> </span><span class="s">"Wick"</span><span class="p">,</span><span class="x">
  </span><span class="s">"recipient_sms"</span><span class="o">:</span><span class="x"> </span><span class="s">"6593556682"</span><span class="p">,</span><span class="x">
  </span><span class="s">"recipient_email"</span><span class="o">:</span><span class="x"> </span><span class="s">"jWick@whispir.com"</span><span class="p">,</span><span class="x">
  </span><span class="s">"recipient_voice"</span><span class="o">:</span><span class="x"> </span><span class="s">"6593556682"</span><span class="p">,</span><span class="x">
  </span><span class="s">"date"</span><span class="o">:</span><span class="x"> </span><span class="s">"2016-03-04"</span><span class="p">,</span><span class="x">
  </span><span class="s">"time"</span><span class="o">:</span><span class="x"> </span><span class="s">"10:36"</span><span class="p">,</span><span class="x">
  </span><span class="s">"yyyy"</span><span class="o">:</span><span class="x"> </span><span class="s">"2016"</span><span class="p">,</span><span class="x">
  </span><span class="s">"month"</span><span class="o">:</span><span class="x"> </span><span class="s">"March"</span><span class="p">,</span><span class="x">
  </span><span class="s">"day"</span><span class="o">:</span><span class="x"> </span><span class="s">"Friday"</span><span class="p">,</span><span class="x">
  </span><span class="s">"yy"</span><span class="o">:</span><span class="x"> </span><span class="s">"16"</span><span class="p">,</span><span class="x">
  </span><span class="s">"mm"</span><span class="o">:</span><span class="x"> </span><span class="s">"03"</span><span class="p">,</span><span class="x">
  </span><span class="s">"dd"</span><span class="o">:</span><span class="x"> </span><span class="s">"04"</span><span class="p">,</span><span class="x">
  </span><span class="s">"hrs"</span><span class="o">:</span><span class="x"> </span><span class="s">"10"</span><span class="p">,</span><span class="x">
  </span><span class="s">"min"</span><span class="o">:</span><span class="x"> </span><span class="s">"36"</span><span class="p">,</span><span class="x">
  </span><span class="s">"sec"</span><span class="o">:</span><span class="x"> </span><span class="s">"01"</span><span class="p">,</span><span class="x">
  </span><span class="s">"matchedCategory"</span><span class="o">:</span><span class="x"> </span><span class="s">"Reserved"</span><span class="p">,</span><span class="x">
  </span><span class="s">"responseRule"</span><span class="o">:</span><span class="x"> </span><span class="s">"Reserved Words"</span><span class="p">,</span><span class="x">
  </span><span class="s">"first_name"</span><span class="o">:</span><span class="x"> </span><span class="s">"John"</span><span class="p">,</span><span class="x">
  </span><span class="s">"last_name"</span><span class="o">:</span><span class="x"> </span><span class="s">"Wick"</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></code></pre>
<pre><code class="highlight xml"><span class="nt">&lt;customParameters&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>sender_full_name<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>John Wick<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>sender_first_name<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>John<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>sender_last_name<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>Wick<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>sender_sms<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>614235552323<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>sender_email<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>JohnWick@example.com<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>recipient_full_name<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>John Wick<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>recipient_first_name<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>John<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>recipient_last_name<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>Wick<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>recipient_sms<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>6593556682<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>recipient_email<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>jWick@whispir.com<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>recipient_voice<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>6593556682<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>date<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>2016-03-04<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>time<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>10:36<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>yyyy<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>2016<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>month<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>March<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>day<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>Friday<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>yy<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>16<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>mm<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>03<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>dd<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>04<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>hrs<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>10<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>min<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>36<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>sec<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>01<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>matchedCategory<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>Reserved<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>responseRule<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>Reserved Words<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>first_name<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>John<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
      <span class="nt">&lt;key&gt;</span>last_name<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>Wick<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
<span class="nt">&lt;/customParameters&gt;</span>
</code></pre>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Custom Parameters</th>
        </tr>
    </thead>
    <tbody>
    <tr>
      <td style="text-align: right; font-weight: bold;">sender_full_name:</td>
      <td><strong>String</strong><br/>
        Specifies the full name of the sender. This is the name of the user account that was used to make the API call.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">sender_first_name:</td>
      <td><strong>String</strong><br/>
      Specifies the first name of the sender account.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">sender_last_name:</td>
      <td><strong>String</strong><br/>
      Specifies the last name of the sender account.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">sender_sms:</td>
      <td><strong>String</strong><br/>
      Specifies the phone number of the sender account.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">sender_email:</td>
      <td><strong>String</strong><br/>
        Specifies the email address of the sender. This is email address of the user account that was used to make the API call.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">recipient_full_name:</td>
      <td><strong>String</strong><br/>
        Specifies the full name of the recipient. If only the recipient is already a contact/user in the Whispir Platform under your account.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">recipient_first_name:</td>
      <td><strong>String</strong><br/>
      Specifies the first name of the recipient account. If only the recipient is already a contact/user in the Whispir Platform under your account.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">recipient_last_name:</td>
      <td><strong>String</strong><br/>
      Specifies the last name of the recipient account. If only the recipient is already a contact/user in the Whispir Platform under your account.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">recipient_sms:</td>
      <td><strong>String</strong><br/>
      Specifies the phone number of the recipient. If only the channel is SMS or the recipient is already a contact/user in the Whispir Platform under your account.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">recipient_email:</td>
      <td><strong>String</strong><br/>
        Specifies the email address of the recipient. If only the channel is EMAIL or the recipient is already a contact/user in the Whispir Platform under your account
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">recipient_voice:</td>
      <td><strong>String</strong><br/>
        Specifies the phone number of the recipient. If only the channel is SMS/Voice or the recipient is already a contact/user in the Whispir Platform under your account
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">date:</td>
      <td><strong>String</strong><br/>
        Specifies the date value in YYYY-MM-DD format. <br><br>  Ex. 2016-03-04.<br><br>   This is the date when the message was sent. This helps to know the sent date when the message is a <a href="/#schedule-delivery">SCHEDULED</a> message
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">time:</td>
      <td><strong>String</strong><br/>
        Specifies the time value in HH:MI format. <br> <br>  Ex. 10:36. <br><br>  This is the time when the message was sent. This helps to know the sent time when the message is a <a href="/#schedule-delivery">SCHEDULED</a> message
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">Individual broken-down values for Date and Time:</td>
      <td><strong>String</strong><br/>
        Apart from the date and time values above, the API also provides broken down values for use. <br><br>
        <ul>
          <li>yyyy - year (in 4 digit format) <b>Eg.</b> 2016</li>
          <li>month - month (in full month name format) <b>Eg.</b> March</li>
          <li>day - day (in full week day format) <b>Eg.</b> Tuesday</li>
        </ul>
        <br>
        <ul>
          <li>yy - year (in 2 digit format) <b>Eg.</b> 16</li>
          <li>mm - month <b>Eg.</b> 03</li>
          <li>dd - date <b>Eg.</b> 08</li>
        </ul>
        <ul>
          <li>hrs - hours <b>Eg.</b> 16</li>
          <li>min - minutes <b>Eg.</b> 39</li>
          <li>sec - seconds <b>Eg.</b> 50</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<h2 id="example-flow">Example Flow</h2>

<p>Imagine a workflow where the same user gets more than 1 message in a quick time frame, how does whispir know &ldquo;to which message did this user respond to ?&rdquo;.</p>

<p>Explanation -</p>

<ul>
<li><p>For communications sent via Email, or web, Whispir has a clear 1:1 relationship, ensuring each outbound communication is unique, with any reply to that communication (regardless of the order of response, or length of time between message send and response) be threaded against the original outbound message.</p></li>
<li><p>For communications sent via SMS, things get slightly more complex.  Whispir uses a pool of mobile numbers, with Whispir retaining knowledge as to which recipient SMS was sent which message via whispir pool number.  This provides Whispir the ability to know which reply from which recipient is for which initial outbound message – it’s pretty clever. The only challenge is where you have very high volumes of messages being issued to the same recipient (e.g. a new sms sent to the same number every 5 minutes), and the list of pool numbers is exhausted with Whispir needing to re-use pool numbers.  This is a highly unlikely communication use case, but a principal which needs to be understood.</p></li>
</ul>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$mobile"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Whispir"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello there. Reply Y"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"callbackId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"callbackA"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$mobile"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Whispir"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goodbye. Reply Y"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"callbackId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"callbackB"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="scenario-1:">Scenario 1:</h3>

<p>Assuming in a span of 10 seconds, these 2 SMSes were sent</p>

<p>If user $mobile replies “Y”, which callbackId would be called ?</p>

<ul>
<li>Two separate messages are sent to the same mobile number, with the both including a callbackid.</li>
<li>Each message will have been received by the recipient via two different sender numbers.</li>
<li>Assuming the recipient responds to the first message they received, Whispir will trigger the callback ‘callbackA’.</li>
<li>If they respond to the second message they received, Whispir will trigger the callback ‘callbackB’</li>
</ul>

<h3 id="scenario-2:">Scenario 2:</h3>

<blockquote>
<blockquote>
<p>SMS sent:</p>
</blockquote>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$mobile"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Whispir"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello there. Reply Y"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"callbackId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"callbackA"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<blockquote>
<p>Another SMS sent half hour later (#scenario 2):</p>
</blockquote>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$mobile"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Whispir"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goodbye. Reply Y"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"callbackId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"callbackB"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>If user $mobile replies “Y”, which callbackId would be called?</p>

<ul>
<li>Two separate messages are sent to the same mobile number with a gap of 30 mins, with the both including a callbackid.</li>
<li>Each message will have been received by the recipient via two different sender numbers.</li>
<li>Assuming the recipient responds to the first message they received, Whispir will trigger the callback ‘callbackA’.</li>
<li>If they respond to the second message they received, Whispir will trigger the callback ‘callbackB’</li>
</ul>

<h3 id="scenario-3:">Scenario 3:</h3>

<blockquote>
<blockquote>
<p>SMS sent (#scenario 3):</p>
</blockquote>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$mobile"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Whispir"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello there. Reply Y"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"callbackId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"callbackA"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>User $mobile replies “Y” half hour later, would the callbackId still be relevant?</p>

<ul>
<li>Assuming this was the only message sent to the recipient in the 30 minutes, the response will trigger the callback ‘callbackA’</li>
</ul>

<p>How about 1 hour, 2 hours later?</p>

<ul>
<li>The duration between when the message is sent, and the reply received has no significance.</li>
<li>The challenge in matching outbound messages and their inbound responses is only relevant when the entire pool of numbers (which continues to grow) is exhausted.</li>
<li>Recipients can respond days (max 7) after the message send out occurred and Whispir will still track the correct message that the reply is relevant to.</li>
</ul>

        <h1 id="apps">Apps</h1>

<p>Apps serve as the Mobile App definition endpoints, where you one can register their Mobile App at Whispir, and be able to do the push notifications with the help of <code class="prettyprint">/messages</code>, <code class="prettyprint">/contacts</code> and <code class="prettyprint">devices</code> endpoints.</p>

<p>The endpoint serves the need for </p>

<ul>
<li>Whispir to store the Push Notifications credentials to facilitate Push. The entity to store this within Whispir is an &lsquo;App&rsquo;.</li>
<li>Your Company Administrators need visibility over the Apps that are present within the company.</li>
</ul>

<blockquote>
<p>API Endpoint</p>

<blockquote>
<p>Apps exist at Company level, and are then made available to workspaces. So, there is no workspace-id to be provided in the URL.</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/apps?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.app-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/apps?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">app</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">&gt; Resource type

- application/vnd.whispir.app-v1+xml
- application/vnd.whispir.app-v1+json


&gt; Methods supported

- GET
- POST
- PUT
- DELETE
</code></pre>

<p>To understand the relationship between your app and Whispir endpoints, refer to this image.</p>

<p><br/><p style="text-align: left"><img src="images/Push-relationship.png"/><br/></p></p>

<h2 id="registering-an-app">Registering an App</h2>

<p>App registration is a one time process, and once created, the app information can be used to register the pushTokens as devices (under contacts), and use the contact mri value to send the push messages to the app.</p>
<pre><code class="highlight plaintext">POST https://api.&lt;region&gt;.whispir.com/apps?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.app-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:app</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>My Push App<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;description&gt;</span>Description of the App<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;bundleId&gt;</span>com.your.bundleId<span class="nt">&lt;/bundleId&gt;</span>
    <span class="nt">&lt;options&gt;</span>
        <span class="nt">&lt;apiKey&gt;</span>A valid UUID value<span class="nt">&lt;/apiKey&gt;</span>
        <span class="nt">&lt;clientSecret&gt;</span>A valid UUID value without the `-` dashes<span class="nt">&lt;/clientSecret&gt;</span>
        <span class="nt">&lt;deviceLimit&gt;</span>3<span class="nt">&lt;/deviceLimit&gt;</span>
        <span class="nt">&lt;workspaces&gt;</span>46FEEB0398DDCE9A<span class="nt">&lt;/workspaces&gt;</span>
        <span class="nt">&lt;contactDescriptionField&gt;</span>role<span class="nt">&lt;/contactDescriptionField&gt;</span>
    <span class="nt">&lt;/options&gt;</span>
    <span class="nt">&lt;apns&gt;</span>
        <span class="nt">&lt;certificate&gt;&lt;/certificate&gt;</span>
        <span class="nt">&lt;privateKey&gt;&lt;/privateKey&gt;</span>
    <span class="nt">&lt;/apns&gt;</span>
    <span class="nt">&lt;apnsSandbox&gt;</span>
        <span class="nt">&lt;certificate&gt;&lt;/certificate&gt;</span>
        <span class="nt">&lt;privateKey&gt;&lt;/privateKey&gt;</span>
    <span class="nt">&lt;/apnsSandbox&gt;</span>
    <span class="nt">&lt;defaultWorkspaceEnabled&gt;</span>true<span class="nt">&lt;/defaultWorkspaceEnabled&gt;</span>
    <span class="nt">&lt;gcm&gt;</span>
        <span class="nt">&lt;gcmProjectNumber&gt;</span>0<span class="nt">&lt;/gcmProjectNumber&gt;</span>
        <span class="nt">&lt;gcmSenderNumber&gt;</span>0<span class="nt">&lt;/gcmSenderNumber&gt;</span>
        <span class="nt">&lt;gcmApiKey&gt;</span>GCM provided API Key<span class="nt">&lt;/gcmApiKey&gt;</span>
    <span class="nt">&lt;/gcm&gt;</span>
    <span class="nt">&lt;defaultWorkspaceEnabled&gt;</span>true<span class="nt">&lt;/defaultWorkspaceEnabled&gt;</span>
    <span class="nt">&lt;managedBySystem&gt;</span>false<span class="nt">&lt;/managedBySystem&gt;</span>
    <span class="nt">&lt;registrationTypes&gt;</span>SELF<span class="nt">&lt;/registrationTypes&gt;</span>
<span class="nt">&lt;/ns2:app&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">app</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
 </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"string"</span><span class="p">,</span><span class="x">
 </span><span class="s">"description"</span><span class="o">:</span><span class="x"> </span><span class="s">"string"</span><span class="p">,</span><span class="x">
 </span><span class="s">"bundleId"</span><span class="o">:</span><span class="x"> </span><span class="s">"string"</span><span class="x">
 </span><span class="s">"options"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"apikey"</span><span class="o">:</span><span class="x"> </span><span class="s">"string"</span><span class="p">,</span><span class="x">
    </span><span class="s">"clientSecret"</span><span class="o">:</span><span class="x"> </span><span class="s">"string"</span><span class="p">,</span><span class="x">
    </span><span class="s">"deviceLimit"</span><span class="o">:</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x">
    </span><span class="s">"workspaces"</span><span class="o">:</span><span class="x"> </span><span class="s">"string"</span><span class="p">,</span><span class="x">
    </span><span class="s">"contactDescriptionField"</span><span class="o">:</span><span class="x"> </span><span class="s">"string"</span><span class="x">
 </span><span class="p">},</span><span class="x">
 </span><span class="s">"apns"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"certificate"</span><span class="o">:</span><span class="x"> </span><span class="s">"string"</span><span class="p">,</span><span class="x">
    </span><span class="s">"privateKey"</span><span class="o">:</span><span class="x"> </span><span class="s">"string"</span><span class="x">
 </span><span class="p">},</span><span class="x">
 </span><span class="s">"apnsSandbox"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"certificate"</span><span class="o">:</span><span class="x"> </span><span class="s">"string"</span><span class="p">,</span><span class="x">
    </span><span class="s">"privateKey"</span><span class="o">:</span><span class="x"> </span><span class="s">"string"</span><span class="x">
 </span><span class="p">},</span><span class="x">
 </span><span class="s">"gcm"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"gcmProjectId"</span><span class="o">:</span><span class="x"> </span><span class="s">"string"</span><span class="p">,</span><span class="x">
    </span><span class="s">"gcmSenderNumber"</span><span class="o">:</span><span class="x"> </span><span class="s">"string"</span><span class="p">,</span><span class="x">
    </span><span class="s">"gcmApiKey"</span><span class="o">:</span><span class="x"> </span><span class="s">"string"</span><span class="x">
 </span><span class="p">},</span><span class="x">
 </span><span class="s">"defaultWorkspaceEnabled"</span><span class="o">:</span><span class="x"> </span><span class="no">true</span><span class="p">,</span><span class="x">
 </span><span class="s">"managedBySystem"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="no">true</span><span class="p">,</span><span class="x">
 </span><span class="s">"registrationTypes"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="s">"SELF"</span><span class="x">
 </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The successful response will be a 201 with the details of the app created and its associated unique <code class="prettyprint">appID</code>. Also, for security reasons, Whispir will NOT show the APNS certificate information at any time post app creation. The API response will only show the certificateDate so that one can use that to update the certificate upon expiry.</p>
</blockquote>
</blockquote>

<p>Almost all the fields are mandatory. So, please ensure the information is provided properly.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">name:</td>
            <td><strong>String</strong><br/>
                Specifies the name of the application
            </td>
            <td>
                <b>Required.</b> Alphanumeric. Max length: 32 <br>
                <b>Sample:</b> My Awesome Application
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">description:</td>
            <td><strong>String</strong><br/>
                The description of the application for display within Whispir and whispir.io 
            </td>
            <td>
                Not Required. Alphanumeric. No max length. Default: &ldquo;&rdquo; <br>
                <b>Sample:</b> App for sending messages to My Awesome App
            </td>
        </tr><tr>
            <td style="text-align: right; font-weight: bold;">bundleId:</td>
            <td><strong>String</strong><br/>
                The bundle Id of your application 
            </td>
            <td>
                Required. Alphanumeric. No max length. Default: &ldquo;&rdquo; <br>
                <b>Sample:</b> com.pushie.whispir
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">options.apiKey:</td>
            <td><strong>string</strong><br/>
                A unique username tied to this app for usage monitoring purposes
            </td>
            <td>
                Not Required. Alphanumeric. Generated if not provided <br>
                <b>Sample:</b> dfsdfsfds09fds-asdf9dsf-asdf9dfsa
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">options.clientSecret:</td>
            <td><strong>string</strong><br/>
                The password tied to the apiKey and used by this app for usage monitoring purposes
            </td>
            <td>
                Not Required. Alphanumeric. Max length 64 chars. Can use `.` as special character <br>
                <b>Sample:</b> dfsdfsfds09fds.lkrt
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">options.deviceLimit:</td>
            <td><strong>Numeric</strong><br/>
                The number of devices that are allowed to be registered under a single contact per app
            </td>
            <td>
                Not Required. Numeric. Default: 3 <br>
                <b>Sample:</b> 3
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">options.workspaces:</td>
            <td><strong>String</strong><br/>
                The comma separated list of Workspace IDs that will make this application usable/visible for messages sendout in those workspaces.
            </td>
            <td>
                Not Required. Alphanumeric. No max length. Default: &ldquo;&rdquo; <br>
                <b>Sample:</b> <a-workspace-id>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">options.contactDescriptionField:</td>
            <td><strong>String</strong><br/>
                The field on the contact profile that should be used to distinguish between contacts with the same name within the user list (mobile applications only).

<br> E.g. if you call the /app/users endpoint and receive 3 people named 'John Smith&rsquo;, how does a user differentiate between them? The contactDescriptionField provides a secondary mechanism to display a 'Role&rsquo;, 'JobTitle&rsquo; or 'BusinessUnit&rsquo; to help distinguish between similar contacts.
            </td>
            <td>
                Not Required. Alphanumeric. No max length. Default: &ldquo;&rdquo;. <br> <b>Note:</b> should reference a Whispir Contact Profile Field. <br>
                <b>Sample:</b> jobTitle
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">apns.certificate:</td>
            <td><strong>String</strong><br/>
                The APNS Push Notifications certificate that has downloaded from the iOS developer console
            </td>
            <td>
                Single line. Alphanumeric. No max length. Default: &ldquo;&rdquo; <br>
                <b>Sample:</b> &mdash;&ndash;BEGIN CERTIFICATE&mdash;&ndash;\nMIIGSjCCBTKgAwIBAgIICdjQ9d41eiYwDQYJKoZIhvcNAQELBQAwgZYxCzAJ&hellip;..\n&mdash;&ndash;END CERTIFICATE&mdash;&ndash; <br>
                <b>IMP:</b> You must ensure that the value is provided in a single line only with the use of `\n` to specify the line breaks just after the BEGIN CERTIFICATE&mdash;- and before the &mdash;&ndash;END CERTIFICATE. If you have .p12, then use any of the valid converter tools to extract the certificate, and private key correctly. An Incorrect value will lead to failure of app creation.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">apns.privateKey:</td>
            <td><strong>String</strong><br/>
                The APNS Push Notifications private key from the certificate chain that was downloaded from the iOS developer console
            </td>
            <td>
                Single line. Alphanumeric. No max length. Default: &ldquo;&rdquo; <br>
                <b>Sample:</b> &mdash;&ndash;BEGIN PRIVATE KEY&mdash;&ndash;\nMIIGSjCCBTKgAwIBAgIICdjQ9d41eiYwDQYJKoZIhvcNAQELBQAwgZYxCzAJ&hellip;..\n&mdash;&ndash;END PRIVATE KEY&mdash;&ndash; <br>
                <b>IMP:</b> You must ensure that the value is provided in a single line only with the use of `\n` to specify the line breaks just after the BEGIN PRIVATE KEY&mdash;- and before the &mdash;&ndash;END PRIVATE KEY. An Incorrect value will lead to failure of app creation.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">apnsSandbox.certificate:</td>
            <td><strong>String</strong><br/>
                The APNS Push Notifications Sandbox certificate that has downloaded from the iOS developer console
            </td>
            <td>
                Single line. Alphanumeric. No max length. Default: &ldquo;&rdquo; <br>
                <b>Sample:</b> &mdash;&ndash;BEGIN CERTIFICATE&mdash;&ndash;\nMIIGSjCCBTKgAwIBAgIICdjQ9d41eiYwDQYJKoZIhvcNAQELBQAwgZYxCzAJ&hellip;..\n&mdash;&ndash;END CERTIFICATE&mdash;&ndash; <br>
                <b>IMP:</b> You must ensure that the value is provided in a single line only with the use of `\n` to specify the line breaks just after the BEGIN CERTIFICATE&mdash;- and before the &mdash;&ndash;END CERTIFICATE. If you have .p12, then use any of the valid converter tools to extract the certificate, and private key correctly. An Incorrect value will lead to failure of app creation.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">apnsSandbox.privateKey:</td>
            <td><strong>String</strong><br/>
                The APNS Push Notifications Sandbox private key from the certificate chain that was downloaded from the iOS developer console
            </td>
            <td>
                Single line. Alphanumeric. No max length. Default: &ldquo;&rdquo; <br>
                <b>Sample:</b> &mdash;&ndash;BEGIN PRIVATE KEY&mdash;&ndash;\nMIIGSjCCBTKgAwIBAgIICdjQ9d41eiYwDQYJKoZIhvcNAQELBQAwgZYxCzAJ&hellip;..\n&mdash;&ndash;END PRIVATE KEY&mdash;&ndash; <br>
                <b>IMP:</b> You must ensure that the value is provided in a single line only with the use of `\n` to specify the line breaks just after the BEGIN PRIVATE KEY&mdash;- and before the &mdash;&ndash;END PRIVATE KEY. An Incorrect value will lead to failure of app creation.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">gcm.gcmProjectId:</td>
            <td><strong>String</strong><br/>
                The Project ID from the Google Cloud Messaging Console
            </td>
            <td>
                Alphanumeric. No max length. Default: &ldquo;&rdquo; <br>
                <b>Sample:</b> My-Sample-Project
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">gcm.gcmSenderNumber:</td>
            <td><strong>String</strong><br/>
                The Sender ID from the Google Cloud Messaging Console
            </td>
            <td>
                Numeric. No max length. Default: &ldquo;&rdquo; <br>
                <b>Sample:</b> 1000202045211
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">gcm.gcmApiKey:</td>
            <td><strong>String</strong><br/>
                The GCM API Key from the Google Cloud Messaging Console
            </td>
            <td>
                AlphaNumeric. No max length. Default: &ldquo;&rdquo; <br>
                <b>Sample:</b> fcde7ecfdefc6defcfde7faacbd637ca
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">defaultWorkspaceEnabled:</td>
            <td><strong>String</strong><br/>
                Whether or not 'My Company&rsquo; should be supported within this application.
            </td>
            <td>
                Not Required. Boolean. Default: false <br>
                <b>Sample:</b> true
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">managedBySystem:</td>
            <td><strong>String</strong><br/>
                Whether or not this application has been automatically created by Whispir (vs created by a user).
            </td>
            <td>
                Not editable by a user. Generated field. <br>
                <b>Sample:</b> N/A
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">registrationTypes:</td>
            <td><strong>String</strong><br/>
                The array of registration types that are supported by this particular application 
                <ul>
                    <li>SELF</li>
                    <li>INVITE</li>
                </ul>
            </td>
            <td>
                <b>SELF:</b> Used for Apps, where Whispir is given the push Token readily by you. This is the common scenario for almost all the apps. <br>
                <b>INVITE:</b> Used for Apps, where Whispir&rsquo;s Mobile SDK is used inside your App, and it captures the push Token upon app Installation, and passes to Whispir for registration of the device.
            </td>
        </tr>
    </tbody>
</table>

<aside class="notice">
    Do NOT try to register both an APNS, APNS Sandbox and GCM app under a single app. Create separate apps. If not followed, this would result in failed Push Notifications.
</aside>

<h2 id="updating-an-app">Updating an App</h2>

<p>Updating an exisiting app is done via the PUT request on the <code class="prettyprint">/apps/{:aid}</code> endpoint. </p>

<p>Please remember that you do not need to pass on the APNS certificates every time, only do so, if there is a need to update the certificate values.</p>

<blockquote>
<p>Updating Apps</p>

<blockquote>
<p>The following endpoints allow users to update contact&rsquo;s devices using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 PUT https://api.&lt;region&gt;.whispir.com/apps/{:aid}?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.app-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:app</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id&gt;</span>521BBA863C2C230BD0E1BBA86<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;name&gt;</span>My Push App<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;description&gt;</span>Description of the App<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;options&gt;</span>
        <span class="nt">&lt;apiKey&gt;</span>A valid UUID value<span class="nt">&lt;/apiKey&gt;</span>
        <span class="nt">&lt;clientSecret&gt;</span>A valid UUID value without the `-` dashes<span class="nt">&lt;/clientSecret&gt;</span>
        <span class="nt">&lt;deviceLimit&gt;</span>3<span class="nt">&lt;/deviceLimit&gt;</span>
        <span class="nt">&lt;workspaces&gt;</span>46FEEB0398DDCE9A<span class="nt">&lt;/workspaces&gt;</span>
        <span class="nt">&lt;contactDescriptionField&gt;</span>jobTitle<span class="nt">&lt;/contactDescriptionField&gt;</span>
    <span class="nt">&lt;/options&gt;</span>
    <span class="nt">&lt;apns&gt;</span>
        <span class="nt">&lt;certificateDate&gt;</span>2017-03-21T00:59:08.930Z<span class="nt">&lt;/certificateDate&gt;</span>
    <span class="nt">&lt;/apns&gt;</span>
    <span class="nt">&lt;apnsSandbox&gt;</span>
        <span class="nt">&lt;certificateDate&gt;</span>2017-03-21T00:59:08.930Z<span class="nt">&lt;/certificateDate&gt;</span>
    <span class="nt">&lt;/apnsSandbox&gt;</span>
    <span class="nt">&lt;defaultWorkspaceEnabled&gt;</span>true<span class="nt">&lt;/defaultWorkspaceEnabled&gt;</span>
    <span class="nt">&lt;gcm&gt;</span>
        <span class="nt">&lt;gcmProjectNumber&gt;</span>0<span class="nt">&lt;/gcmProjectNumber&gt;</span>
        <span class="nt">&lt;gcmSenderNumber&gt;</span>0<span class="nt">&lt;/gcmSenderNumber&gt;</span>
        <span class="nt">&lt;gcmApiKey&gt;</span>GCM provided API Key<span class="nt">&lt;/gcmApiKey&gt;</span>
    <span class="nt">&lt;/gcm&gt;</span>
    <span class="nt">&lt;defaultWorkspaceEnabled&gt;</span>true<span class="nt">&lt;/defaultWorkspaceEnabled&gt;</span>
    <span class="nt">&lt;managedBySystem&gt;</span>false<span class="nt">&lt;/managedBySystem&gt;</span>
    <span class="nt">&lt;registrationTypes&gt;</span>SELF<span class="nt">&lt;/registrationTypes&gt;</span>
<span class="nt">&lt;/ns2:app&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">app</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"521BBA863C2C230BD0E1BBA86"</span><span class="p">,</span><span class="x">
    </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"My Push App"</span><span class="p">,</span><span class="x">
    </span><span class="s">"description"</span><span class="o">:</span><span class="x"> </span><span class="s">"Description of the App"</span><span class="p">,</span><span class="x">
    </span><span class="s">"options"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"apiKey"</span><span class="o">:</span><span class="x"> </span><span class="s">"A valid UUID value"</span><span class="p">,</span><span class="x">
        </span><span class="s">"deviceLimit"</span><span class="o">:</span><span class="x"> </span><span class="s">"3"</span><span class="p">,</span><span class="x">
        </span><span class="s">"workspaces"</span><span class="o">:</span><span class="x"> </span><span class="s">"EBDCE9A46FE0398D"</span><span class="p">,</span><span class="x">
    </span><span class="s">"contactDescriptionField"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"jobTitle"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"gcm"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"gcmProjectNumber"</span><span class="o">:</span><span class="x"> </span><span class="m">0</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"apns"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"certificateDate"</span><span class="o">:</span><span class="x"> </span><span class="s">"2017-03-21T00:59:08.930Z"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"apnsSandbox"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"certificateDate"</span><span class="o">:</span><span class="x"> </span><span class="s">"2017-03-21T00:59:08.930Z"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"registrationTypes"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="s">"SELF"</span><span class="x">
    </span><span class="p">],</span><span class="x">
    </span><span class="s">"managedBySystem"</span><span class="o">:</span><span class="x"> </span><span class="no">false</span><span class="p">,</span><span class="x">
    </span><span class="s">"defaultWorkspaceEnabled"</span><span class="o">:</span><span class="x"> </span><span class="no">true</span><span class="p">,</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The response to the PUT request upon success is a <code class="prettyprint">204 No Content</code> with no content being provided.</p>
</blockquote>
</blockquote>

<h2 id="deleting-an-app">Deleting an App</h2>

<blockquote>
<p>Deleting an App</p>

<blockquote>
<p>The following statement allows users to delete an App using the Whispir API.  Please note, this app cannot be recovered back once deleted, and you must also ensure that the devices that are referreing to this App are also promptly either deleted or updated to refer to a new App.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 DELETE https://api.&lt;region&gt;.whispir.com/apps/{:aid}?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>

<p>Deleting an App can be performed using a DELETE request to the /apps/{:aid} endpoint. So, to perform this, one must be knowing the exact “link” associated with the app.</p>

<p>After performing this request, the response does not contain any information other than the headers as it is not necessary. </p>

<p>The response of <code class="prettyprint">204 No Content</code> is returned, indicating that the app is successfully deleted.</p>

<h2 id="important-note">Important Note</h2>

<p>The endpoint is purely tied to creation of Apps for push notifications. This endpoint has nothing to do with the Apps that you create in the Whispir.io to get your API Keys.</p>

        <h1 id="scenarios">Scenarios</h1>

<blockquote>
<p>API Endpoint</p>

<blockquote>
<ul>
<li>generic</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/scenarios/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.scenario-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/scenarios/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">scenario</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<ul>
<li>limited to a workspace</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/workspaces/{:id}/scenarios/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.scenario-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/workspaces/{:id}/scenarios/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">scenario</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">&gt; Resource type

- application/vnd.whispir.scenario-v1+xml
- application/vnd.whispir.scenario-v1+json


&gt; Methods supported

- GET
- POST
- PUT
- DELETE
</code></pre>

<p>Scenarios allows users to simplify the message delivery processes through automated one click communications. The process involves creating a fixed message Or a message template combined with a contact or a distribution list. When the scenario is executed, the message is sent to the contacts.</p>

<p>Such use cases are widely useful in emergency notification scenarios where time is of essence. Not just messages (text), one can trigger Email, Voice and Social Media posts too suitable for different target audience as part of the scenario process.</p>

<p><strong>Eg:</strong> &ldquo;A fire outbreak evacuation notification with escape path&rdquo; to all members of the office staff can be done much faster if a ready available message text and the handy distribution list of staff is created as a &ldquo;Scenario&rdquo;. A one click approach here shall trigger the evacuation order to all the staff immediately. No time is lost in composing, selecting the contacts etc. </p>

<p>The contacts can be picked as a static distribution list or a rule based dynamic distribution list, or just direct available numbers. This improves the effectiveness of the scenario&rsquo;s target group reach.</p>

<p>Not just an emergency, but any scenario where a fixed content/Rich Message has to be sent to a pool of contacts, Whispir&rsquo;s &ldquo;Scenario&rdquo; comes very handy.</p>

<h2 id="creating-a-new-scenario">Creating a new Scenario</h2>

<blockquote>
<p>Creating Scenario</p>

<blockquote>
<p>The following API calls allow users to create Scenarios using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/scenarios?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.scenario-v1+xml 

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:scenario</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Fire Evacuation Block A<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;description&gt;</span>Fire evacuation notification for A block residents<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;message&gt;</span>
        <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
        <span class="nt">&lt;subject&gt;</span>Fire Evacuation<span class="nt">&lt;/subject&gt;</span>
        <span class="nt">&lt;body&gt;</span>A fire has been detected at level 55. Please evacuate the building immediately. Please do not use the lifts.<span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/message&gt;</span>
<span class="nt">&lt;/ns2:scenario&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">scenario</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"title"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fire Evacuation Block A"</span><span class="p">,</span><span class="x">
    </span><span class="s">"description"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fire evacuation notification for A block residents"</span><span class="p">,</span><span class="x">
    </span><span class="s">"message"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
        </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fire Evacuation"</span><span class="p">,</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"A fire has been detected at level 55. Please evacuate the building immediately. Please do not use the lifts."</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>This will give a successful response [201] along with the details of newly created scenario.</p>
</blockquote>
</blockquote>

<p>A scenario is a combination of a message and contacts. So, its structure contains section for both message as well as contact information. API currently only supports creation of scenario with SMS as communication mode.</p>

<p>To create a scenario, you can use the /scenarios endpoint.</p>

<p>The following fields are required:</p>

<ol>
<li>name - name of the scenario</li>
<li>description - details of the scenario</li>
<li>message { to, subject, body }</li>
</ol>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">name:</td>
            <td><strong>String</strong><br/>
                Specifies the name of the scenario
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">description:</td>
            <td><strong>String</strong><br/>
                Specifies the description of the scenario
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">allowedUsers:</td>
            <td><strong>String</strong><br/>
                Specifies the usage permission - 
                <ul>
                    <li>EVERYONE</li>
                    <li>SELECTEDUSERS</li>
                </ul>
                <br>
                When SELECTEDUSERS is provided, then `allowedUserIds` shall contain the userID of the allowed users.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">allowedUserIds:</td>
            <td><strong>String</strong><br/>
                Specifies the comma separated list of users who can run this scenario.
                <br>
                Only contains value when the allowedUsers is set to `SELECTEDUSERS`
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">message:</td>
            <td><strong>Object</strong><br/>
                Specifies the messaging options 
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">to:</td>
            <td><strong>String</strong><br/>
                Specifies the phone number or mri or distribution list to which the message has to be sent
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">subject:</td>
            <td><strong>String</strong><br/>
                Specifies the subject of the message
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">body:</td>
            <td><strong>String</strong><br/>
                Specifies the body of the message
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">label:</td>
            <td><strong>String</strong><br/>
                Specifies the label for the message (to view during reporting)
            </td>
        </tr>
        
        <tr>
            <td style="text-align: right; font-weight: bold;">email:</td>
            <td><strong>Object</strong><br/>
                Email message that can be sent as part of this scenario
                <br>
                <ul>
                    <li>body: The main content of the email</li>
                    <li>footer: footer of the email</li>
                    <li>type: text/plain or text/html</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">voice:</td>
            <td><strong>Object</strong><br/>
                Similar to a text message, a voice call can also be triggered. This provides the necessary information for the channel.
                <br>
                <ul>
                    <li>header: header for message. This will be played before the subject</li>
                    <li>body: The main content of the message</li>
                    <li>footer: footer for the message. Played after the body. Usually contains a thank you note.</li>
                    <li>type: ConfCall:,ConfAccountNo:,ConfPinNo:,ConfModPinNo:,Pin:</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">web:</td>
            <td><strong>Object</strong><br/>
                Refer to <a href="https://whispir.github.io/api/?xml#web-and-social-messaging" title="web and social media messaging">web messaging</a>.
                The web message structure remains exactly the same
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">social:</td>
            <td><strong>Object</strong><br/>
                Refer to <a href="https://whispir.github.io/api/?xml#web-and-social-messaging" title="web and social media messaging">web messaging</a>
                The social message structure remains exactly the same
            </td>
        </tr>
    </tbody>
</table>

<h2 id="retrieving-scenarios">Retrieving Scenarios</h2>

<blockquote>
<p>Retrieving Scenario</p>

<blockquote>
<p>The following API calls allow users to retrieve scenarios using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/scenarios?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.scenario-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 2 of 2<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:scenarios&gt;</span>
        <span class="nt">&lt;ns2:scenario&gt;</span>
            <span class="nt">&lt;title&gt;</span>Emergency Comms - Fire<span class="nt">&lt;/title&gt;</span>
            <span class="nt">&lt;description&gt;</span>Scenario to use during fire evacuation<span class="nt">&lt;/description&gt;</span>
            <span class="nt">&lt;createdTime&gt;</span>2015-07-20T17:18:58+08:00<span class="nt">&lt;/createdTime&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:scenario&gt;</span>
        <span class="nt">&lt;ns2:scenario&gt;</span>
            <span class="nt">&lt;title&gt;</span>Scenario X<span class="nt">&lt;/title&gt;</span>
            <span class="nt">&lt;description&gt;</span>This is a scenario where a scenario is created<span class="nt">&lt;/description&gt;</span>
            <span class="nt">&lt;createdTime&gt;</span>2015-07-20T17:19:41+08:00<span class="nt">&lt;/createdTime&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/scenarios/6EE7F6F2E48B73B4?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:scenario&gt;</span>
    <span class="nt">&lt;/ns2:scenarios&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">scenario</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"scenarios"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"title"</span><span class="o">:</span><span class="x"> </span><span class="s">"Emergency Comms - Fire"</span><span class="p">,</span><span class="x">
      </span><span class="s">"description"</span><span class="o">:</span><span class="x"> </span><span class="s">"Scenario to use during fire evacuation"</span><span class="p">,</span><span class="x">
      </span><span class="s">"createdTime"</span><span class="o">:</span><span class="x"> </span><span class="m">1437383938000</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"title"</span><span class="o">:</span><span class="x"> </span><span class="s">"Scenario X"</span><span class="p">,</span><span class="x">
      </span><span class="s">"description"</span><span class="o">:</span><span class="x"> </span><span class="s">"This is a scenario where a scenario is created"</span><span class="p">,</span><span class="x">
      </span><span class="s">"createdTime"</span><span class="o">:</span><span class="x"> </span><span class="m">1437383981000</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/scenarios/6EE7F6F2E48B73B4?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">}],</span><span class="x">
  </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 2 of 2"</span><span class="p">,</span><span class="x">
  </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>To retrieve a list of scenarios from the Whispir.io API you can execute an HTTP GET using the /scenarios endpoint.</p>

<p>You will need to supply one of the following headers (for retrieving JSON or XML):</p>

<ul>
<li>Accept: application/vnd.whispir.sceario-v1+xml</li>
<li>Accept: application/vnd.whispir.scenario-v1+json</li>
</ul>

<p>An array of Scenarios will be returned to you in the HTTP response body.</p>

<p>Each of these scenarios will provide the following information:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Response Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">name:</td>
            <td><strong>String</strong><br/>
                Specifies the name of the scenario.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">description:</td>
            <td><strong>String</strong><br/>
                Specifies the broad description of the scenario.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">createdTime:</td>
            <td><strong>Number</strong><br/>
                Specifies the scenario created time value in Epoch
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">link:</td>
            <td><strong>Array</strong><br/>
                Provides a list of URLs that can be used to manipulate or access the scenario.
                <ul>
                  <li>uri - the link to access the scenario</li>
                  <li>rel - the descriptor for what the link will do</li>
                  <li>method - the HTTP method to use with this particular link</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<p>While that specifies the master list, doing a GET on a single scenario provides the following information - </p>

<blockquote>
<p>Retrieving details of a single Scenario</p>

<blockquote>
<p>Retrieving a single scenario details needs the ID of the scenario</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.scenario-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:scenario</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Emergency Comms - Fire<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;description&gt;</span>Scenario to use during fire evacuation<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;createdTime&gt;</span>2015-07-20T17:18:58+08:00<span class="nt">&lt;/createdTime&gt;</span>
    <span class="nt">&lt;allowedUsers&gt;</span>EVERYONE<span class="nt">&lt;/allowedUsers&gt;</span>
    <span class="nt">&lt;message&gt;</span>
        <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
        <span class="nt">&lt;subject&gt;</span>Scenario Emergency Comms - Fire<span class="nt">&lt;/subject&gt;</span>
        <span class="nt">&lt;body&gt;</span>sms test<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;label&gt;&lt;/label&gt;</span>
        <span class="nt">&lt;voice/&gt;</span>
        <span class="nt">&lt;from&gt;</span>joe.bloggs.company@Contact.Melbourne.whispir.au<span class="nt">&lt;/from&gt;</span>
        <span class="nt">&lt;social&gt;</span>
            <span class="nt">&lt;social</span> <span class="na">id=</span><span class="s">"socialType"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;body&gt;</span>text/plain<span class="nt">&lt;/body&gt;</span>
            <span class="nt">&lt;/social&gt;</span>
        <span class="nt">&lt;/social&gt;</span>
        <span class="nt">&lt;createdTime&gt;</span>2015-07-22T20:48:31+08:00<span class="nt">&lt;/createdTime&gt;</span>
    <span class="nt">&lt;/message&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"updateScenario"</span> <span class="na">method=</span><span class="s">"PUT"</span> <span class="na">type=</span><span class="s">"application/vnd.whispir.scenario-v1+json,application/vnd.whispir.scenario-v1+xml"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"deleteScenario"</span> <span class="na">method=</span><span class="s">"DELETE"</span> <span class="na">type=</span><span class="s">"application/vnd.whispir.scenario-v1+json,application/vnd.whispir.scenario-v1+xml"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/ns2:scenario&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">scenario</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"title"</span><span class="o">:</span><span class="x"> </span><span class="s">"Emergency Comms - Fire"</span><span class="p">,</span><span class="x">
  </span><span class="s">"description"</span><span class="o">:</span><span class="x"> </span><span class="s">"Scenario to use during fire evacuation"</span><span class="p">,</span><span class="x">
  </span><span class="s">"createdTime"</span><span class="o">:</span><span class="x"> </span><span class="m">1437383938000</span><span class="p">,</span><span class="x">
  </span><span class="s">"allowedUsers"</span><span class="o">:</span><span class="x"> </span><span class="s">"EVERYONE"</span><span class="p">,</span><span class="x">
  </span><span class="s">"message"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="o">:</span><span class="x"> </span><span class="s">"Scenario Emergency Comms - Fire"</span><span class="p">,</span><span class="x">
    </span><span class="s">"body"</span><span class="o">:</span><span class="x"> </span><span class="s">"sms test"</span><span class="p">,</span><span class="x">
    </span><span class="s">"label"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"voice"</span><span class="o">:</span><span class="x"> </span><span class="p">{},</span><span class="x">
    </span><span class="s">"from"</span><span class="o">:</span><span class="x"> </span><span class="s">"joe.bloggs.company@Contact.Melbourne.whispir.au"</span><span class="p">,</span><span class="x">
    </span><span class="s">"social"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"social"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"socialType"</span><span class="p">,</span><span class="x">
          </span><span class="s">"body"</span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"createdTime"</span><span class="o">:</span><span class="x"> </span><span class="m">1437569311000</span><span class="p">,</span><span class="x">
  </span><span class="p">},</span><span class="x">
  </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"updateScenario"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"PUT"</span><span class="p">,</span><span class="x">
      </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"application/vnd.whispir.scenario-v1+json,application/vnd.whispir.scenario-v1+xml"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"deleteScenario"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"DELETE"</span><span class="p">,</span><span class="x">
      </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"application/vnd.whispir.scenario-v1+json,application/vnd.whispir.scenario-v1+xml"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Response Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">name:</td>
            <td><strong>String</strong><br/>
                Specifies the name of the scenario
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">description:</td>
            <td><strong>String</strong><br/>
                Specifies the description of the scenario
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">createdTime:</td>
            <td><strong>Number</strong><br/>
                Specifies the scenario created time value in Epoch
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">allowedUsers:</td>
            <td><strong>String</strong><br/>
                Specifies the usage permission - 
                <ul>
                    <li>EVERYONE</li>
                    <li>SELECTEDUSERS</li>
                </ul>
                <br>
                When SELECTEDUSERS is provided, then `allowedUserIds` shall contain the userID of the allowed users.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">allowedUserIds:</td>
            <td><strong>String</strong><br/>
                Specifies the comma separated list of users who can run this scenario.
                <br>
                Only contains value when the allowedUsers is set to `SELECTEDUSERS`
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">message:</td>
            <td><strong>Object</strong><br/>
                Specifies the messaging options 
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">to:</td>
            <td><strong>String</strong><br/>
                Specifies the phone number or mri or distribution list to which the message has to be sent
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">subject:</td>
            <td><strong>String</strong><br/>
                Specifies the subject of the message
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">body:</td>
            <td><strong>String</strong><br/>
                Specifies the body of the message
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">label:</td>
            <td><strong>String</strong><br/>
                Specifies the label for the message (to view during reporting)
            </td>
        </tr>
        
        <tr>
            <td style="text-align: right; font-weight: bold;">email:</td>
            <td><strong>Object</strong><br/>
                Email message that can be sent as part of this scenario
                <br>
                <ul>
                    <li>body: The main content of the email</li>
                    <li>footer: footer of the email</li>
                    <li>type: text/plain or text/html</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">voice:</td>
            <td><strong>Object</strong><br/>
                Similar to a text message, a voice call can also be triggered. This provides the necessary information for the channel.
                <br>
                <ul>
                    <li>header: header for message. This will be played before the subject</li>
                    <li>body: The main content of the message</li>
                    <li>footer: footer for the message. Played after the body. Usually contains a thank you note.</li>
                    <li>type: ConfCall:,ConfAccountNo:,ConfPinNo:,ConfModPinNo:,Pin:</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">web:</td>
            <td><strong>Object</strong><br/>
                Refer to <a href="https://whispir.github.io/api/?xml#web-and-social-messaging" title="web and social media messaging">web messaging</a>.
                The web message structure remains exactly the same
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">social:</td>
            <td><strong>Object</strong><br/>
                Refer to <a href="https://whispir.github.io/api/?xml#web-and-social-messaging" title="web and social media messaging">web messaging</a>
                The social message structure remains exactly the same
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">from:</td>
            <td><strong>String</strong><br/>
                The user/contact from whom this communication will be sent out when the scenario is run. <br>
                <b>Eg: </b> joe.bloggs.company@Contact.Melbourne.whispir.au
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">link:</td>
            <td><strong>Array</strong><br/>
                Provides a list of URLs that can be used to manipulate or access the scenario.
                <ul>
                  <li>uri - the link to access the scenario</li>
                  <li>rel - the descriptor for what the link will do</li>
                  <li>method - the HTTP method to use with this particular link</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<h2 id="running-a-scenario">Running a Scenario</h2>

<blockquote>
<p>Running a Scenario</p>

<blockquote>
<p>A simple POST call to the scenarios endpoint with the scenario ID triggers the scenario execution</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key

&gt; &gt; The expected response to this call is an HTTP 204 - No Content.
</code></pre>

<p>Running a Scenario , in other words, invoking a scenario triggers the communication to the intended recipients. The message (static or dynamic) will be sent on all the provided channels.</p>

<p>Running a scenario is very simple to do. The specific scenario has to called via a /POST request.</p>

<p>Step wise example -</p>

<ol>
<li>Get all the scenarios</li>
<li>Pick the required scenario&rsquo;s link attribute</li>
<li>Make a /POST call</li>
</ol>

<p>From the retrieving scenarios call above, we can get all the scenarios in the workspace. Choosing the <code class="prettyprint">Emergency Comms - Fire</code> named Scenario, the link provided is <code class="prettyprint">https://api.&lt;region&gt;.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]</code></p>

<p>Now invoking this scenario is just making a /POST call.  There is no need for a <code class="prettyprint">Content-type</code> header as the payload is empty.</p>

<h2 id="updating-scenario">Updating Scenario</h2>

<p>To update existing scenario, you can use a PUT request the /scenarios endpoint.</p>

<blockquote>
<p>Updating a Scenario</p>

<blockquote>
<p>The following API calls allow users to update Scenarios using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 PUT https://api.&lt;region&gt;.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.scenario-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:scenario</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Emergency Comms - Fire<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;description&gt;</span>Scenario to use during fire evacuation<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;allowedUsers&gt;</span>EVERYONE<span class="nt">&lt;/allowedUsers&gt;</span>
    <span class="nt">&lt;message&gt;</span>
        <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
        <span class="nt">&lt;subject&gt;</span>Scenario Emergency Comms - Fire<span class="nt">&lt;/subject&gt;</span>
        <span class="nt">&lt;body&gt;</span>Evacuate the building Immediately. Do not use the lifts.<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;label&gt;&lt;/label&gt;</span>
        <span class="nt">&lt;voice/&gt;</span>
        <span class="nt">&lt;from&gt;</span>joe.bloggs.company@Contact.Melbourne.whispir.au<span class="nt">&lt;/from&gt;</span>
        <span class="nt">&lt;social&gt;</span>
            <span class="nt">&lt;social</span> <span class="na">id=</span><span class="s">"socialType"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;body&gt;</span>text/plain<span class="nt">&lt;/body&gt;</span>
            <span class="nt">&lt;/social&gt;</span>
        <span class="nt">&lt;/social&gt;</span>
    <span class="nt">&lt;/message&gt;</span>
<span class="nt">&lt;/ns2:scenario&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">scenario</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"title"</span><span class="o">:</span><span class="x"> </span><span class="s">"Emergency Comms - Fire"</span><span class="p">,</span><span class="x">
  </span><span class="s">"description"</span><span class="o">:</span><span class="x"> </span><span class="s">"Scenario to use during fire evacuation"</span><span class="p">,</span><span class="x">
  </span><span class="s">"allowedUsers"</span><span class="o">:</span><span class="x"> </span><span class="s">"EVERYONE"</span><span class="p">,</span><span class="x">
  </span><span class="s">"message"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="o">:</span><span class="x"> </span><span class="s">"Scenario Emergency Comms - Fire"</span><span class="p">,</span><span class="x">
    </span><span class="s">"body"</span><span class="o">:</span><span class="x"> </span><span class="s">"Evacuate the building Immediately. Do not use the lifts."</span><span class="p">,</span><span class="x">
    </span><span class="s">"label"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"voice"</span><span class="o">:</span><span class="x"> </span><span class="p">{},</span><span class="x">
    </span><span class="s">"from"</span><span class="o">:</span><span class="x"> </span><span class="s">"joe.bloggs.company@Contact.Melbourne.whispir.au"</span><span class="p">,</span><span class="x">
    </span><span class="s">"social"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"social"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"socialType"</span><span class="p">,</span><span class="x">
          </span><span class="s">"body"</span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>The following fields are required:</p>

<ol>
<li>name - name of the scenario</li>
<li>description - details of the scenario</li>
<li>message { to, subject, body }</li>
</ol>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">name:</td>
            <td><strong>String</strong><br/>
                Specifies the name of the scenario
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">description:</td>
            <td><strong>String</strong><br/>
                Specifies the description of the scenario
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">createdTime:</td>
            <td><strong>Number</strong><br/>
                Specifies the scenario created time value in Epoch
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">allowedUsers:</td>
            <td><strong>String</strong><br/>
                Specifies the usage permission - 
                <ul>
                    <li>EVERYONE</li>
                    <li>SELECTEDUSERS</li>
                </ul>
                <br>
                When SELECTEDUSERS is provided, then `allowedUserIds` shall contain the userID of the allowed users.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">allowedUserIds:</td>
            <td><strong>String</strong><br/>
                Specifies the comma separated list of users who can run this scenario.
                <br>
                Only contains value when the allowedUsers is set to `SELECTEDUSERS`
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">message:</td>
            <td><strong>Object</strong><br/>
                Specifies the messaging options 
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">to:</td>
            <td><strong>String</strong><br/>
                Specifies the phone number or mri or distribution list to which the message has to be sent
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">subject:</td>
            <td><strong>String</strong><br/>
                Specifies the subject of the message
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">body:</td>
            <td><strong>String</strong><br/>
                Specifies the body of the message
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">label:</td>
            <td><strong>String</strong><br/>
                Specifies the label for the message (to view during reporting)
            </td>
        </tr>
        
        <tr>
            <td style="text-align: right; font-weight: bold;">email:</td>
            <td><strong>Object</strong><br/>
                Email message that can be sent as part of this scenario
                <br>
                <ul>
                    <li>body: The main content of the email</li>
                    <li>footer: footer of the email</li>
                    <li>type: text/plain or text/html</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">voice:</td>
            <td><strong>Object</strong><br/>
                Similar to a text message, a voice call can also be triggered. This provides the necessary information for the channel.
                <br>
                <ul>
                    <li>header: header for message. This will be played before the subject</li>
                    <li>body: The main content of the message</li>
                    <li>footer: footer for the message. Played after the body. Usually contains a thank you note.</li>
                    <li>type: ConfCall:,ConfAccountNo:,ConfPinNo:,ConfModPinNo:,Pin:</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">web:</td>
            <td><strong>Object</strong><br/>
                Refer to <a href="https://whispir.github.io/api/?xml#web-and-social-messaging" title="web and social media messaging">web messaging</a>.
                The web message structure remains exactly the same
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">social:</td>
            <td><strong>Object</strong><br/>
                Refer to <a href="https://whispir.github.io/api/?xml#web-and-social-messaging" title="web and social media messaging">web messaging</a>
                The social message structure remains exactly the same
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">from:</td>
            <td><strong>String</strong><br/>
                The user/contact from whom this communication will be sent out when the scenario is run. <br>
                <b>Eg: </b> joe.bloggs.company@Contact.Melbourne.whispir.au
            </td>
        </tr>
    </tbody>
</table>

<h2 id="deleting-scenario">Deleting Scenario</h2>

<blockquote>
<p>Deleting a Scenario</p>

<blockquote>
<p>The following API calls allow users to delete Scenarios using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 DELETE https://api.&lt;region&gt;.whispir.com/scenarios/6EE7F6F2E48B73B4?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key

&gt; &gt; The expected response to this call is an HTTP 204 - No Content.
</code></pre>

<p>Deleting a Scenario can be done via a DELETE call to the /scenarios endpoint. The request has to be targeted at a particular Scenario with the Scenario ID in the URI.</p>

        <h1 id="activities">Activities</h1>

<blockquote>
<p>API Endpoint</p>

<blockquote>
<ul>
<li>generic</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/activities/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.activity-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/activities/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">activity</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<ul>
<li>limited to a workspace</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/workspaces/{:id}/activities/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.activity-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/workspaces/{:id}/activities/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">activity</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">&gt; Resource type

- application/vnd.whispir.activity-v1+xml
- application/vnd.whispir.activity-v1+json


&gt; Methods supported

- GET
- POST
</code></pre>

<p>Activities are all the individual changes, tasks, calls, messages.. just about everything performed in a given company workspaces. Each Activity log entry contains information about the workspace, the module(message, email, IVR..), the user who performed it, time stamps, description of the activity, and its status (success, fail) etc.</p>

<p>All of these helps in fulfilling the auditing, standards compliance and also change tracking. For example -</p>

<ul>
<li>As a Whispir API user (Voice Module), If you want to be able to update the Whispir Activity Log as the call progresses through the IVR to ensure that the auditing shows exactly what information a caller heard.</li>
<li>As a Whispir API user (SMS Module), If you want to able to retrieve the information about all the message sent by a specific user, the activity log can help you with that.</li>
</ul>

<p>As activities information is sensitive, stricter permission rules apply to the data served by these endpoints.
- Any API user will be able to perform a GET on /activities
- If the user is a Company Admin or Company Leader, they will receive a 200 OK with the valid response
- If the user is a Company Member or Company Guest, they will receive a 403 Forbidden advising they don&rsquo;t have permission to access this resource
- Company Admin or Company Leader can also create content within the Activity Stream. They can do this through a POST of data to either the /activities endpoint, or to the specific Activity ID.
- They must specify a valid &lsquo;Action&rsquo;, &#39;Description&rsquo; and &#39;Status&rsquo; within their request
- Posting to the /activities endpoint will create a new activity
- Posting to the /activities/ {ID} endpoint will append the content to the detail of the specified activity</p>

<h2 id="creating-an-activity-log">Creating an activity log</h2>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/activities?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.activity-v1+xml


<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns3:activity</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;module&gt;</span>Message<span class="nt">&lt;/module&gt;</span>
    <span class="nt">&lt;action&gt;</span>Send<span class="nt">&lt;/action&gt;</span>
    <span class="nt">&lt;status&gt;</span>Successful<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;description&gt;</span>Message sent via the Whispir's Java library<span class="nt">&lt;/description&gt;</span>
<span class="nt">&lt;/ns3:activity&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">activity</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"module"</span><span class="o">:</span><span class="x"> </span><span class="s">"Message"</span><span class="p">,</span><span class="x">
  </span><span class="s">"action"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Send"</span><span class="p">,</span><span class="x">
  </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Successful"</span><span class="p">,</span><span class="x">
  </span><span class="s">"description"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Message sent via the Whispir's Java library"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">&gt; Response will be `201 Created`
</code></pre>

<p>To create a new workspace, you can use the /activities endpoint.</p>

<p>Only <strong>3 fields</strong> are required:</p>

<ol>
<li>module - The name of the module in which the activity is performed (see the high-level request elements table below for list of modules).</li>
<li>action - The action performed.</li>
<li>status - The status of the action.</li>
</ol>

<p><strong>Note</strong>: There is no limit to the amount of activities that can be created.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
    <tr>
      <td style="text-align: right; font-weight: bold;">action :</td>
      <td><strong>String</strong><br/>
        Specifies the action performed during this activity.
        The following are the list of actions that can be performed -
        <ul>
          <li>Create</li>
          <li>Update</li>
          <li>Move</li>
          <li>Copy</li>
          <li>Draft</li>
          <li>Send</li>
          <li>Modified</li>
          <li>Delete</li>
          <li>Contact Import File</li>
          <li>Login</li>
          <li>Approve</li>
          <li>Reject</li>
          <li>Dispatch</li>
          <li>Register</li>
          <li>Accept</li>
          <li>Closed</li>
          <li>Map</li>
          <li>Un-map</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">module:</td>
      <td><strong>String</strong><br/>
        Specifies the module to which this activity belongs to.
        The following are the list of actions that can be performed -
        <ul>
          <li>System</li>
          <li>Message</li>
          <li>Scheduled Message</li>
          <li>User</li>
          <li>Contact</li>
          <li>DistributionList</li>
          <li>Template</li>
          <li>Workspace</li>
          <li>Event</li>
          <li>WebService</li>
          <li>Settings</li>
          <li>Conversation</li>
          <li>Gateway</li>
          <li>Workspace Mapping</li>
          <li>Folders</li>
          <li>Team</li>
          <li>RSS</li>
          <li>API Mapping</li>
          <li>Asset</li>
          <li>Instruction</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">workspace:</td>
      <td><strong>String</strong><br/>
        The workspace in which this activity is performed. This will usually be the API user&rsquo;s default workspace
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">user:</td>
      <td><strong>String</strong><br/>
        The username of the person who performed this activity. This will usually be the API user invoking the creation.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">status:</td>
      <td><strong>String</strong><br/>
        Specifies the status of the activity. The status can be one of -
        <ul>
          <li>Successful</li>
          <li>Failed</li>
          <li>Rejected</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">description:</td>
      <td><strong>String</strong><br/>
        The description of the activity. This is a free text that details about the activity. <br><br> <b>Note:</b> If this is not provided during the creation of the activity, this field will not exist for the specific activity. As updating an activity is not allowed, care has to be taken to ensure that absence of this field is justified as per your audit - compliance needs.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">time:</td>
      <td><strong>String</strong><br/>
        The date and time of the activity in the format: dd/mm/yy hh:mm. This will be defaulted to the time at which this activity is created.
      </td>
    </tr>
  </tbody>
</table>

<h2 id="retrieving-activities">Retrieving Activities</h2>

<p>To retrieve a list of activities from the Whispir.io API you can execute an HTTP GET using the /activities endpoint.</p>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/activities?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.activity-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ns2:activities&gt;</span>
        <span class="nt">&lt;ns2:activity&gt;</span>
            <span class="nt">&lt;user&gt;</span>james.cameron<span class="nt">&lt;/user&gt;</span>
            <span class="nt">&lt;time&gt;</span>17/08/15 13:29<span class="nt">&lt;/time&gt;</span>
            <span class="nt">&lt;action&gt;</span>Send<span class="nt">&lt;/action&gt;</span>
            <span class="nt">&lt;description&gt;</span>Message sent via the Whispir's Java library<span class="nt">&lt;/description&gt;</span>
            <span class="nt">&lt;status&gt;</span>Successful<span class="nt">&lt;/status&gt;</span>
            <span class="nt">&lt;module&gt;</span>Message<span class="nt">&lt;/module&gt;</span>
            <span class="nt">&lt;workspaceName&gt;</span>Whispir<span class="nt">&lt;/workspaceName&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/activities/9B26BCE6A7C1997D3E3C04D4C0B62165?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:activity&gt;</span>
        <span class="nt">&lt;ns2:activity&gt;</span>
            <span class="nt">&lt;user&gt;</span>james.cameron<span class="nt">&lt;/user&gt;</span>
            <span class="nt">&lt;time&gt;</span>17/08/15 12:56<span class="nt">&lt;/time&gt;</span>
            <span class="nt">&lt;action&gt;</span>Create<span class="nt">&lt;/action&gt;</span>
            <span class="nt">&lt;status&gt;</span>Successful<span class="nt">&lt;/status&gt;</span>
            <span class="nt">&lt;module&gt;</span>Workspace<span class="nt">&lt;/module&gt;</span>
            <span class="nt">&lt;workspaceName&gt;</span>Whispir<span class="nt">&lt;/workspaceName&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/activities/CF8F388F18FDDA7CA40F42E888EC8E67?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:activity&gt;</span>
        <span class="nt">&lt;ns2:activity&gt;</span>
            <span class="nt">&lt;user&gt;</span>james.cameron<span class="nt">&lt;/user&gt;</span>
            <span class="nt">&lt;time&gt;</span>17/08/15 12:26<span class="nt">&lt;/time&gt;</span>
            <span class="nt">&lt;action&gt;</span>Draft<span class="nt">&lt;/action&gt;</span>
            <span class="nt">&lt;description&gt;</span>Template for default notification messages<span class="nt">&lt;/description&gt;</span>
            <span class="nt">&lt;status&gt;</span>Successful<span class="nt">&lt;/status&gt;</span>
            <span class="nt">&lt;module&gt;</span>Template<span class="nt">&lt;/module&gt;</span>
            <span class="nt">&lt;workspaceName&gt;</span>Whispir<span class="nt">&lt;/workspaceName&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/activities/19F603F21E8A7D536D577A6B4DBCFE3F?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:activity&gt;</span>
    <span class="nt">&lt;ns2:activity&gt;</span>
            <span class="nt">&lt;user&gt;</span>markm<span class="nt">&lt;/user&gt;</span>
            <span class="nt">&lt;time&gt;</span>22/12/14 11:37<span class="nt">&lt;/time&gt;</span>
            <span class="nt">&lt;action&gt;</span>Logout<span class="nt">&lt;/action&gt;</span>
            <span class="nt">&lt;description&gt;</span>Logged out<span class="nt">&lt;/description&gt;</span>
            <span class="nt">&lt;status&gt;</span>Successful<span class="nt">&lt;/status&gt;</span>
            <span class="nt">&lt;module&gt;</span>System<span class="nt">&lt;/module&gt;</span>
            <span class="nt">&lt;workspaceName&gt;</span>ABC Operations<span class="nt">&lt;/workspaceName&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"http://app19.dev1.whispir.net:8080/api/activities/0DEB48AB3D3B6069D7DA1A808F5A5DE4?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:activity&gt;</span>
        <span class="nt">&lt;ns2:activity&gt;</span>
            <span class="nt">&lt;user&gt;</span>markm<span class="nt">&lt;/user&gt;</span>
            <span class="nt">&lt;time&gt;</span>22/12/14 11:20<span class="nt">&lt;/time&gt;</span>
            <span class="nt">&lt;action&gt;</span>Login<span class="nt">&lt;/action&gt;</span>
            <span class="nt">&lt;description&gt;</span> Logged in, IP:127.0.0.1, Country: <span class="nt">&lt;/description&gt;</span>
            <span class="nt">&lt;status&gt;</span>Successful<span class="nt">&lt;/status&gt;</span>
            <span class="nt">&lt;module&gt;</span>System<span class="nt">&lt;/module&gt;</span>
            <span class="nt">&lt;workspaceName&gt;</span>ABC Operations<span class="nt">&lt;/workspaceName&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"http://app19.dev1.whispir.net:8080/api/activities/0CEC8009230B3B92F5B548A22B55C407?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:activity&gt;</span>
    <span class="nt">&lt;/ns2:activities&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">activity</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"activities"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"user"</span><span class="o">:</span><span class="x"> </span><span class="s">"james.cameron"</span><span class="p">,</span><span class="x">
      </span><span class="s">"time"</span><span class="o">:</span><span class="x"> </span><span class="s">"17/08/15 13:29"</span><span class="p">,</span><span class="x">
      </span><span class="s">"action"</span><span class="o">:</span><span class="x"> </span><span class="s">"Send"</span><span class="p">,</span><span class="x">
      </span><span class="s">"description"</span><span class="o">:</span><span class="x"> </span><span class="s">"Message sent via the Whispir's Java library"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"Successful"</span><span class="p">,</span><span class="x">
      </span><span class="s">"module"</span><span class="o">:</span><span class="x"> </span><span class="s">"Message"</span><span class="p">,</span><span class="x">
      </span><span class="s">"workspaceName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Whispir"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/activities/9B26BCE6A7C1997D3E3C04D4C0B62165?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"user"</span><span class="o">:</span><span class="x"> </span><span class="s">"james.cameron"</span><span class="p">,</span><span class="x">
      </span><span class="s">"time"</span><span class="o">:</span><span class="x"> </span><span class="s">"17/08/15 12:56"</span><span class="p">,</span><span class="x">
      </span><span class="s">"action"</span><span class="o">:</span><span class="x"> </span><span class="s">"Create"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"Successful"</span><span class="p">,</span><span class="x">
      </span><span class="s">"module"</span><span class="o">:</span><span class="x"> </span><span class="s">"Workspace"</span><span class="p">,</span><span class="x">
      </span><span class="s">"workspaceName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Whispir"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/activities/CF8F388F18FDDA7CA40F42E888EC8E67?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"user"</span><span class="o">:</span><span class="x"> </span><span class="s">"james.cameron"</span><span class="p">,</span><span class="x">
      </span><span class="s">"time"</span><span class="o">:</span><span class="x"> </span><span class="s">"17/08/15 12:26"</span><span class="p">,</span><span class="x">
      </span><span class="s">"action"</span><span class="o">:</span><span class="x"> </span><span class="s">"Draft"</span><span class="p">,</span><span class="x">
      </span><span class="s">"description"</span><span class="o">:</span><span class="x"> </span><span class="s">"Template for default notification messages"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"Successful"</span><span class="p">,</span><span class="x">
      </span><span class="s">"module"</span><span class="o">:</span><span class="x"> </span><span class="s">"Template"</span><span class="p">,</span><span class="x">
      </span><span class="s">"workspaceName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Whispir"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/activities/19F603F21E8A7D536D577A6B4DBCFE3F?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
  </span><span class="p">{</span><span class="x">
      </span><span class="s">"user"</span><span class="o">:</span><span class="x"> </span><span class="s">"markm"</span><span class="p">,</span><span class="x">
      </span><span class="s">"time"</span><span class="o">:</span><span class="x"> </span><span class="s">"22/12/14 11:37"</span><span class="p">,</span><span class="x">
      </span><span class="s">"action"</span><span class="o">:</span><span class="x"> </span><span class="s">"Logout"</span><span class="p">,</span><span class="x">
      </span><span class="s">"description"</span><span class="o">:</span><span class="x"> </span><span class="s">"Loged out"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"Successful"</span><span class="p">,</span><span class="x">
      </span><span class="s">"module"</span><span class="o">:</span><span class="x"> </span><span class="s">"System"</span><span class="p">,</span><span class="x">
      </span><span class="s">"workspaceName"</span><span class="o">:</span><span class="x"> </span><span class="s">"ABC Operations"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/activities/0DEB48AB3D3B6069D7DA1A808F5A5DE4?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
  </span><span class="p">{</span><span class="x">
      </span><span class="s">"user"</span><span class="o">:</span><span class="x"> </span><span class="s">"markm"</span><span class="p">,</span><span class="x">
      </span><span class="s">"time"</span><span class="o">:</span><span class="x"> </span><span class="s">"22/12/14 11:20"</span><span class="p">,</span><span class="x">
      </span><span class="s">"action"</span><span class="o">:</span><span class="x"> </span><span class="s">"Login"</span><span class="p">,</span><span class="x">
      </span><span class="s">"description"</span><span class="o">:</span><span class="x"> </span><span class="s">"Logged in, IP:8.8.8.8, Country: USA"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"Successful"</span><span class="p">,</span><span class="x">
      </span><span class="s">"module"</span><span class="o">:</span><span class="x"> </span><span class="s">"System"</span><span class="p">,</span><span class="x">
      </span><span class="s">"workspaceName"</span><span class="o">:</span><span class="x"> </span><span class="s">"ABC Operations"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/activities/0CEC8009230B3B92F5B548A22B55C407?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">],</span><span class="x">
  </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>You will need to supply one of the following headers (for retrieving JSON or XML):</p>

<ul>
<li>Accept: application/vnd.whispir.activity-v1+xml</li>
<li>Accept: application/vnd.whispir.activity-v1+json</li>
</ul>

<p>An array of activities will be returned to you in the HTTP response body.</p>

<p>Each of these activities will provide the following information:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Response Elements</th>
        </tr>
    </thead>
    <tbody>
    <tr>
      <td style="text-align: right; font-weight: bold;">action :</td>
      <td><strong>String</strong><br/>
        Specifies the action performed during this activity.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">module:</td>
      <td><strong>String</strong><br/>
        Specifies the module to which this activity belongs to.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">workspace:</td>
      <td><strong>String</strong><br/>
        The workspace in which this activity is performed.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">user:</td>
      <td><strong>String</strong><br/>
        The username of the person who performed this activity.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">status:</td>
      <td><strong>String</strong><br/>
        Specifies the status of the activity. The status can be one of -
        <ul>
          <li>Successful</li>
          <li>Failed</li>
          <li>Rejected</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">description:</td>
      <td><strong>String</strong><br/>
        The description of the activity.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">time:</td>
      <td><strong>String</strong><br/>
        The date and time of the activity in the format: dd/mm/yy hh:mm.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">link:</td>
      <td><strong>Array</strong><br/>
        Provides a list of URLs that can be used to manipulate or access the activity.
        <br>
        <ul>
          <li>uri - the link to access the activity</li>
          <li>rel - the descriptor for what the link will do</li>
          <li>method - the HTTP method to use with this particular link</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<p><strong>Note:</strong> The API currently results in a <code class="prettyprint">404 Not Found</code> when there are no activities present in the log for a given search criteria. This should not be not confused with a failed response. But rather as <code class="prettyprint">No Data Found</code>.</p>

<h3 id="restricting-to-only-a-single-workspace">Restricting to only a single workspace</h3>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/activities?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/workspace/B7BFEF555F0F7F81/activities?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>

<p>By default, <code class="prettyprint">GET /activities</code> returns all the activities at company level. This covers all the workspaces. So, if the items has to limited to a specific workspace, one has to use the workspace as the endpoint and activities followed by it.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Request Information</th>
        </tr>
    </thead>
    <tbody>
    <tr>
      <td style="text-align: right; font-weight: bold;">Request</td>
      <td style="text-align: left; font-weight: bold;">Description</td>
    </tr>
    <tr>
      <td style="text-align: right;;">/activities</td>
      <td>Only returns activity that took place in My Company</td>
    </tr>
    <tr>
      <td style="text-align: right;;">/workspaces/:id/activities</td>
      <td>Only returns activity that took place in the specified workspace</td>
    </tr>
  </tbody>
</table>

<h2 id="search-or-filter-on-activity-logs">Search or Filter on Activity Logs</h2>

<p>Activity logs can become quickly huge owing to the amount of actions performed. In such cases, to have a proper filtering of data during a GET /activities, Whispir API provides very neat filtering options on the data.</p>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/activities?apikey=[your_api_key]&amp;field=value
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>

<p>All filter options are to be passed in as URL query parameters.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Search Criteria</th>
        </tr>
    </thead>
    <tbody>
    <tr>
      <td style="text-align: right; font-weight: bold;">action :</td>
      <td>/activities?action=Map</td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">module:</td>
      <td>/activities?module=Message</td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">user:</td>
      <td>/activities?user=james</td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">workspace:</td>
      <td>/activities?workspace=Whispir. <br/><br/>One can also refer to <i>restricting to only a workspace</i> section above</td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">status:</td>
      <td>/activities?status=Successful</td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">description:</td>
      <td>/activities?description=Imported</td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">Start time:</td>
      <td>The date and time to start searching from in the format: dd/mm/yyyy hh:mm. This will search on the `time` field <br/><br/>
        /activities?startTime=01/01/2015%2000:00
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">End time:</td>
      <td>The date and time to start searching from in the format: dd/mm/yyyy hh:mm<br/><br/>
        /activities?endTime=01/01/2015%2000:00
      </td>
    </tr>
  </tbody>
</table>

<p><strong>Note:</strong> The API currently results in a <code class="prettyprint">404 Not Found</code> when there are no activities present in the log for a given search criteria. This should not be not confused with a failed response. But rather as <code class="prettyprint">No Data Found</code>.</p>

<h2 id="updating,-deleting-an-activity">Updating, Deleting an activity</h2>

<p>Activities can only be created and retrieved. They <strong>cannot</strong> be updated or deleted.</p>

        <h1 id="custom-lists">Custom Lists</h1>

<blockquote>
<p>API Endpoint</p>

<blockquote>
<ul>
<li>generic</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/customlists/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.customlist-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/customlists/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">customlist</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<ul>
<li>limited to a workspace</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/workspaces/{:id}/customlists/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.customlist-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/workspaces/{:id}/customlists/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">customlist</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">&gt; Resource type

- application/vnd.whispir.customlist-v1+xml
- application/vnd.whispir.customlist-v1+json


&gt; Methods supported

- GET
</code></pre>

<p>Custom Lists are user specific translations or preferred options in the various list controls used in the platform tool. These provide the freedom for the user to customize the list options in various modules like Messages, Events. These custom list either can complement or completely overwrite the existing list items.</p>

<p>A quick example -</p>

<p>In the Events, You have a &ldquo;Priority&rdquo; field that the user has to fill to specify the priority of the attention. The default ones are -</p>

<ul>
<li>Priority 5 (No Set Resolution period)</li>
<li>Priority 4 (&lt;1 week resolution)</li>
<li>Priority 3 (&lt;3 day resolution)</li>
<li>Priority 2 (&lt;1 day resolution)</li>
<li>Priority 1 (&lt;2hr resolution)</li>
</ul>

<p>If this is not the standard for the company, the values can be changed to suit your needs. This is where custom lists come in to help. Just Create a custom list and via company settings set the custom list to override the existing list. When this is done, the user using the interface shall only see the new custom list values in place of the standard list.These custom lists can be associated to message attributes, event fields, contact fields.</p>

<p><strong>Translations within Voice Module -</strong></p>

<p>The custom lists can also be used to do translations during the Voice Module usage. During the call, options can be read out in various languages depending on the user preference of language. In this case, the standard list is replaced with a custom list that is merely a translation in the target language word to word. Instead of the English, the specific language words are read out, making it easier to communicate with end customers from multiple language groups.</p>

<p>Permission Rules applicable on the Custom Lists -</p>

<ul>
<li>Any API user will be able to perform a GET on /customlists</li>
<li>If the user is a Company Admin or Company Leader, they will receive a 200 OK with the valid response</li>
<li>If the user is a Company Member or Company Guest, they will receive a 403 Forbidden advising they don&rsquo;t have permission to access this resource</li>
</ul>

<p>CONTENT (type) -</p>

<p>The customlists will contain all lists in the company across the following places
- RSS Custom Lists
- Incident Custom Lists (Events/Assets)
- Message Attribute Custom Lists
- Contact Custom Lists
- Message Custom Lists</p>

<h2 id="retrieving-custom-lists">Retrieving custom lists</h2>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/customlists?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.customlist-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 5 of 5<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:customlabels&gt;</span>
        <span class="nt">&lt;ns2:customlabel&gt;</span>
            <span class="nt">&lt;id&gt;</span>4E2101D0E5D16229<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;name&gt;</span>Category<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;type&gt;</span>INCIDENT<span class="nt">&lt;/type&gt;</span>
            <span class="nt">&lt;createdDate&gt;</span>02/08/11 14:20<span class="nt">&lt;/createdDate&gt;</span>
            <span class="nt">&lt;sortType&gt;</span>As Displayed<span class="nt">&lt;/sortType&gt;</span>
            <span class="nt">&lt;linked&gt;</span>disabled<span class="nt">&lt;/linked&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/customlists/40E5D16229E2101D?apikey=7qyxe7z37tsdy9spv6sw6uec"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:customlabel&gt;</span>
        <span class="nt">&lt;ns2:customlabel&gt;</span>
            <span class="nt">&lt;id&gt;</span>0CA7B9E2B21A3B1A<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;name&gt;</span>Day of Month<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;type&gt;</span>MESSAGE<span class="nt">&lt;/type&gt;</span>
            <span class="nt">&lt;createdDate&gt;</span>13/10/14 16:30<span class="nt">&lt;/createdDate&gt;</span>
            <span class="nt">&lt;sortType&gt;</span>As Displayed<span class="nt">&lt;/sortType&gt;</span>
            <span class="nt">&lt;linked&gt;</span>disabled<span class="nt">&lt;/linked&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/customlists/0CA7B9E2B21A3B1A?apikey=7qyxe7z37tsdy9spv6sw6uec"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:customlabel&gt;</span>
        <span class="nt">&lt;ns2:customlabel&gt;</span>
            <span class="nt">&lt;id&gt;</span>87F23964C25ECF22<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;name&gt;</span>Day of Week<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;type&gt;</span>MESSAGE<span class="nt">&lt;/type&gt;</span>
            <span class="nt">&lt;createdDate&gt;</span>07/01/14 09:51<span class="nt">&lt;/createdDate&gt;</span>
            <span class="nt">&lt;sortType&gt;</span>As Displayed<span class="nt">&lt;/sortType&gt;</span>
            <span class="nt">&lt;linked&gt;</span>disabled<span class="nt">&lt;/linked&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/customlists/87F23964C25ECF22?apikey=7qyxe7z37tsdy9spv6sw6uec"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:customlabel&gt;</span>
        <span class="nt">&lt;ns2:customlabel&gt;</span>
            <span class="nt">&lt;id&gt;</span>F0771B97F1EF770B<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;name&gt;</span>External Vendor<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;type&gt;</span>INCIDENT<span class="nt">&lt;/type&gt;</span>
            <span class="nt">&lt;createdDate&gt;</span>02/08/11 14:20<span class="nt">&lt;/createdDate&gt;</span>
            <span class="nt">&lt;sortType&gt;</span>As Displayed<span class="nt">&lt;/sortType&gt;</span>
            <span class="nt">&lt;linked&gt;</span>disabled<span class="nt">&lt;/linked&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/customlists/F0771B97F1EF770B?apikey=7qyxe7z37tsdy9spv6sw6uec"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:customlabel&gt;</span>
        <span class="nt">&lt;ns2:customlabel&gt;</span>
            <span class="nt">&lt;id&gt;</span>768E4ACA5DA7500C<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;name&gt;</span>Finish Time<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;type&gt;</span>MESSAGE<span class="nt">&lt;/type&gt;</span>
            <span class="nt">&lt;createdDate&gt;</span>01/08/11 12:38<span class="nt">&lt;/createdDate&gt;</span>
            <span class="nt">&lt;sortType&gt;</span>As Displayed<span class="nt">&lt;/sortType&gt;</span>
            <span class="nt">&lt;linked&gt;</span>disabled<span class="nt">&lt;/linked&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/customlists/768E4ACA5DA7500C?apikey=7qyxe7z37tsdy9spv6sw6uec"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:customlabel&gt;</span>
    <span class="nt">&lt;/ns2:customlabels&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">customlist</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 5 of 5"</span><span class="p">,</span><span class="x">
  </span><span class="s">"customlabels"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"4E2101D0E5D16229"</span><span class="p">,</span><span class="x">
      </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"Category"</span><span class="p">,</span><span class="x">
      </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"INCIDENT"</span><span class="p">,</span><span class="x">
      </span><span class="s">"createdDate"</span><span class="o">:</span><span class="x"> </span><span class="s">"02/08/11 14:20"</span><span class="p">,</span><span class="x">
      </span><span class="s">"sortType"</span><span class="o">:</span><span class="x"> </span><span class="s">"As Displayed"</span><span class="p">,</span><span class="x">
      </span><span class="s">"linked"</span><span class="o">:</span><span class="x"> </span><span class="s">"disabled"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/customlists/40E5D16229E2101D?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"0CA7B9E2B21A3B1A"</span><span class="p">,</span><span class="x">
      </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"Day of Month"</span><span class="p">,</span><span class="x">
      </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"MESSAGE"</span><span class="p">,</span><span class="x">
      </span><span class="s">"createdDate"</span><span class="o">:</span><span class="x"> </span><span class="s">"13/10/14 16:30"</span><span class="p">,</span><span class="x">
      </span><span class="s">"sortType"</span><span class="o">:</span><span class="x"> </span><span class="s">"As Displayed"</span><span class="p">,</span><span class="x">
      </span><span class="s">"linked"</span><span class="o">:</span><span class="x"> </span><span class="s">"disabled"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/customlists/0CA7B9E2B21A3B1A?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"87F23964C25ECF22"</span><span class="p">,</span><span class="x">
      </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"Day of Week"</span><span class="p">,</span><span class="x">
      </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"MESSAGE"</span><span class="p">,</span><span class="x">
      </span><span class="s">"createdDate"</span><span class="o">:</span><span class="x"> </span><span class="s">"07/01/14 09:51"</span><span class="p">,</span><span class="x">
      </span><span class="s">"sortType"</span><span class="o">:</span><span class="x"> </span><span class="s">"As Displayed"</span><span class="p">,</span><span class="x">
      </span><span class="s">"linked"</span><span class="o">:</span><span class="x"> </span><span class="s">"disabled"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/customlists/87F23964C25ECF22?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"F0771B97F1EF770B"</span><span class="p">,</span><span class="x">
      </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"External Vendor"</span><span class="p">,</span><span class="x">
      </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"INCIDENT"</span><span class="p">,</span><span class="x">
      </span><span class="s">"createdDate"</span><span class="o">:</span><span class="x"> </span><span class="s">"02/08/11 14:20"</span><span class="p">,</span><span class="x">
      </span><span class="s">"sortType"</span><span class="o">:</span><span class="x"> </span><span class="s">"As Displayed"</span><span class="p">,</span><span class="x">
      </span><span class="s">"linked"</span><span class="o">:</span><span class="x"> </span><span class="s">"disabled"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/customlists/F0771B97F1EF770B?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"768E4ACA5DA7500C"</span><span class="p">,</span><span class="x">
      </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"Finish Time"</span><span class="p">,</span><span class="x">
      </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"MESSAGE"</span><span class="p">,</span><span class="x">
      </span><span class="s">"createdDate"</span><span class="o">:</span><span class="x"> </span><span class="s">"01/08/11 12:38"</span><span class="p">,</span><span class="x">
      </span><span class="s">"sortType"</span><span class="o">:</span><span class="x"> </span><span class="s">"As Displayed"</span><span class="p">,</span><span class="x">
      </span><span class="s">"linked"</span><span class="o">:</span><span class="x"> </span><span class="s">"disabled"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/customlists/768E4ACA5DA7500C?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">],</span><span class="x">
  </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>You will need to supply one of the following headers (for retrieving JSON or XML):</p>

<ul>
<li>Accept: application/vnd.whispir.customlist-v1+xml</li>
<li>Accept: application/vnd.whispir.customlist-v1+json</li>
</ul>

<p>An array of Custom Lists will be returned to you in the HTTP response body.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Response Elements</th>
        </tr>
    </thead>
    <tbody>
    <tr>
      <td style="text-align: right; font-weight: bold;">id:</td>
      <td><strong>Number</strong><br/>
        Specifies the unique id of the List.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">name:</td>
      <td><strong>String</strong><br/>
        Specifies the name of the List.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">type:</td>
      <td><strong>String</strong><br/>
        Specifies the type. The type can be one of -
        <ul>
          <li>INCIDENT</li>
          <li>MESSAGE</li>
          <li>CONTACT</li>
          <li>RSS</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">sorttype:</td>
      <td><strong>String</strong><br/>
        Specifies the sorting order. The order can be one of -
        <ul>
          <li>As Displayed</li>
          <li>Ascending</li>
          <li>Descending</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">linked:</td>
      <td><strong>String</strong><br/>
        Specifies the linked status. Linked list item values are dependent on other lists. The linked can be one of -
        <ul>
          <li>disabled</li>
          <li><i>list id to which this is linked with</i></li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">link:</td>
      <td><strong>Array</strong><br/>
        Provides a list of URLs that can be used to manipulate or access the list.
        <br>
        <ul>
          <li>uri - the link to access the list</li>
          <li>rel - the descriptor for what the link will do</li>
          <li>method - the HTTP method to use with this particular link</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<h2 id="details-of-a-specific-custom-list">Details of a Specific Custom List</h2>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/customlists/4E2101D0E5D16229?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.customlist-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:customlabel</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id&gt;</span>4E2101D0E5D16229<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;name&gt;</span>Category<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;type&gt;</span>INCIDENT<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;createdDate&gt;</span>02/08/11 14:20<span class="nt">&lt;/createdDate&gt;</span>
    <span class="nt">&lt;sortType&gt;</span>As Displayed<span class="nt">&lt;/sortType&gt;</span>
    <span class="nt">&lt;linked&gt;</span>disabled<span class="nt">&lt;/linked&gt;</span>
    <span class="nt">&lt;customlabellists&gt;</span>
        <span class="nt">&lt;customlabellist&gt;</span>
            <span class="nt">&lt;name&gt;</span>Internal Systems<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>Internal Systems<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/customlabellist&gt;</span>
        <span class="nt">&lt;customlabellist&gt;</span>
            <span class="nt">&lt;name&gt;</span>External Systems<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>External Systems<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/customlabellist&gt;</span>
        <span class="nt">&lt;customlabellist&gt;</span>
            <span class="nt">&lt;name&gt;</span>Infrastructure<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>Infrastructure<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/customlabellist&gt;</span>
    <span class="nt">&lt;/customlabellists&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/customlists/40E5D16229E2101D?apikey=7qyxe7z37tsdy9spv6sw6uec"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/ns2:customlabel&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">customlist</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"4E2101D0E5D16229"</span><span class="p">,</span><span class="x">
  </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"Category"</span><span class="p">,</span><span class="x">
  </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"INCIDENT"</span><span class="p">,</span><span class="x">
  </span><span class="s">"createdDate"</span><span class="o">:</span><span class="x"> </span><span class="s">"02/08/11 14:20"</span><span class="p">,</span><span class="x">
  </span><span class="s">"sortType"</span><span class="o">:</span><span class="x"> </span><span class="s">"As Displayed"</span><span class="p">,</span><span class="x">
  </span><span class="s">"linked"</span><span class="o">:</span><span class="x"> </span><span class="s">"disabled"</span><span class="p">,</span><span class="x">
  </span><span class="s">"customlabellists"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"Internal Systems"</span><span class="p">,</span><span class="x">
      </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">"Internal Systems"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"External Systems"</span><span class="p">,</span><span class="x">
      </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">"External Systems"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"Infrastructure"</span><span class="p">,</span><span class="x">
      </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">"Infrastructure"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">],</span><span class="x">
  </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/customlists/40E5D16229E2101D?apikey=7qyxe7z37tsdy9spv6sw6uec"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>To retrieve the details of a specific list, the end point must be passed with the custom list ID. The link can be usually found in the <code class="prettyprint">link</code> attribute of each customlist item.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Response Elements</th>
        </tr>
    </thead>
    <tbody>
    <tr>
      <td style="text-align: right; font-weight: bold;">id:</td>
      <td><strong>Number</strong><br/>
        Specifies the unique id of the List.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">name:</td>
      <td><strong>String</strong><br/>
        Specifies the name of the List.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">type:</td>
      <td><strong>String</strong><br/>
        Specifies the type. The type can be one of -
        <ul>
          <li>INCIDENT</li>
          <li>MESSAGE</li>
          <li>CONTACT</li>
          <li>RSS</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">createdDate:</td>
      <td><strong>String</strong><br/>
        Specifies the date of the List creation.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">sorttype:</td>
      <td><strong>String</strong><br/>
        Specifies the sorting order. The order can be one of -
        <ul>
          <li>As Displayed</li>
          <li>Ascending</li>
          <li>Descending</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">linked:</td>
      <td><strong>String</strong><br/>
        Specifies the linked status. Linked list item values are dependent on other lists. The linked can be one of -
        <ul>
          <li>disabled</li>
          <li><i>list id to which this is linked with</i></li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">customlabellists:</td>
      <td><strong>Object</strong><br/>
        Contains the individual list items that make up this list. <br><br>The `name` is the text that is shown to the user, where as the `value` is the internally passed in value.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">link:</td>
      <td><strong>Array</strong><br/>
        Provides a list of URLs that can be used to manipulate or access the list.
        <br>
        <ul>
          <li>uri - the link to access the list</li>
          <li>rel - the descriptor for what the link will do</li>
          <li>method - the HTTP method to use with this particular link</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<h2 id="search-or-filter-on-custom-lists">Search or Filter on Custom Lists</h2>

<p>API allows you to be able to query the <code class="prettyprint">GET /customlists</code> endpoint using the following filters.</p>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/customlists?apikey=[your_api_key]&amp;field=value
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>

<p>All filter options are to be passed in as URL query parameters.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Search Criteria</th>
        </tr>
    </thead>
    <tbody>
    <tr>
      <td style="text-align: right; font-weight: bold;">name:</td>
      <td>/customlists?name=Category</td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">type:</td>
      <td>/customlists?type=Message</td>
    </tr>
  </tbody>
</table>

<p><strong>Note:</strong> The API currently results in a <code class="prettyprint">404 Not Found</code> when there are no activities present in the log for a given search criteria. This should not be not confused with a failed response. But rather as <code class="prettyprint">No Data Found</code>.</p>

<h2 id="creating,-updating,-and-deleting-a-custom-list">Creating, Updating, and Deleting a custom list</h2>

<p>API currently only supports retrieving the custom lists. It does not support the creation, update, and delete of the custom list.</p>

        <h1 id="users">Users</h1>

<blockquote>
<p>API Endpoint</p>

<blockquote>
<ul>
<li>generic</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/users/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.user-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/users/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">user</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">&gt; Resource type

- application/vnd.whispir.user-v1+xml
- application/vnd.whispir.user-v1+json


&gt; Methods supported

- GET
- POST
- PUT
- DELETE
</code></pre>

<p>Access to use the Whispir API, Platform and its features is strictly limited to user permission set. One needs to have 
proper permissions to access all the features provided by the platform, and when using the API, have appropriate permissions to modify the user attributes of themselves or others in their company workspaces.</p>

<blockquote>
<p>Invalid Permission Error</p>

<blockquote>
<p>If the API user account does not have the permissions needed to operate on an user account, the API will give a <code class="prettyprint">403 Forbidden</code> response. So make sure the account has all the necessary permissions. Use Whispir Platform Environment URL given in the whispir.io apps screen to login and manage the permissions</p>
</blockquote>
</blockquote>

<p>The Whispir API provides the /users endpoint to serve the purpose of managing the users of the platform. One can
 - Retrieve users of a workspace
 - Add new users
 - Modify user status (except their own)
 - Modify user&rsquo;s information
 - Delete user</p>

<p>An User ability to access the features is limited to the <code class="prettyprint">STATUS</code> he/she is assigned to. They can have only one status at any given point of time and the change of status is controlled by the &ldquo;user state machine&rdquo;. The state machine follows the following tabulated rules -</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">User Status</th>
        </tr>
    </thead>
    <tbody>
    <tr>
      <td style="text-align: right; font-weight: bold;">PENDING (P)</td>
      <td>User has been just created and this is the default status one will be given.<br/>
      Status can be modified to - 
      <ul>
        <li>INACTIVE</li>
        <li>DELETED</li>
      </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">INACTIVE (I)</td>
      <td>User has been set to Inactive Status. During this state they CANNOT access the platform until they are set to Active again.<br/>
      Status can be modified to - 
      <ul>
        <li>ACTIVE</li>
        <li>DELETED</li>
      </ul>
    <br/>
    <b>Note:</b> If you are the user who is changing your status, beware that setting yourself to InActive results you in being locked out of your own account. Always use another account in your company to change your account status. Have a beer to get this slide down your throat. I did too.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">SUSPENDED (B)</td>
      <td>User has been Suspended. In this State they can access the platform, but cannot use the features on the platform<br/>
      Status can be modified to - 
      <ul>
        <li>ACTIVE</li>
        <li>DELETED</li>
      </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">DELETED (D)</td>
      <td>User has been Deleted. This is Soft delete, so their record exists, but they are marked as deleted.<br/>
      Status cannot be modified once set to Deleted.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">ACTIVE (A)</td>
      <td>User is Active. They can use all the features (they are assigned/allowed to) on the platform.<br/>
      Status can be modified to - 
      <ul>
        <li>SUSPENDED</li>
        <li>DELETED</li>
      </ul> 
      </td>
    </tr>
  </tbody>
</table>

<p>So for example -</p>

<p>If an user has been newly created, the default status is PENDING (P). Now, to Activate the user, the User must be set to INACTIVE first via a <code class="prettyprint">PUT</code> request and then finally set to ACTIVE (A) via another <code class="prettyprint">PUT</code>. They cannot be directly set to (A) from (P). </p>

<h2 id="creating-new-user">Creating new User</h2>

<blockquote>
<p>Creating new User</p>

<blockquote>
<p>Users can easily be created by using the following request structure</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">POST https://api.&lt;region&gt;.whispir.com/users?apikey=[your api key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.user-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:user</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;firstName&gt;</span>John<span class="nt">&lt;/firstName&gt;</span>
    <span class="nt">&lt;lastName&gt;</span>Wick<span class="nt">&lt;/lastName&gt;</span>
    <span class="nt">&lt;userName&gt;</span>John.Wick<span class="nt">&lt;/userName&gt;</span>
    <span class="nt">&lt;password&gt;</span>AmF10gt_x<span class="nt">&lt;/password&gt;</span>
    <span class="nt">&lt;timezone&gt;</span>Australia/Melbourne<span class="nt">&lt;/timezone&gt;</span>
    <span class="nt">&lt;workEmailAddress1&gt;</span>jsmith@testcompany.com<span class="nt">&lt;/workEmailAddress1&gt;</span>
    <span class="nt">&lt;workMobilePhone1&gt;</span>61423456789<span class="nt">&lt;/workMobilePhone1&gt;</span>
    <span class="nt">&lt;workCountry&gt;</span>Australia<span class="nt">&lt;/workCountry&gt;</span>
<span class="nt">&lt;/ns2:user&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">user</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"John"</span><span class="p">,</span><span class="x">
    </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Wick"</span><span class="p">,</span><span class="x">
    </span><span class="s">"userName"</span><span class="o">:</span><span class="x"> </span><span class="s">"John.Wick"</span><span class="p">,</span><span class="x">
    </span><span class="s">"password"</span><span class="o">:</span><span class="x"> </span><span class="s">"AmF10gt_x"</span><span class="p">,</span><span class="x">
    </span><span class="s">"timezone"</span><span class="o">:</span><span class="x"> </span><span class="s">"Australia/Melbourne"</span><span class="p">,</span><span class="x">
    </span><span class="s">"workEmailAddress1"</span><span class="o">:</span><span class="x"> </span><span class="s">"jwick@testcompany.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"workMobilePhone1"</span><span class="o">:</span><span class="x"> </span><span class="s">"61423456789"</span><span class="p">,</span><span class="x">
    </span><span class="s">"workCountry"</span><span class="o">:</span><span class="x"> </span><span class="s">"Australia"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The successful response will be a 201 with the details of the user created and their associated unique <code class="prettyprint">mri</code>.</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns3:user</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;userName&gt;</span>John.Wick<span class="nt">&lt;/userName&gt;</span>
    <span class="nt">&lt;password&gt;&lt;/password&gt;</span>
    <span class="nt">&lt;status&gt;</span>PENDING<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;firstName&gt;</span>John<span class="nt">&lt;/firstName&gt;</span>
    <span class="nt">&lt;lastName&gt;</span>Wick<span class="nt">&lt;/lastName&gt;</span>
    <span class="nt">&lt;personalEmailAddress2&gt;&lt;/personalEmailAddress2&gt;</span>
    <span class="nt">&lt;personalCountry&gt;</span>Australia<span class="nt">&lt;/personalCountry&gt;</span>
    <span class="nt">&lt;workEmailAddress1&gt;</span>jwick@testcompany.com<span class="nt">&lt;/workEmailAddress1&gt;</span>
    <span class="nt">&lt;workMobilePhone1&gt;</span>61423456789<span class="nt">&lt;/workMobilePhone1&gt;</span>
    <span class="nt">&lt;workCountry&gt;</span>Australia<span class="nt">&lt;/workCountry&gt;</span>
    <span class="nt">&lt;workPostalCountry&gt;</span>Australia<span class="nt">&lt;/workPostalCountry&gt;</span>
    <span class="nt">&lt;timezone&gt;</span>Australia/Melbourne<span class="nt">&lt;/timezone&gt;</span>
    <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/users/AF48A9EC3F02E43C?apikey=[your api key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/users?apikey=[your api key]"</span> <span class="na">rel=</span><span class="s">"updateUser"</span> <span class="na">method=</span><span class="s">"PUT"</span> <span class="na">type=</span><span class="s">"application/vnd.whispir.user-v1+xml,application/vnd.whispir.user-v1+json"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/users/AF48A9EC3F02E43C?apikey=[your api key]"</span> <span class="na">rel=</span><span class="s">"deleteUser"</span> <span class="na">method=</span><span class="s">"DELETE"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/ns3:user&gt;</span>

</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
  </span><span class="s">"userName"</span><span class="o">:</span><span class="x"> </span><span class="s">"John.Wick"</span><span class="p">,</span><span class="x">
  </span><span class="s">"password"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
  </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"PENDING"</span><span class="p">,</span><span class="x">
  </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"John"</span><span class="p">,</span><span class="x">
  </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Wick"</span><span class="p">,</span><span class="x">
  </span><span class="s">"personalEmailAddress2"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
  </span><span class="s">"personalCountry"</span><span class="o">:</span><span class="x"> </span><span class="s">"Australia"</span><span class="p">,</span><span class="x">
  </span><span class="s">"workEmailAddress1"</span><span class="o">:</span><span class="x"> </span><span class="s">"jwick@testcompany.com"</span><span class="p">,</span><span class="x">
  </span><span class="s">"workMobilePhone1"</span><span class="o">:</span><span class="x"> </span><span class="s">"61423456789"</span><span class="p">,</span><span class="x">
  </span><span class="s">"workCountry"</span><span class="o">:</span><span class="x"> </span><span class="s">"Australia"</span><span class="p">,</span><span class="x">
  </span><span class="s">"workPostalCountry"</span><span class="o">:</span><span class="x"> </span><span class="s">"Australia"</span><span class="p">,</span><span class="x">
  </span><span class="s">"timezone"</span><span class="o">:</span><span class="x"> </span><span class="s">"Australia/Melbourne"</span><span class="p">,</span><span class="x">
  </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/users/AF48A9EC3F02E43C?apikey=[your api key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/users/AF48A9EC3F02E43C?apikey=[your api key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"updateUser"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"PUT"</span><span class="p">,</span><span class="x">
      </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"application/vnd.whispir.user-v1+xml,application/vnd.whispir.user-v1+json"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/users/AF48A9EC3F02E43C?apikey=[your api key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"deleteUser"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"DELETE"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>To create a new user, you can use the <code class="prettyprint">/users</code> endpoint. The method is POST. Ensure that the necessary permissions are provided to the API account to create or modify user accounts.</p>

<p>When creating an account, the following fields are mandatory:</p>

<ul>
<li>userName</li>
<li>password</li>
<li>firstName</li>
<li>lastName</li>
<li>timezone</li>
<li>workCountry</li>
</ul>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
    <tr>
      <td style="text-align: right; font-weight: bold;">userName:</td>
      <td><strong>String</strong><br/>
        Specifies the username for the account
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">password:</td>
      <td><strong>String</strong><br/>
        Specifies the password for the account<br>
        <b>Note: </b> The following are the rules for the password:
        <ul>
          <li>Alpha Numeric [a-zA-Z0-9_]</li>
          <li>Must have at least one uppercase and one lowercase character</li>
          <li>Minimum Length is 8 Characters</li>
          <li>Any special characters other than `_` (underscore) cannot be used in the passwords</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">firstName:</td>
      <td><strong>String</strong><br/>
        Specifies the firstName of the user
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">middleName:</td>
      <td><strong>String</strong><br/>
        Specifies the middleName of the user
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">lastName:</td>
      <td><strong>String</strong><br/>
        Specifies the lastName of the user
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">title:</td>
      <td><strong>String</strong><br/>
        The title of the name
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">nickname:</td>
      <td><strong>String</strong><br/>
        Preferred name to be shown in the platfom interface
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">status:</td>
      <td><strong>String</strong><br/>
        Specifies the validity status of the user. The status can be one of - 
        <ul>
          <li>Active (A)</li>
          <li>InActive (I)</li>
          <li>Pending (P)</li>
          <li>Suspended (B)</li>
          <li>Deleted (D)</li>
        </ul>
        <b>Note: </b>The default status is PENDING. One cannot set the status while creation of account. Read `User State Machine` again mentioned above.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">companyName:</td>
      <td><strong>String</strong><br/>
        Specifies the company name
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">jobTitle:</td>
      <td><strong>String</strong><br/>
        Specifies the job title at the company
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">division:</td>
      <td><strong>String</strong><br/>
        Specifies the Division in the company to which this user is associated with
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">department:</td>
      <td><strong>String</strong><br/>
        Specifies the Department in the company to which this user is associated with
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">Teams and Roles:</td>
      <td><strong>String</strong><br/>
        Specifies the primary and Secondary values for each respective variable
        <ul>
          <li>teamName1, teamName2</li>
          <li>role1, role2</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">Work Place Address:</td>
      <td><strong>String</strong><br/>
        Specifies the primary and Secondary values for each respective type. Of all these the <b>workEmailAddress1</b> is the mandatory field.
        <ul>
          <li>workEmailAddress1, workEmailAddress2</li>
          <li>workAddress1, workAddress2</li>
          <li>workSuburb, workState</li>
          <li>workPostCode, workCountry</li>
          <li>workPostalAddress1, workPostalAddress2</li>
          <li>workPostalSuburb, workPostalState</li>
          <li>workPostalPostCode, workPostalCountry</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">Work Place Phones:</td>
      <td><strong>Number</strong><br/>
        Specifies the primary and Secondary values for each respective type. Of all these the <b>workMobilePhone1</b> is the mandatory field.
        <ul>
          <li>workMobilePhone1, workMobilePhone2</li>
          <li>workPhoneAreaCode1, workPhone1</li>
          <li>workPhoneAreaCode2, workPhone2</li>
          <li>workFaxAreaCode1, workFax1</li>
          <li>workSetellitePhone, WorkOtherPhone</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">timezone:</td>
      <td><strong>String</strong><br/>
        Specifies the timezone in which the user lives in. Values in relation to GMT.<br/><br/>
        Supported values are:
        <ul>
          <li>Offset from GMT in the format `+/-NN` e.g. `+10`</li>
          <li>Worldwide Timezone Format in the format `Country/City` e.g. `Australia/Melbourne`</li>
        </ul> 
        For a list of available worldwide timezones, click <a href="http://developer.whispir.com/files/Whispir-Timezones-v1.csv" title="Timezone IDs" target="_blank">here</a>.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">Personal Address:</td>
      <td><strong>String</strong><br/>
        Specifies the primary and Secondary values for each respective type
        <ul>
          <li>personalEmailAddress1, personalEmailAddress2</li>
          <li>personalAddress1, personalAddress2</li>
          <li>personalSuburb, personalState</li>
          <li>personalCountry, personalPostCode</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">Personal Phones:</td>
      <td><strong>Number</strong><br/>
        Specifies the primary and Secondary values for each respective type
        <ul>
          <li>personalPhoneAreaCode1, personalPhone1</li>
          <li>personalPhoneAreaCode2, personalPhone2</li>
          <li>personalFaxAreaCode1, personalFax1</li>
          <li>otherPhoneAreaCode1, otherPhone1</li>
          <li>otherMobile</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">Alias Fields:</td>
      <td><strong>String</strong><br/>
        The other (alias) name and title fields
        <ul>
          <li>otherFirstName, otherLastName, otherTitle</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<h2 id="retrieving-users">Retrieving Users</h2>

<blockquote>
<p>Retrieving a list of Users</p>

<blockquote>
<p>Users can easily be retrieved from the Whispir API using the following endpoints:</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/users?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.user-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 1 of 1<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:Users&gt;</span>
        <span class="nt">&lt;ns2:user&gt;</span>
            <span class="nt">&lt;id&gt;</span>AF48A9EC3F02E43C<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;firstName&gt;</span>Fred<span class="nt">&lt;/firstName&gt;</span>
            <span class="nt">&lt;lastName&gt;</span>Smith<span class="nt">&lt;/lastName&gt;</span>
            <span class="nt">&lt;companyName&gt;</span>Whispir Pte Ltd<span class="nt">&lt;/companyName&gt;</span>
            <span class="nt">&lt;workEmailAddress1&gt;</span>fsmith@testcompany.com<span class="nt">&lt;/workEmailAddress1&gt;</span>
            <span class="nt">&lt;workMobilePhone1&gt;</span>61423456789<span class="nt">&lt;/workMobilePhone1&gt;</span> 
            <span class="nt">&lt;ns2:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
                      <span class="na">rel=</span><span class="s">"self"</span> 
                      <span class="na">uri=</span><span class="s">"http://api.&lt;region&gt;.whispir.com/users/AF48A9EC3F02E43C?apikey=&lt;your_api_key&gt;"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:user&gt;</span>

        ...

    <span class="nt">&lt;/ns2:Users&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">user</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 1 of 1"</span><span class="p">,</span><span class="x">
  </span><span class="s">"Users"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"AF48A9EC3F02E43C"</span><span class="p">,</span><span class="x">
      </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Fred"</span><span class="p">,</span><span class="x">
      </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Smith"</span><span class="p">,</span><span class="x">
      </span><span class="s">"companyName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Whispir Pte Ltd"</span><span class="p">,</span><span class="x">
      </span><span class="s">"workEmailAddress1"</span><span class="o">:</span><span class="x"> </span><span class="s">"fsmith@testcompany.com"</span><span class="p">,</span><span class="x">
      </span><span class="s">"workMobilePhone1"</span><span class="o">:</span><span class="x"> </span><span class="s">"61423456789"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
        </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
        </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"http://api.&lt;region&gt;.whispir.com/users/AF48A9EC3F02E43C?apikey=&lt;your_api_key&gt;"</span><span class="x">
      </span><span class="p">}</span><span class="x">
    </span><span class="p">},</span><span class="x">

    </span><span class="o">...</span><span class="x">

  </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Users can be retrieved quite easily with a GET request to the <code class="prettyprint">/users</code>. A simple /users will result in all users being retrieved with all of their basic identity information. The result will only be limited to users with ACTIVE status. User&rsquo;s with other status will not be listed in the results.</p>

<p>Once the request is placed, the response will be a list of url&rsquo;s to each of the users that the API user has access to/or has requested for via the search criteria. </p>

<p><strong>Note:</strong> The sample request here shows users from the company the existing API user is associated with. You cannot retrieve users list from outside of your company and users with status != ACTIVE.</p>

<h3 id="get-a-specific-user">Get a specific user</h3>

<blockquote>
<p>Retrieving a specific user</p>

<blockquote>
<p>Users can retrieve a specific user by supplying the user ID in the URL.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/users/AF48A9EC3F02E43C?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.user-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:user</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;id&gt;</span>AF48A9EC3F02E43C<span class="nt">&lt;/id&gt;</span>
   <span class="nt">&lt;firstName&gt;</span>Fred<span class="nt">&lt;/firstName&gt;</span>
   <span class="nt">&lt;lastName&gt;</span>Smith<span class="nt">&lt;/lastName&gt;</span>
   <span class="nt">&lt;status&gt;</span>ACTIVE<span class="nt">&lt;/status&gt;</span>
   ... remaining of the user object
   <span class="nt">&lt;ns2:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
             <span class="na">rel=</span><span class="s">"self"</span> 
             <span class="na">uri=</span><span class="s">"http://api.&lt;region&gt;.whispir.com/users/AF48A9EC3F02E43C?apikey=&lt;your_api_key&gt;"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/ns2:user&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">user</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"AF48A9EC3F02E43C"</span><span class="p">,</span><span class="x">
   </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Fred"</span><span class="p">,</span><span class="x">
   </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Smith"</span><span class="p">,</span><span class="x">
   </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"ACTIVE"</span><span class="p">,</span><span class="x">
   </span><span class="o">...</span><span class="x"> </span><span class="n">remaining</span><span class="x"> </span><span class="n">of</span><span class="x"> </span><span class="n">the</span><span class="x"> </span><span class="n">user</span><span class="x"> </span><span class="n">object</span><span class="x">
   </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
     </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
     </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
     </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"http://api.&lt;region&gt;.whispir.com/users/AF48A9EC3F02E43C?apikey=&lt;your_api_key&gt;"</span><span class="x">
   </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>To get details of a specific user, the URI must be passed with the ID of the user. So, the URI shall be: <code class="prettyprint">https://api.&lt;region&gt;.whispir.com/users/AF48A9EC3F02E43C</code> 
Where <code class="prettyprint">AF48A9EC3F02E43C</code> is the user id.</p>

<h3 id="retrieving-workspace-users">Retrieving workspace users</h3>

<blockquote>
<p>Retrieving list of users having access on a workspace</p>

<blockquote>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/workspaces/C727BCE3A813E2B1/users/?apiKey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.user-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 20 of 28<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/C727BCE3A813E2B1/users/?apikey=&lt;your_api_key&gt;&amp;offset=20&amp;limit=20"</span> <span class="na">rel=</span><span class="s">"next"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns2:users&gt;</span>
        <span class="nt">&lt;ns2:user&gt;</span>
            <span class="nt">&lt;id&gt;</span>AF48A9EC3F02E43C<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;firstName&gt;</span>Fred<span class="nt">&lt;/firstName&gt;</span>
            <span class="nt">&lt;lastName&gt;</span>Smith<span class="nt">&lt;/lastName&gt;</span>
            <span class="nt">&lt;companyName&gt;</span>Whispir Pte Ltd<span class="nt">&lt;/companyName&gt;</span>
            <span class="nt">&lt;workEmailAddress1&gt;</span>fsmith@whispir.com<span class="nt">&lt;/workEmailAddress1&gt;</span>
            <span class="nt">&lt;workMobilePhone1&gt;</span>6512348765<span class="nt">&lt;/workMobilePhone1&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/C727BCE3A813E2B1/users/AF48A9EC3F02E43C?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:user&gt;</span>
        <span class="nt">&lt;ns2:user&gt;</span>
            <span class="nt">&lt;id&gt;</span>DFC878BCB2EF9258<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;firstName&gt;</span>John<span class="nt">&lt;/firstName&gt;</span>
            <span class="nt">&lt;lastName&gt;</span>Wick<span class="nt">&lt;/lastName&gt;</span>
            <span class="nt">&lt;companyName&gt;</span>SHIELD<span class="nt">&lt;/companyName&gt;</span>
            <span class="nt">&lt;workEmailAddress1&gt;</span>jwick@whispir.com<span class="nt">&lt;/workEmailAddress1&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/C727BCE3A813E2B1/users/DFC878BCB2EF9258?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:user&gt;</span>

        ...

    <span class="nt">&lt;/ns2:users&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">user</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"users"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"AF48A9EC3F02E43C"</span><span class="p">,</span><span class="x">
      </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Fred"</span><span class="p">,</span><span class="x">
      </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Smith"</span><span class="p">,</span><span class="x">
      </span><span class="s">"companyName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Whispir Pte Ltd"</span><span class="p">,</span><span class="x">
      </span><span class="s">"workEmailAddress1"</span><span class="o">:</span><span class="x"> </span><span class="s">"fsmith@whispir.com"</span><span class="p">,</span><span class="x">
      </span><span class="s">"workMobilePhone1"</span><span class="o">:</span><span class="x"> </span><span class="s">"6512348765"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/C727BCE3A813E2B1/users/AF48A9EC3F02E43C?apikey=&lt;your_api_key&gt;"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"DFC878BCB2EF9258"</span><span class="p">,</span><span class="x">
      </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"John"</span><span class="p">,</span><span class="x">
      </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Wick"</span><span class="p">,</span><span class="x">
      </span><span class="s">"companyName"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"workEmailAddress1"</span><span class="o">:</span><span class="x"> </span><span class="s">"jwick@whispir.com"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/C727BCE3A813E2B1/users/DFC878BCB2EF9258?apikey=&lt;your_api_key&gt;"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">

    </span><span class="o">...</span><span class="x">

    </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 20 of 28"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/C727BCE3A813E2B1/users/?apikey=&lt;your_api_key&gt;&amp;offset=10&amp;limit=10"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"next"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>To retrieve the list of users, the request is made to via GET to <code class="prettyprint">/workspaces/{:id}/users</code> endpoint.</p>

<p>By default there will be a limit of 20 users returned in a request.</p>

<p>The user will use the limit and offset query parameters to determine how many users they would like to receive. (default when not provided will be limit=20 &amp; offset=0)</p>

<h2 id="searching-for-users">Searching for users</h2>

<blockquote>
<p>Searching for users</p>

<blockquote>
<p>Users can easily use further query parameters to search for specific users within Whispir.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/users?apikey=&lt;your_api_key&gt;&amp;firstName=Sam&amp;sortOrder=desc&amp;sortFields=workEmailAddressPrimary
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.user-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">user</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<p>Users can be searched for in a given company by passing in valid search criteria. The search criteria usually can be any of the following user elements (field names) and will be sent in as part of the URI as query parameters.</p>

<ul>
<li>First Name</li>
<li>Last Name</li>
<li>Title</li>
<li>Job Title</li>
<li>Country</li>
<li>Timezone</li>
<li>Organization Name</li>
<li>Division</li>
<li>Business Unit</li>
<li>Department</li>
<li>Team Name</li>
<li>Role</li>
<li>Additional Team Name</li>
<li>Additional Role</li>
<li>Work Email Address 1</li>
<li>Work Mobile Phone 1</li>
<li>Work Phone Area Code 1</li>
<li>Work Phone 1</li>
<li>Status * (see <em>note</em> below)</li>
</ul>

<p>This searching mechanism can be useful to see if any users exist in the system with a specific email address, phone number, or job role and so on.</p>

<p>The key parameters that are required on the URL to facilitate this search are as follows:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">URI Request Elements as Query Params</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">fieldname:</td>
            <td><strong>String</strong><br/>
                Specifies on this field name of the user object.
                <br><br>
                <b>Ex:</b><br>
                http://api.<region>.whispir.com/users?apikey=<your_api_key><b>&firstName=Sam</b>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">sortOrder:</td>
            <td><strong>String</strong><br/>
                The order in which you require the results to be returned. Either `asc` or `desc`.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">sortFields:</td>
            <td><strong>String</strong><br/>
                The fields that you require the ordering to be performed on. Multiple fields can be provided, separated by a comma.
                <br><br>
                <b>Ex:</b><br>
                http://api.<region>.whispir.com/users?apikey=<your_api_key>&firstName=Sam<b>&sortFields=lastName,jobTitle</b>
            </td>
        </tr>
    </tbody>
</table>

<p><strong>Note:</strong> While searching for users via status, use the short code &lsquo;A&rsquo; for ACTIVE, similarly, &#39;I&rsquo; for INACTIVE, rather than the full words ACTIVE, INACTIVE, etc. so, it is <code class="prettyprint">&amp;status=A</code> not <code class="prettyprint">&amp;status=ACTIVE</code>.</p>

<h2 id="updating-users">Updating users</h2>

<blockquote>
<p>Updating users</p>

<blockquote>
<p>The following endpoints allow users to update users using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 PUT https://api.&lt;region&gt;.whispir.com/users/CB4558257DD86D09?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.user-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:user</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;firstName&gt;</span>John<span class="nt">&lt;/firstName&gt;</span>
    <span class="nt">&lt;lastName&gt;</span>Wick<span class="nt">&lt;/lastName&gt;</span>
    <span class="nt">&lt;timeZone&gt;</span>+8<span class="nt">&lt;/timezone&gt;</span>
    <span class="nt">&lt;jobTitle&gt;&lt;/jobTitle&gt;</span>

    ... remaining of the user object
<span class="nt">&lt;/ns2:user&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">user</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"John"</span><span class="p">,</span><span class="x">
    </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Wick"</span><span class="p">,</span><span class="x">
    </span><span class="s">"timeZone"</span><span class="o">:</span><span class="x"> </span><span class="s">"+8"</span><span class="p">,</span><span class="x">
    </span><span class="s">"jobTitle"</span><span class="o">:</span><span class="x"> </span><span class="s">"Whispir API Specialist"</span><span class="p">,</span><span class="x">

    </span><span class="o">...</span><span class="x"> </span><span class="n">remaining</span><span class="x"> </span><span class="n">of</span><span class="x"> </span><span class="n">the</span><span class="x"> </span><span class="n">user</span><span class="x"> </span><span class="n">object</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The response to the PUT request upon success is a <code class="prettyprint">204 No Content</code> with no content being provided.</p>
</blockquote>
</blockquote>

<p>Updating a user can be performed using a PUT request to the <code class="prettyprint">/users/{id}</code> endpoint. So, to perform this, one must be knowing the exact &ldquo;link&rdquo; associated with the user.</p>

<p>The application must provide all the fields during the update request, even if they are not being updated. </p>

<p><strong>Any missing fields,except for the <code class="prettyprint">password</code> field, will be automatically removed from the existing record.</strong> </p>

<p>The Content-Type can be -</p>

<ul>
<li>application/vnd.whispir.user-v1+xml <strong>or</strong> </li>
<li>application/vnd.whispir.user-v1+json</li>
</ul>

<p><strong>Note:</strong> You cannot selectively update the user fields needed as this is a PUT request. </p>

<p>So the standard process for updating a user record is -</p>

<ol>
<li>GET /users/{id of user}</li>
<li>Update the user field in the object to the required value</li>
<li>PUT /users/{id of user} the new object</li>
</ol>

<p>The response to the PUT request upon success is usually a <code class="prettyprint">204</code> with no content being provided.</p>

<h2 id="deleting-an-user">Deleting an user</h2>

<p>An User can be deleted by calling the DELETE /users/{id} end point.</p>

<blockquote>
<p>Deleting a user</p>

<blockquote>
<p>The following statement allows users to delete users using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 DELETE https://api.&lt;region&gt;.whispir.com/users/124F6B2D46A5A268?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>

<p>Deleting an user can be performed using a DELETE request to the /users/{id} endpoint. So, to perform this, one must be knowing the exact &ldquo;link&rdquo; associated with the user.</p>

<p>After performing this request, the response does not contain any information other than the headers as it is not necessary.</p>

<p>The delete a user if successful shall respond with a <code class="prettyprint">204 No Content</code>.</p>

<h3 id="deleting-multiple-users">Deleting multiple users</h3>

<p>All users in the company can be deleted with a single API call.</p>

<blockquote>
<p>Deleting all users</p>

<blockquote>
<p>The following statement allows a user to delete all users in their company using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 DELETE https://api.&lt;region&gt;.whispir.com/users/?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>

<p>Deleting an user can be performed using a DELETE request to the /users/{id} endpoint. So, to perform this, one must be knowing the exact &ldquo;link&rdquo; associated with the user.</p>

<p>After performing this request, the response does not contain any information other than the headers as it is not necessary.</p>

<p>The delete a user if successful shall respond with a <code class="prettyprint">204 No Content</code>.</p>

<h3 id="activating-an-user-after-the-creation">Activating an User after the creation</h3>

<blockquote>
<p>Activating an newly created user using the &ldquo;user state machine&rdquo; rules</p>

<blockquote>
<p>The following steps have to followed in exact order.</p>

<p>Step 1</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/users?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key

{user object}
</code></pre>

<blockquote>
<blockquote>
<p>capture the Location header value</p>

<p>Step 2</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/users/{:id}?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>

<blockquote>
<blockquote>
<p>This step retreives the newly created user object</p>

<p>Step 3</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 PUT https://api.&lt;region&gt;.whispir.com/users/{:id}?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key

{userobject}
status : 'INACTIVE'
</code></pre>

<blockquote>
<blockquote>
<p>Step 4</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 PUT https://api.&lt;region&gt;.whispir.com/users/{:id}?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key

{userobject}
status : 'ACTIVE'
</code></pre>

<p>An user when created is assigned the PENDING status. SO, to set the user to ACTIVE, one has to follow the &ldquo;user state machine&rdquo; rules. Here&rsquo;s how we do it - </p>

<ol>
<li>POST /users for user account creation. Capture the <code class="prettyprint">Location</code> header value which is the unique link to the User record. This is used in Step 2</li>
<li>GET /users/{id} for the user object</li>
<li>PUT /users/{id} with STATUS set to &#39;INACTIVE&rsquo; - using the user object retreived in step 2</li>
<li>PUT /users/{id} with STATUS set to &#39;ACTIVE&rsquo; - using the user object retreived in step 2</li>
</ol>

<p><strong>Note:</strong> The status text is case sensitive. Lowercase or mixed case text is invalid. Always use uppercase.</p>

<p><strong>Ex:</strong> active != ACTIVE; inActive != INACTIVE</p>

<h2 id="assigning-an-user-to-workspace">Assigning an user to workspace</h2>

<p>This is currently not supported via the API right now. One can only do this via the Whispir Platform interface.</p>

        <h1 id="events">Events</h1>

<blockquote>
<p>API Endpoint</p>

<blockquote>
<ul>
<li>generic</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/events/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.event-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/events/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">event</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<ul>
<li>limited to a workspace</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/workspaces/{:id}/events/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.event-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/workspaces/{:id}/events/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">event</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">&gt; Resource type

- application/vnd.whispir.event-v1+xml
- application/vnd.whispir.event-v1+json


&gt; Methods supported

- GET
- POST
- PUT
- DELETE
</code></pre>

<p>Whispir’s Events API allows users to capture, create and manage Events (including Incidents, Issues, Places, and Assets). Link multi-channel communications to each event to track report and disseminate information textually and Geo-spatially.</p>

<p>The Whispir Events module allows customers to easily input, invoke and track communications about current events that are taking place within their organisation. The Events can be customized to accept events and associated information from external systems or to capture more complex information around an event.</p>

<p>Events can be created from within the Whispir Conversation Platform through the web interface, or via the REST or WSDL APIs. This information is then available for the author to distribute templated messages, or (if location enabled) for other users to view on Whispir’s map interface.</p>

<p>Events within the Whispir Conversation Platform are generally active for a short period of time, most commonly defined by a Start Date and an End Date.  Once the end date of the event is reached the event is deemed closed. </p>

<p>Whispir Consultants work with each customer to design and build an events module that is specific to them, ensuring that the fields, applicable values, and captured information maps directly to the organisational process.</p>

<p>An example of an event could be an outage of an internal system or service, or an organisation wide event 
<strong>e.g.</strong> a media launch, a network outage or an incident (bush fires, a river flooding)</p>

<h2 id="creating-an-event">Creating an Event</h2>

<p>As Whispir works with each organisation to build out the requirements of the events module, the required fields are minimal. The bulk of the event information is from fields that are generic, and only applicable to the customer that is using the module.</p>

<p>Events have sub sections under them called as &lsquo;actions&rsquo; (maximum of 10). When an Event occurs/is triggered, the related actions are to be performed. Each action has an owner, a set time, and details associated with it. The owner or responsible person for the event could be a <code class="prettyprint">/contacts</code> in the system. This ensures that proper communication is sent to the individual based on their preferred channel (message, email, voice) automatically without having to key in the phone, email, and other communication information again.</p>

<p>The Events module captures information specific to an event so the information can be used in as part of messaging for the duration of the event. The Events module can be customized to accept events and associated information from external systems or to capture more complex information around an event.</p>

<p>Events are created within a workspace. As they are custom built the information to be captured will depend on your organisations specific requirements. Generally at a minimum an event will have a label, start date, and a status.</p>

<p>Most importantly, to create an event, one must have the create access for Incident row in the Roles &amp; Permission section of the account settings.</p>
<pre><code class="highlight plaintext">&lt;xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://schemas.api.&lt;region&gt;.whispir.com/dap" xmlns:xs="http://www.w3.org/2001/XMLSchema"&gt;
  &lt;xs:element name="link"&gt;
    &lt;xs:complexType&gt;
      &lt;xs:simpleContent&gt;
        &lt;xs:extension base="xs:string"&gt;
          &lt;xs:attribute type="xs:string" name="method"/&gt;
          &lt;xs:attribute type="xs:string" name="rel"/&gt;
          &lt;xs:attribute type="xs:anyURI" name="uri"/&gt;
        &lt;/xs:extension&gt;
      &lt;/xs:simpleContent&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;
  &lt;xs:element name="eventLabel" type="xs:string"/&gt;
  &lt;xs:element name="status" type="xs:string"/&gt;
  &lt;xs:element name="eventFormList"&gt;
    &lt;xs:complexType&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element type="xs:string" name="formName"/&gt;
        &lt;xs:element name="eventFieldList" maxOccurs="unbounded" minOccurs="0"&gt;
          &lt;xs:complexType&gt;
            &lt;xs:sequence&gt;
              &lt;xs:element type="xs:string" name="name"/&gt;
              &lt;xs:element type="xs:string" name="value" minOccurs="0"/&gt;
            &lt;/xs:sequence&gt;
          &lt;/xs:complexType&gt;
        &lt;/xs:element&gt;
      &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;
&lt;/xs:schema&gt;

</code></pre>

<p><strong>Required Fields:</strong></p>

<ul>
<li>Event Label – The concatenated unique Event ID and Event Name e.g. (2701095 - Outage of Local Systems in Sydney)</li>
<li>Event Status – The current status of the event e.g. &#39;Open&rsquo; or &#39;Inactive&rsquo;</li>
</ul>

<p>and one set of Actions for this event</p>

<ul>
<li>Action Date - The date and time of the action</li>
<li>Action Owner - The contact who is responsible for this action execution</li>
<li>Action Detail - The details of the action</li>
</ul>

<p>All other fields on the event are defined through name/value pairs. E.g.</p>

<p><strong>Optional Fields:</strong></p>

<ul>
<li>Event Field Name – Start Date</li>
<li><p>Event Field Value – 11 Sep 2015</p></li>
<li><p>Event Field Name – End Date</p></li>
<li><p>Event Field Value – 12 Sep 2015</p></li>
<li><p>Event Field Name – Type</p></li>
<li><p>Event Field Value – Notification</p></li>
<li><p>contd..,</p></li>
</ul>

<p>You can refer to the schema for a detail of the object structure.</p>

<blockquote>
<p>Creating an event</p>

<blockquote>
<p>Event can easily be created by using the following request structure</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP1.1 POST https://api.&lt;region&gt;.whispir.com/events?apikey=&lt;your_api_key&gt;
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.event-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns3:event</span>
    <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span>
    <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;eventLabel&gt;</span>2701095 - Outage of Local Systems in Sydney<span class="nt">&lt;/eventLabel&gt;</span>
    <span class="nt">&lt;status&gt;</span>Open<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;eventFormList&gt;</span>
        <span class="nt">&lt;formName&gt;</span>MetroEvent<span class="nt">&lt;/formName&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>summary<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>Outage of systems in Sydney<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>status<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>Open<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>description<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>ATMs are non responsive, teams to be sent to investigate.<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>type<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>Notification<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>category<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>Internal<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>startDate<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>26/05/2015 17:51:00<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionOwner1<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>John Wick<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDate1/name&gt;
            <span class="nt">&lt;value&gt;</span>11/09/2015 17:51:00<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDetails1<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>investigation to take place asap.<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>severity<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>Severity 3 - Minor Outage (Some Service Degradation)<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
    <span class="nt">&lt;/eventFormList&gt;</span>
<span class="nt">&lt;/ns3:event&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">event</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"eventLabel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"2701095 - Outage of Local Systems in Sydney"</span><span class="p">,</span><span class="x">
    </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Open"</span><span class="p">,</span><span class="x">
    </span><span class="s">"eventFormList"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"formName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"MetroEvent"</span><span class="p">,</span><span class="x">
        </span><span class="s">"eventFieldList"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> 
            </span><span class="p">{</span><span class="x">
              </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"summary"</span><span class="p">,</span><span class="x">
              </span><span class="s">"value"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Outage of systems in Sydney"</span><span class="x">
            </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
              </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"status"</span><span class="p">,</span><span class="x">
              </span><span class="s">"value"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Open"</span><span class="x">
            </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
              </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"description"</span><span class="p">,</span><span class="x">
              </span><span class="s">"value"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ATMs are non responsive, teams to be sent to investigate."</span><span class="x">
            </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
              </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"category"</span><span class="p">,</span><span class="x">
              </span><span class="s">"value"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Internal"</span><span class="x">
            </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
              </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"startDate"</span><span class="p">,</span><span class="x">
              </span><span class="s">"value"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"11/09/2015 17:41:00"</span><span class="x">
            </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
              </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"actionOwner1"</span><span class="p">,</span><span class="x">
              </span><span class="s">"value"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"John Wick"</span><span class="x">
            </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
              </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"actionDate1"</span><span class="p">,</span><span class="x">
              </span><span class="s">"value"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"11/09/2015 17:41:00"</span><span class="x">
            </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
              </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"actionDetails1"</span><span class="p">,</span><span class="x">
              </span><span class="s">"value"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"investigation to take place asap."</span><span class="x">
            </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
              </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"severity"</span><span class="p">,</span><span class="x">
              </span><span class="s">"value"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Severity 3 - Minor Outage (Some Service Degradation)"</span><span class="x">
            </span><span class="p">}</span><span class="x"> 
        </span><span class="p">]</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The request if successful shall return a <code class="prettyprint">201 Created</code> along with the complete event object.</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:event</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id&gt;</span>421FEEBA93GF53A2<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;eventLabel&gt;</span>2701095 - Outage of Local Systems in Sydney<span class="nt">&lt;/eventLabel&gt;</span>
    <span class="nt">&lt;status&gt;</span>Open<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;eventFormList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>summary<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>Outage of systems in Sydney<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>location<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>0.0,0.0<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>endDate<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>type<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDetails2<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDetails3<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDetails1<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>investigation to take place asap.<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>priority<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>description<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>ATMs are non responsive, teams to be sent to investigate.<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDetails8<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDetails9<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDetails6<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDetails7<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDetails4<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionOwner10<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDetails5<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>platform<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>services<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>status<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>Open<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>openedBy<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>category<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>Internal<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>externalVendor<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>externalCaseNumber<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionOwner6<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>startDate<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>11/09/2015 00:00:00<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionOwner5<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionOwner8<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionOwner7<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionOwner9<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDate8<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDate9<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDetails10<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDate4<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionOwner2<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDate5<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionOwner1<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>John Wick<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDate6<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionOwner4<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDate7<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionOwner3<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDate1<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>11/09/2015 00:00:00<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDate3<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDate2<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>locations<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>impactToOrg<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>actionDate10<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>locationDisplay<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>subCategory<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>severity<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>Severity 3 - Minor Outage (Some Service Degradation)<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>duration<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>lineNumber<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;eventFieldList&gt;</span>
            <span class="nt">&lt;name&gt;</span>impactCondition<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>
        <span class="nt">&lt;/eventFieldList&gt;</span>
        <span class="nt">&lt;formName&gt;</span>MetroEvent<span class="nt">&lt;/formName&gt;</span>
    <span class="nt">&lt;/eventFormList&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/26C20B1A09XS3RA2/events/421FEEBA93GF53A2?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/26C20B1A09XS3RA2/events/421FEEBA93GF53A2?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"PUT"</span> <span class="na">type=</span><span class="s">"application/vnd.whispir.event-v1+xml,application/vnd.whispir.event-v1+json"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/26C20B1A09XS3RA2/messages?label=2701095%20-%20Outage%20of%20Local%20Systems%20in%20Sydney"</span> <span class="na">rel=</span><span class="s">"retrieveEventMessages"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/ns2:event&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
  </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"421FEEBA93GF53A2"</span><span class="p">,</span><span class="x">
  </span><span class="s">"eventLabel"</span><span class="o">:</span><span class="x"> </span><span class="s">"2701095 - Outage of Local Systems in Sydney"</span><span class="p">,</span><span class="x">
  </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"Active"</span><span class="p">,</span><span class="x">
  </span><span class="s">"eventFormList"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"formName"</span><span class="o">:</span><span class="x"> </span><span class="s">"MetroEvent"</span><span class="p">,</span><span class="x">
      </span><span class="s">"eventFieldList"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"summary"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">"Outage of systems in Sydney"</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"location"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">"0.0,0.0"</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"endDate"</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"type"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDetails2"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDetails3"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDetails1"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">"investigation to take place asap."</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"priority"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"description"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">"ATMs are non responsive, teams to be sent to investigate."</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDetails8"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDetails9"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDetails6"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDetails7"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDetails4"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionOwner10"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDetails5"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"platform"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"services"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"status"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">"Open"</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"openedBy"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"category"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">"Internal"</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"externalVendor"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"externalCaseNumber"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionOwner6"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"startDate"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">"11/09/2015 00:00:00"</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionOwner5"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionOwner8"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionOwner7"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionOwner9"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDate8"</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDate9"</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDetails10"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDate4"</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionOwner2"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDate5"</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionOwner1"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">"John Wick"</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDate6"</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionOwner4"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDate7"</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionOwner3"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDate1"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">"11/09/2015 00:00:00"</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDate3"</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDate2"</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"locations"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"impactToOrg"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"actionDate10"</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"locationDisplay"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"subCategory"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"severity"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">"Severity 3 - Minor Outage (Some Service Degradation)"</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"duration"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"lineNumber"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"impactCondition"</span><span class="p">,</span><span class="x">
          </span><span class="s">"value"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">],</span><span class="x">
  </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/26C20B1A09XS3RA2/events/421FEEBA93GF53A2?apikey=&lt;your_api_key&gt;"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/26C20B1A09XS3RA2/events/421FEEBA93GF53A2?apikey=&lt;your_api_key&gt;"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"PUT"</span><span class="p">,</span><span class="x">
      </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"application/vnd.whispir.event-v1+xml,application/vnd.whispir.event-v1+json"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/workspaces/26C20B1A09XS3RA2/messages?label=2701095%20-%20Outage%20of%20Local%20Systems%20in%20Sydney"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"retrieveEventMessages"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
    <tr>
      <td style="text-align: right; font-weight: bold;">eventLabel:</td>
      <td><strong>String</strong><br/>
        Specifies the name of the label used for the messages sent under this event
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">status:</td>
      <td><strong>String</strong><br/>
        Specifies the status of the event. The status can be one of - 
        <ul>
          <li>Active</li>
          <li>Resolved</li>
        </ul>
        <b>Note: </b>The default status is Open.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">summary:</td>
      <td><strong>String</strong><br/>
        Specifies the summary of the event. A single liner that can be equivalent to the Subject of an email.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">description:</td>
      <td><strong>String</strong><br/>
        Specifies the detailed description of the event
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">location:</td>
      <td><strong>String</strong><br/>
        Specifies the latitude, longitude values of the event location. This helps to show the event location on Whispir&rsquo;s geo-map feature set and coordinated communication based on the geo location of the event.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">startDate:</td>
      <td><strong>String</strong><br/>
        Specifies the startdate of the event. This is a mandatory value.<br>
        The date should be in the format of DD/MM/YYYY HH:MI:SS in 24hrs format. <b>e.g</b> 11/09/2015 17:21:00 for 11th September 2015 5.21 PM.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">endDate:</td>
      <td><strong>String</strong><br/>
        Specifies the endDate of the event.<br>
        The date should be in the format of DD/MM/YYYY HH:MI:SS in 24hrs format. <b>e.g.</b> 11/09/2015 19:26:00 for 11th September 2015 7.26 PM.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">severity:</td>
      <td><strong>String</strong><br/>
        Specifies the severity of the event. While this can change from company to company, the standard value set to be chosen from is -
        <ul>
          <li>Severity 5 - Routine Maintenance Tasks</li>
          <li>Severity 4 - Scheduled System Changes</li>
          <li>Severity SL3 - Minor Outage (Some Service Degradation)</li>
          <li>Severity SL2 - Moderate Outage (Service Degradation)</li>
          <li>Severity SL1 - Major Outage (Significant Service Unavailablity)</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">Priority:</td>
      <td><strong>String</strong><br/>
        Specifies the priority of the event. While this can change from company to company, the standard value set to be chosen from is -
        <ul>
          <li>Priority 5 - No Set Resolution Period</li>
          <li>Priority 4 - &lt;1 week Resolution</li>
          <li>Priority 3 - &lt;3 day Resolution</li>
          <li>Priority 2 - &lt;1 day Resolution</li>
          <li>Priority 1 - &lt;2hr Resolution</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">duration:</td>
      <td><strong>String</strong><br/>
        The duration of the event in HH:MI:SS. <b>e.g. </b>02:05:00
        <br>This can be substituted in the place of end date if required. Or a subset of the time between the start and end Dates.
      </td>
    </tr>
    <tr>
      <td style="text-align: left; font-weight: bold;" colspan="2">
        &ndash; Event categorization attributes &ndash;
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">category:</td>
      <td><strong>String</strong><br/>
        Specifies the category of event. The default values to choose from are -
        <ul>
          <li>Internal Systems</li>
          <li>External Systems</li>
          <li>Infrasturcture</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">subcategory:</td>
      <td><strong>String</strong><br/>
        Specifies the subcategory in the category. The default values to choose from are -
        <ul>
          <li>Customer Impact</li>
          <li>Cust &amp; Staff Impact</li>
          <li>Staff Impact</li>
          <li>Impact Unknown</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">type:</td>
      <td><strong>String</strong><br/>
        Specifies the type of event. The default values to choose from are -
        <ul>
          <li>Multiple Issues</li>
          <li>NIL</li>
          <li>Network</li>
          <li>Applications</li>
          <li>Mobile Apps</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">externalVendor:</td>
      <td><strong>String</strong><br/>
        Specifies the name/contact who is the external vendor related to this event
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">lineNumber:</td>
      <td><strong>String</strong><br/>
        Specifies the line Number (production lines)
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">externalCaseNumber:</td>
      <td><strong>String</strong><br/>
        Specifies the number as tracked by an external party realted to this event
      </td>
    </tr>
    <tr>
      <td style="text-align: left; font-weight: bold;" colspan="2">
        &ndash; Services effected by this event &ndash;
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">platform:</td>
      <td><strong>String</strong><br/>
        Specifies the platform in the company to which this event is associated with
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">services:</td>
      <td><strong>String</strong><br/>
        Specifies the service in the company to which this event is associated with
      </td>
    </tr>
    <tr>
      <td style="text-align: left; font-weight: bold;" colspan="2">
        &ndash; Impact of this event &ndash;
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">impactCondition:</td>
      <td><strong>String</strong><br/>
        Specifies the impact condition of this event to the company. These values can be configured via custom lists as these can be very specific to the company. The default list to choose from are - 
        <ul>
          <li>All services not available</li>
          <li>All services degraded</li>
          <li>Some services not available</li>
          <li>Some services degraded</li>
          <li>No Impact</li>
          <li>Unknown</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">impactToOrg:</td>
      <td><strong>String</strong><br/>
        Specifies the impact of this event to the Organization. These values can be configured via custom lists as these can be very specific to the company. The default list to choose from are - 
        <ul>
          <li>Global</li>
          <li>National</li>
          <li>Local</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">locations:</td>
      <td><strong>String</strong><br/>
        Specifies the impact location of this event to the Organization&rsquo;s operational geographies. These values can be configured via custom lists as these can be very specific to the company.
      </td>
    </tr>
    <tr>
      <td style="text-align: left; font-weight: bold;" colspan="2">
        &ndash; Actions for this event &ndash;
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">multiple key value sets:</td>
      <td><strong>String</strong><br/>
        Specifies the set of individual actions to be taken during this event.<br>
        Each action consists of - 
        <ul>
          <li>actionDate - the start date of this action in dd/mm/yyyy HH:MI:SS 24hr format</li>
          <li>actionOwner - the individual (contact) responsible for this action&rsquo;s execution</li>
          <li>actionDetails - the detail description of this action</li>
        </ul>
        An event can have a maximum of 10 action. So the action values are numbered.
        actionDate1, actionOwner1, actionDetails1<br>
        actionDate2, actionOwner2, actionDetails2<br>
        &hellip;<br>
        actionDate10, actionOwner10, actionDetails10<br>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">Alias Fields:</td>
      <td><strong>String</strong><br/>
        The other (alias) name and title fields
        <ul>
          <li>otherFirstName, otherLastName, otherTitle</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<h2 id="sending-messages-using-event-data">Sending Messages using event data</h2>

<blockquote>
<p>Sending Messages using event data</p>

<blockquote>
<p>The messages are sent using the /message end point. The added data here is the <code class="prettyprint">eventId</code>. The id of the event whose data has to be used.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=&lt;your_api_key&gt;
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Event Notification<span class="nt">&lt;/subject&gt;</span>    
    <span class="nt">&lt;eventId&gt;</span>2EE7FEA3343662BE<span class="nt">&lt;/eventId&gt;</span>  
    <span class="nt">&lt;body&gt;</span>An event has occurred: @@summary@@.  A resolution is required by @@actionDate1@@.<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 

</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Event Notification"</span><span class="p">,</span><span class="x">
    </span><span class="s">"eventId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"2EE7FEA3343662BE"</span><span class="p">,</span><span class="x">
    </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"An event has occurred: @@summary@@.  A resolution is required by @@actionDate1@@."</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>This would resolve as -</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">Event Notification. 
An event has occurred: Outage of systems in Sydney.  A resolution is required by 11/09/2015 17:41:00.
</code></pre>

<blockquote>
<blockquote>
<p>The response to the request would be as follows -</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 202 Accepted 
Location: http://api.&lt;region&gt;.whispir.com/messages/47707420BAE1288B?apikey=&lt;your_api_key&gt;  

</code></pre>

<blockquote>
<blockquote>
<p>Once can also use the templates to make the message more structured.</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Event Notification<span class="nt">&lt;/subject&gt;</span>    
    <span class="nt">&lt;eventId&gt;</span>2EE7FEA3343662BE<span class="nt">&lt;/eventId&gt;</span>  
    <span class="nt">&lt;messageTemplateId&gt;</span>BCFD647BCD83FED893<span class="nt">&lt;/messageTemplateId&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 

</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Event Notification"</span><span class="p">,</span><span class="x">
    </span><span class="s">"eventId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"2EE7FEA3343662BE"</span><span class="p">,</span><span class="x">
    </span><span class="s">"messageTemplateId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"BCFD647BCD83FED893"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Once you have completed creating your event data into the Whispir Platform, the next logical step is to be able to deliver a notification about the event.</p>

<p>This action can be performed using the existing Messages endpoint, with the Event ID as an attribute of the message.</p>

<p>Including this Event ID will link the message to the event, and allow you to use any attribute of the Event within your message payload.</p>

<ul>
<li>Any event fields populated on the event will automatically be populated within the message</li>
<li>Any attributes that are supplied within the message will take priority over any attributes that are from the event.</li>
<li>The user should not be required to enter any &#39;attributes&rsquo; as these will be retrieved from the linked event.</li>
<li>The event fields will automatically populate the attributes in the message body (based on the relationships set in the Admin &gt; Settings &gt; Attributes &gt; Message Event Attribute Map)</li>
<li>The event label will be added to the label field in the message within the Whispir application</li>
<li>If the event does not contain an event field, and there is no relevant attribute field supplied in the message payload, the @@ tag will not be resolved.</li>
<li>If you do not supply an attribute in the message payload, and this has also not been supplied from the event, the field simply will not be resolved within the message.</li>
</ul>

<h2 id="retrieving-messages-sent-in-relation-to-the-event">Retrieving messages sent in relation to the event</h2>

<blockquote>
<p>Sample URI for retrieveEventMessages</p>
</blockquote>
<pre><code class="highlight xml"><span class="nt">&lt;ns2:link</span> 
        <span class="na">uri=</span><span class="s">"http://api.&lt;region&gt;.whispir.com/messages?label=657126%20Outage%20of%20systems%20in%20Sydney"</span> 
        <span class="na">rel=</span><span class="s">"retrieveEventMessages"</span> 
        <span class="na">method=</span><span class="s">"GET"</span> <span class="nt">/&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
   </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"http://api.&lt;region&gt;.whispir.com/messages?label=657126%20Outage%20of%20systems%20in%20Sydney"</span><span class="p">,</span><span class="x">
   </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"retrieveEventMessages"</span><span class="p">,</span><span class="x">
   </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>You can easily retrieve all of the messages that are associated with an Event by using the unique label that is created for each event.</p>

<p>The label that should be used for searching is provided to users in both the /events and /events/<ID> requests as a link element.  The &#39;rel&rsquo; field for this element is: <strong>retrieveEventMessages</strong></p>

<p>The API also supports to use this listing to query the different messages for status or any other purpose. And, any of the features available in Sending Messages, or Advanced Messages, are also available to be used within the Events Messages.</p>

<blockquote>
<p>Sending in request to retrieve Event Messages</p>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/messages?label=657126%20Outage%20of%20systems%20in%20Sydney?apikey=&lt;your_api_key&gt;
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>

<blockquote>
<blockquote>
<p>response</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">Accept: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 1 of 1<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:messages&gt;</span>
        <span class="nt">&lt;ns2:message&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">method=</span><span class="s">"GET"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">uri=</span><span class="s">"http://api.&lt;region&gt;.whispir.com/messages/47707420BAE1288B?apikey=&lt;your_api_key&gt;"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;subject&gt;</span>Event Notification<span class="nt">&lt;/subject&gt;</span>
            <span class="nt">&lt;repetitionCount&gt;</span>0<span class="nt">&lt;/repetitionCount&gt;</span>
            <span class="nt">&lt;repeatDays&gt;</span>0<span class="nt">&lt;/repeatDays&gt;</span>
            <span class="nt">&lt;repeatHrs&gt;</span>0<span class="nt">&lt;/repeatHrs&gt;</span>
            <span class="nt">&lt;repeatMin&gt;</span>0<span class="nt">&lt;/repeatMin&gt;</span>
            <span class="nt">&lt;from&gt;</span>John Wick<span class="nt">&lt;/from&gt;</span>
            <span class="nt">&lt;direction&gt;</span>OUTGOING<span class="nt">&lt;/direction&gt;</span>
            <span class="nt">&lt;responseCount&gt;</span>0<span class="nt">&lt;/responseCount&gt;</span>
            <span class="nt">&lt;createdTime&gt;</span>1424062773000<span class="nt">&lt;/createdTime&gt;</span>
        <span class="nt">&lt;/ns2:message&gt;</span>
    <span class="nt">&lt;/ns2:messages&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="n">HTTP</span><span class="x"> </span><span class="m">1.1</span><span class="x"> </span><span class="m">200</span><span class="x"> </span><span class="n">OK</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"messages"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
     </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Event Notification"</span><span class="p">,</span><span class="x">
     </span><span class="s">"repetitionCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x">
     </span><span class="s">"repeatDays"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x">
     </span><span class="s">"repeatHrs"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x">
     </span><span class="s">"repeatMin"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x">
     </span><span class="s">"from"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"John Wick"</span><span class="p">,</span><span class="x">
     </span><span class="s">"direction"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"OUTGOING"</span><span class="p">,</span><span class="x">
     </span><span class="s">"responseCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"0"</span><span class="p">,</span><span class="x">
     </span><span class="s">"createdTime"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="m">1424062773000</span><span class="p">,</span><span class="x">
     </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
       </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"http://api.&lt;region&gt;.whispir.com/messages/47707420BAE1288B?apikey=DFD0FD90u809SDF90832FDS "</span><span class="p">,</span><span class="x">
       </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
       </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
     </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
   </span><span class="p">}</span><span class="x"> </span><span class="p">],</span><span class="x">
   </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
   </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x"> 
</span></code></pre>

<h2 id="deleting-an-event">Deleting an Event</h2>

<p>It is not currently possible to remove events from the Whispir Platform. Instead, events should be updated to have a status of &#39;Closed&rsquo;.</p>

        <h1 id="resources">Resources</h1>

<blockquote>
<p>API Endpoint</p>

<blockquote>
<p>Default Workspace Example</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/resources/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.resource-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/resources/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">resource</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>Workspace Specific Example</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/workspaces/{:id}/resources/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.resource-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/workspaces/{:id}/resources/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">resource</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<blockquote>
<p>Methods supported</p>
</blockquote>
<pre><code class="highlight plaintext">- GET
- POST
- PUT
- DELETE
</code></pre>

<p>Using Whispir’s API, one can submit data payloads to be stored by Whispir and used in various API calls. These files are uploaded through the <code class="prettyprint">/resources</code> endpoint.</p>

<p>Using the  Resources endpoint, application developers can submit, retrieve, update, and delete resources. These resources can be used as part of either Whispir Bulk (Dynamic) Messages, or to be used for importing Contacts.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Method Description</th>
        </tr>
    </thead>
    <tbody>
    <tr>
      <td style="text-align: right; font-weight: bold;">GET</td>
      <td>
        /resources
        <ul>
          <li>
          Provides a List of all the currently saved resources in the company (URIs), sorted by most recently updated
          </li>
        </ul>
        /resources/{:id}
        <ul>
          <li>
          Retrieves the representation of the requested resource. (this does not allow users to download the resource, only the representation)
          </li>
        </ul>
        /workspaces/(id)/resources
        <ul>
          <li>
          Provides a List of all the currently saved resources in the specified workspace(URIs), sorted by most recently updated
          </li>
        </ul>
        /workspaces/(id)/resources/(id)
        <ul>
          <li>
          Retrieves the representation of the requested resource. (this does not allow users to download the resource, only the representation)
          </li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">POST</td>
      <td>
        /resources
        <ul>
          <li>
          Creates a new resource for use in the API
          </li>
        </ul>
        /resources/{:id}
        <ul>
          <li>
          METHOD not supported
          </li>
        </ul>
        /workspaces/(id)/resources
        <ul>
          <li>
          Creates a new resource for use in the API under the particular workspace
          </li>
        </ul>
        /workspaces/(id)/resources/{:id}
        <ul>
          <li>
          METHOD not supported
          </li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">PUT</td>
      <td>
        /resources
        <ul>
          <li>
          METHOD not supported
          </li>
        </ul>
        /resources/{:id}
        <ul>
          <li>
          Update the specified resource with the one supplied in the request.
          </li>
        </ul>
        /workspaces/(id)/resources
        <ul>
          <li>
          METHOD not supported
          </li>
        </ul>
        /workspaces/(id)/resources/{:id}
        <ul>
          <li>
          Update the specified resource with the one supplied in the request under the particular workspace
          </li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">DELETE</td>
      <td>
        /resources
        <ul>
          <li>
          METHOD not supported
          </li>
        </ul>
        /resources/{:id}
        <ul>
          <li>
          Delete the specified resource from the Whispir Platform.
          </li>
        </ul>
        /workspaces/(id)/resources
        <ul>
          <li>
          METHOD not supported
          </li>
        </ul>
        /workspaces/(id)/resources/{:id}
        <ul>
          <li>
          Delete the specified resource from the Whispir Platform under the particular workspace
          </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<h2 id="creating-a-resource">Creating a resource</h2>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/resources?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.resource-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns3:resource</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>test.csv<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;scope&gt;</span>private<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;mimeType&gt;</span>text/csv<span class="nt">&lt;/mimeType&gt;</span>
   <span class="nt">&lt;derefUri&gt;</span>
     ...base64 representation...
     <span class="nt">&lt;/derefUri&gt;</span>
<span class="nt">&lt;/ns3:resource&gt;</span>

</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">resource</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"test.csv"</span><span class="p">,</span><span class="x">
  </span><span class="s">"scope"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"private"</span><span class="p">,</span><span class="x">
  </span><span class="s">"mimeType"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/csv"</span><span class="p">,</span><span class="x">
  </span><span class="s">"derefUri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"...base64 representation..."</span><span class="x">
</span><span class="p">}</span><span class="x">   

</span></code></pre>

<blockquote>
<blockquote>
<p>Response</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 201 Created
...
Location: http://api.&lt;region&gt;.whispir.com/resources/4FBBC384BCE3DAABFE3
...
</code></pre>

<p>Creating a resource is very easy. To create a new resource we should use the <code class="prettyprint">/resources</code> end point.</p>

<p>The following are the mandatory fields needed to create a resource -</p>

<ul>
<li>Name</li>
<li>Scope</li>
<li>mimeType</li>
<li>derefUri</li>
</ul>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Response Elements</th>
        </tr>
    </thead>
    <tbody>
    <tr>
      <td style="text-align: right; font-weight: bold;">name:</td>
      <td><strong>String</strong><br/>
        Specifies the name of the file being uploaded. The extension of the file too is allowed to be present in the name. <b>Eg:</b> australia-contacts.csv
<br><br>
<b>Note:</b> It is advised that names should not contain spaces or special characters other than `-` and `.`. This helps for easier search and also for a valid URL link (especially) in case of public scoped files. <br><b>Eg:</b> `australia-contacts.csv` is better name convention than `australia contacts.csv` as the latter converts into `australia%20contacts.csv`.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">scope:</td>
      <td><strong>String</strong><br/>
        Specifies the permission scope of the file being uploaded. The scope defines the access restriction of the resource. It can be only one of -
      <ul>
        <li><b>Public</b> - Public files have an addressable URL and are available publicly</li>
        <li><b>Private</b> - Private files have no URL and are only available for bulk messaging purposes and for importing contacts.</li>
      </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">mimeType:</td>
      <td><strong>String</strong><br/>
        The mime type of the file that is being uploaded. The type is dependent on the scope of the resource.
      <ul>
        <li><b>Public</b> - Public files can be of any mimetype. text/html; text/csv</li>
        <li><b>Private</b> - Private files are restricted to CSV, JSON, and XML.</li>
      </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">derefUri:</td>
      <td><strong>String</strong><br/>
        The base64 representation of the file being submitted.
      </td>
    </tr>
  </tbody>
</table>

<p><strong>Note:</strong> When creating a resource, the following conditions apply -</p>

<ul>
<li>Maximum of 10MB per file being uploaded.</li>
<li>Transactions will have an enforced timeout.</li>
<li>Resources will be available in the Whispir Platform for a limited timeframe (90 days). These will then be automatically cleaned. This will be a configurable setting for Whispir Administrators.</li>
</ul>

<h3 id="example-resources">Example resources</h3>

<p>The following are all equivalent representations of the same data structure, across the three supported formats.</p>

<h3 id="csv-format">CSV format</h3>

<p>As the CSV file format does not support structured objects, they have been omitted from the dataset.</p>

<blockquote>
<blockquote>
<p>CSV</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">fullname,email,mobile,streetaddress,suburb,manifest.name,manifest.value.timestamp
Franco Himboli,fhimboli@gmail.com,0410509001,123 Auburn Rd,Hawthorn,Delivery Manifest,20-10-2014 10:24
Jordan Windsor,jwindsor@yahoo.com,0410509002,360 Walsh Rd,North Melbourne,Delivery Manifest,20-10-2014 10:24
</code></pre>

<h3 id="json-format">JSON Format</h3>

<blockquote>
<blockquote>
<p>JSON</p>
</blockquote>
</blockquote>
<pre><code class="highlight go"><span class="p">[{</span><span class="x">
 </span><span class="s">"fullname"</span><span class="o">:</span><span class="x"> </span><span class="s">"Franco Himboli"</span><span class="p">,</span><span class="x">
 </span><span class="s">"email"</span><span class="o">:</span><span class="x"> </span><span class="s">"ftrimboli@gmail.com"</span><span class="p">,</span><span class="x">
 </span><span class="s">"mobile"</span><span class="o">:</span><span class="x"> </span><span class="s">"0410509001"</span><span class="p">,</span><span class="x">
 </span><span class="s">"streetaddress"</span><span class="o">:</span><span class="x"> </span><span class="s">"123 Auburn Rd"</span><span class="p">,</span><span class="x">
 </span><span class="s">"suburb"</span><span class="o">:</span><span class="x"> </span><span class="s">"Hawthorn"</span><span class="p">,</span><span class="x">
 </span><span class="s">"Reference"</span><span class="o">:</span><span class="x"> </span><span class="s">"Xpress Mail"</span><span class="p">,</span><span class="x">
 </span><span class="s">"MsgData"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="s">"POBDetail"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"DateAndTime"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"09-Sep-2015 12:15 PM"</span><span class="p">,</span><span class="x">
    </span><span class="s">"Message"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Please let us know if the time slot is acceptable. Respond with a 'No' to get alternative time slot"</span><span class="x">
  </span><span class="p">}</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">},</span><span class="x">
</span><span class="p">{</span><span class="x">
 </span><span class="s">"fullname"</span><span class="o">:</span><span class="x"> </span><span class="s">"Jordan Windsor"</span><span class="p">,</span><span class="x">
 </span><span class="s">"email"</span><span class="o">:</span><span class="x"> </span><span class="s">"jwindsor@yahoo.com"</span><span class="p">,</span><span class="x">
 </span><span class="s">"mobile"</span><span class="o">:</span><span class="x"> </span><span class="s">"0410509002"</span><span class="p">,</span><span class="x">
 </span><span class="s">"streetaddress"</span><span class="o">:</span><span class="x"> </span><span class="s">"360 Walsh Rd"</span><span class="p">,</span><span class="x">
 </span><span class="s">"suburb"</span><span class="o">:</span><span class="x"> </span><span class="s">"North Melbourne"</span><span class="p">,</span><span class="x">
 </span><span class="s">"Reference"</span><span class="o">:</span><span class="x"> </span><span class="s">"Xpress Mail"</span><span class="p">,</span><span class="x">
 </span><span class="s">"MsgData"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="s">"POBDetail"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"DateAndTime"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"09-Sep-2015 12:30 PM"</span><span class="p">,</span><span class="x">
    </span><span class="s">"Message"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Please let us know if the time slot is acceptable. Respond with a 'No' to get alternative time slot"</span><span class="x">
  </span><span class="p">}</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">}]</span><span class="x">
</span></code></pre>

<h3 id="xml">XML</h3>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;recipients&gt;</span>
   <span class="nt">&lt;recipient&gt;</span>
      <span class="nt">&lt;name&gt;</span>Franco<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;surname&gt;</span>Himboli<span class="nt">&lt;/surname&gt;</span>
      <span class="nt">&lt;email&gt;</span>ftrimboli@gmail.com<span class="nt">&lt;/email&gt;</span>
      <span class="nt">&lt;mobile&gt;</span>0410509001<span class="nt">&lt;/mobile&gt;</span>
      <span class="nt">&lt;streetaddress&gt;</span>123 Auburn Rd<span class="nt">&lt;/streetaddress&gt;</span>
      <span class="nt">&lt;suburb&gt;</span>Hawthorn<span class="nt">&lt;/suburb&gt;</span>
    <span class="nt">&lt;Reference&gt;</span>Xpress Mail<span class="nt">&lt;/Reference&gt;</span>
      <span class="nt">&lt;MsgData&gt;</span>
    <span class="nt">&lt;POBDetail&gt;</span>
      <span class="nt">&lt;DateAndTime&gt;</span>09-Sep-2015 12:15 PM<span class="nt">&lt;/DateAndTime&gt;</span>
      <span class="nt">&lt;Message&gt;</span>Please let us know if the time slot is acceptable. Respond with a 'No' to get alternative time slot<span class="nt">&lt;/Message&gt;</span>
    <span class="nt">&lt;/POBDetail&gt;</span>
    <span class="nt">&lt;/MsgData&gt;</span>
   <span class="nt">&lt;/recipient&gt;</span>
   <span class="nt">&lt;recipient&gt;</span>
      <span class="nt">&lt;name&gt;</span>Jordan<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;surname&gt;</span>Windsor<span class="nt">&lt;/surname&gt;</span>
      <span class="nt">&lt;email&gt;</span>jwindsor@yahoo.com<span class="nt">&lt;/email&gt;</span>
      <span class="nt">&lt;mobile&gt;</span>0410509002<span class="nt">&lt;/mobile&gt;</span>
      <span class="nt">&lt;streetaddress&gt;</span>360 Walsh Rd<span class="nt">&lt;/streetaddress&gt;</span>
      <span class="nt">&lt;suburb&gt;</span>North Melbourne<span class="nt">&lt;/suburb&gt;</span>
      <span class="nt">&lt;Reference&gt;</span>Xpress Mail<span class="nt">&lt;/Reference&gt;</span>
      <span class="nt">&lt;MsgData&gt;</span>
    <span class="nt">&lt;POBDetail&gt;</span>
      <span class="nt">&lt;DateAndTime&gt;</span>09-Sep-2015 12:30 PM<span class="nt">&lt;/DateAndTime&gt;</span>
      <span class="nt">&lt;Message&gt;</span>Please let us know if the time slot is acceptable. Respond with a 'No' to get alternative time slot<span class="nt">&lt;/Message&gt;</span>
    <span class="nt">&lt;/POBDetail&gt;</span>
    <span class="nt">&lt;/MsgData&gt;</span>
   <span class="nt">&lt;/recipient&gt;</span>
<span class="nt">&lt;/recipients&gt;</span>
</code></pre>

<p>Once you have your data in one of the above 3 formats, you need to <strong>convert it into Base64</strong> format, but before we do that, let&rsquo;s create our Message Template to determine what we actually want to send to these recipients.</p>

<h2 id="encode-the-json,-csv-or-xml-into-base64">Encode the JSON, CSV or XML into Base64</h2>

<p>In order to prepare the file to be uploaded to Whispir, it needs to be endcoded from it&rsquo;s textual representation into a Base64 encoded version.  Base64 is a common method of encoding binary data in ASCII format. Whispir uses it as a common method of exchange of file data.  It is also used when uploading attachments to messages in Whispir, or specifing custom WAV files for outbound voice calls.  More information about Base64 can be found <a href="https://en.wikipedia.org/wiki/Base64">here</a> .</p>

<p>Most programming languages will provide a facility to convert text into Base64.  A simple internet search for &lsquo;base 64 encode java&rsquo;, or &#39;base 64 encode PHP&rsquo; will yeild results on how to accomplish this task.</p>

<h3 id="json-file-encoded-to-base64">JSON file encoded to Base64</h3>

<p>The output after encoding the JSON Sample File into Base64 will look as follows:</p>
<pre><code class="highlight plaintext">W3sNCiAiZnVsbG5hbWUiOiAiRnJhbmNvIEhpbWJvbGkiLA0KICJlbWFpbCI6ICJmdHJpbWJvbGlAZ21haWwuY29tIiwNCiAibW9iaWxlIjogIjA0MTA1MDkwMDEiLA0KICJzdHJlZXRhZGRyZXNzIjogIjEyMyBBdWJ1cm4gUmQiLA0KICJzdWJ1cmIiOiAiSGF3dGhvcm4iLA0KICJSZWZlcmVuY2UiOiAiWHByZXNzIE1haWwiLA0KICJNc2dEYXRhIiA6IHsgDQoJIlBPQkRldGFpbCI6IHsNCgkJIkRhdGVBbmRUaW1lIiA6ICIwOS1TZXAtMjAxNSAxMjoxNSBQTSIsDQoJCSJNZXNzYWdlIiA6ICJQbGVhc2UgbGV0IHVzIGtub3cgaWYgdGhlIHRpbWUgc2xvdCBpcyBhY2NlcHRhYmxlLiBSZXNwb25kIHdpdGggYSAnTm8nIHRvIGdldCBhbHRlcm5hdGl2ZSB0aW1lIHNsb3QiDQoJfQ0KICB9DQp9LA0Kew0KICJmdWxsbmFtZSI6ICJKb3JkYW4gV2luZHNvciIsDQogImVtYWlsIjogImp3aW5kc29yQHlhaG9vLmNvbSIsDQogIm1vYmlsZSI6ICIwNDEwNTA5MDAyIiwNCiAic3RyZWV0YWRkcmVzcyI6ICIzNjAgV2Fsc2ggUmQiLA0KICJzdWJ1cmIiOiAiTm9ydGggTWVsYm91cm5lIiwNCiAiUmVmZXJlbmNlIjogIlhwcmVzcyBNYWlsIiwNCiAiTXNnRGF0YSIgOiB7IA0KCSJQT0JEZXRhaWwiOiB7DQoJCSJEYXRlQW5kVGltZSIgOiAiMDktU2VwLTIwMTUgMTI6MzAgUE0iLA0KCQkiTWVzc2FnZSIgOiAiUGxlYXNlIGxldCB1cyBrbm93IGlmIHRoZSB0aW1lIHNsb3QgaXMgYWNjZXB0YWJsZS4gUmVzcG9uZCB3aXRoIGEgJ05vJyB0byBnZXQgYWx0ZXJuYXRpdmUgdGltZSBzbG90Ig0KCX0NCiAgfQ0KfV0=
</code></pre>

<p>This is now ready to be uploaded to Whispir.</p>

<h3 id="upload-the-encoded-file-to-whispir-using-the-api">Upload the encoded file to Whispir using the API</h3>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/resources?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.resource-v1+xml


<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns3:resource</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>test.json<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;scope&gt;</span>private<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;mimeType&gt;</span>application/json<span class="nt">&lt;/mimeType&gt;</span>
 <span class="nt">&lt;derefUri&gt;</span>W3sNCiAiZnVsbG5hbWUiOiAiRnJhbmNvIEhpbWJvbGkiLA0KICJlbWFpbCI6ICJmdHJpbWJvbGlAZ21haWwuY29tIiwNCiAibW9iaWxlIjogIjA0MTA1MDkwMDEiLA0KICJzdHJlZXRhZGRyZXNzIjogIjEyMyBBdWJ1cm4gUmQiLA0KICJzdWJ1cmIiOiAiSGF3dGhvcm4iLA0KICJSZWZlcmVuY2UiOiAiWHByZXNzIE1haWwiLA0KICJNc2dEYXRhIiA6IHsgDQoJIlBPQkRldGFpbCI6IHsNCgkJIkRhdGVBbmRUaW1lIiA6ICIwOS1TZXAtMjAxNSAxMjoxNSBQTSIsDQoJCSJNZXNzYWdlIiA6ICJQbGVhc2UgbGV0IHVzIGtub3cgaWYgdGhlIHRpbWUgc2xvdCBpcyBhY2NlcHRhYmxlLiBSZXNwb25kIHdpdGggYSAnTm8nIHRvIGdldCBhbHRlcm5hdGl2ZSB0aW1lIHNsb3QiDQoJfQ0KICB9DQp9LA0Kew0KICJmdWxsbmFtZSI6ICJKb3JkYW4gV2luZHNvciIsDQogImVtYWlsIjogImp3aW5kc29yQHlhaG9vLmNvbSIsDQogIm1vYmlsZSI6ICIwNDEwNTA5MDAyIiwNCiAic3RyZWV0YWRkcmVzcyI6ICIzNjAgV2Fsc2ggUmQiLA0KICJzdWJ1cmIiOiAiTm9ydGggTWVsYm91cm5lIiwNCiAiUmVmZXJlbmNlIjogIlhwcmVzcyBNYWlsIiwNCiAiTXNnRGF0YSIgOiB7IA0KCSJQT0JEZXRhaWwiOiB7DQoJCSJEYXRlQW5kVGltZSIgOiAiMDktU2VwLTIwMTUgMTI6MzAgUE0iLA0KCQkiTWVzc2FnZSIgOiAiUGxlYXNlIGxldCB1cyBrbm93IGlmIHRoZSB0aW1lIHNsb3QgaXMgYWNjZXB0YWJsZS4gUmVzcG9uZCB3aXRoIGEgJ05vJyB0byBnZXQgYWx0ZXJuYXRpdmUgdGltZSBzbG90Ig0KCX0NCiAgfQ0KfV0=<span class="nt">&lt;/derefUri&gt;</span>
<span class="nt">&lt;/ns3:resource&gt;</span>

</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">resource</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"test.json"</span><span class="p">,</span><span class="x">
  </span><span class="s">"scope"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"private"</span><span class="p">,</span><span class="x">
  </span><span class="s">"mimeType"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"application/json"</span><span class="p">,</span><span class="x">
  </span><span class="s">"derefUri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"W3sNCiAiZnVsbG5hbWUiOiAiRnJhbmNvIEhpbWJvbGkiLA0KICJlbWFpbCI6ICJmdHJpbWJvbGlAZ21haWwuY29tIiwNCiAibW9iaWxlIjogIjA0MTA1MDkwMDEiLA0KICJzdHJlZXRhZGRyZXNzIjogIjEyMyBBdWJ1cm4gUmQiLA0KICJzdWJ1cmIiOiAiSGF3dGhvcm4iLA0KICJSZWZlcmVuY2UiOiAiWHByZXNzIE1haWwiLA0KICJNc2dEYXRhIiA6IHsgDQoJIlBPQkRldGFpbCI6IHsNCgkJIkRhdGVBbmRUaW1lIiA6ICIwOS1TZXAtMjAxNSAxMjoxNSBQTSIsDQoJCSJNZXNzYWdlIiA6ICJQbGVhc2UgbGV0IHVzIGtub3cgaWYgdGhlIHRpbWUgc2xvdCBpcyBhY2NlcHRhYmxlLiBSZXNwb25kIHdpdGggYSAnTm8nIHRvIGdldCBhbHRlcm5hdGl2ZSB0aW1lIHNsb3QiDQoJfQ0KICB9DQp9LA0Kew0KICJmdWxsbmFtZSI6ICJKb3JkYW4gV2luZHNvciIsDQogImVtYWlsIjogImp3aW5kc29yQHlhaG9vLmNvbSIsDQogIm1vYmlsZSI6ICIwNDEwNTA5MDAyIiwNCiAic3RyZWV0YWRkcmVzcyI6ICIzNjAgV2Fsc2ggUmQiLA0KICJzdWJ1cmIiOiAiTm9ydGggTWVsYm91cm5lIiwNCiAiUmVmZXJlbmNlIjogIlhwcmVzcyBNYWlsIiwNCiAiTXNnRGF0YSIgOiB7IA0KCSJQT0JEZXRhaWwiOiB7DQoJCSJEYXRlQW5kVGltZSIgOiAiMDktU2VwLTIwMTUgMTI6MzAgUE0iLA0KCQkiTWVzc2FnZSIgOiAiUGxlYXNlIGxldCB1cyBrbm93IGlmIHRoZSB0aW1lIHNsb3QgaXMgYWNjZXB0YWJsZS4gUmVzcG9uZCB3aXRoIGEgJ05vJyB0byBnZXQgYWx0ZXJuYXRpdmUgdGltZSBzbG90Ig0KCX0NCiAgfQ0KfV0="</span><span class="x">
</span><span class="p">}</span><span class="x">   

</span></code></pre>

<blockquote>
<blockquote>
<p>Response</p>

<p>Once the resource is created, you can now use this in Whispir to send a message to each of the recipients using the data within the resource.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 201 Created
...
Location: http://api.&lt;region&gt;.whispir.com/resources/ABD435DBFCD663DEDEFF?apikey=&lt;your_api_key&gt;
...

</code></pre>

<h2 id="sending-messages-using-template-and-resources">Sending Messages using template and resources</h2>

<p>Apart from use in the <a href="https://whispir.github.io/api/#dynamic-messages">Dynamic Messages</a>, resources can be equally used sending dynamic messages with or without a template.</p>

<p>Assuming there is a template that has already been created with stencil as -</p>

<blockquote>
<blockquote>
<p>TemplateID: BCD384BC3847CD3484CD</p>
</blockquote>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"messageTemplateName"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Delivery Plan"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subject"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Delivery Plan:"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"body"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Hi @@name@@ @@surname@@, Your planned mail delivery is at @@MsgData.POBDetail.DateAndTime@@. @@MsgData.POBDetail.Message@@. Any questions, please call 1300 WHISPIR."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Now we have the templateId(for content) with the resourceID (for recipients). Using these two key pieces of information, developers can submit an API request to kick off the Dynamic Messaging process.</p>

<p>The <code class="prettyprint">smsMappingField</code> should be mapped to the column or key that holds the number to which the SMS has to sent to; and the <code class="prettyprint">emailMappingField</code> to the email to which the message has to be sent to. refer to <a href="https://whispir.github.io/api/#dynamic-messages">Dynamic Messages</a> for more details on the mapping.</p>

<blockquote>
<p>Sending the Bulk Message</p>

<blockquote>
<p>the resource type here is application/vnd.whispir.bulkmessage-v1+xml, application/vnd.whispir.bulkmessage-v1+json. Not the usual application/vnd.whispir.message-v1+xml, application/vnd.whispir.message-v1+json.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.bulkmessage-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;resource&gt;</span>
      <span class="nt">&lt;resourceId&gt;</span>ABD435DBFCD663DEDEFF<span class="nt">&lt;/resourceId&gt;</span>
    <span class="nt">&lt;smsMappingField&gt;</span>mobile<span class="nt">&lt;/smsMappingField&gt;</span>
      <span class="nt">&lt;emailMappingField&gt;</span>email<span class="nt">&lt;/emailMappingField&gt;</span>
   <span class="nt">&lt;/resource&gt;</span>
   <span class="nt">&lt;messageTemplateId&gt;</span>BCD384BC3847CD3484CD<span class="nt">&lt;/messageTemplateId&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">bulkmessage</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"resource"</span><span class="x"> </span><span class="o">:</span><span class="p">{</span><span class="x">
    </span><span class="s">"resourceId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ABD435DBFCD663DEDEFF"</span><span class="p">,</span><span class="x">
    </span><span class="s">"smsMappingField"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"emailMappingField"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"email"</span><span class="p">,</span><span class="x">
    </span><span class="s">"voiceMappingField"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
  </span><span class="p">},</span><span class="x">
  </span><span class="s">"messageTemplateId"</span><span class="o">:</span><span class="x"> </span><span class="s">"BCD384BC3847CD3484CD"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<p>Final Message delivered to Customer (Individually)</p>

<blockquote>
<p>The message when combined with the data will be -</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">Hi Franco Thimboli, Your planned mail delivery is at 09-Sep-2015 12:15 PM. Please let us know if the time slot is acceptable. Respond with a 'No' to get alternative time slot. Any questions, please call 1300 WHISPIR.

Hi Jordan Windsor, Your planned mail delivery is at 09-Sep-2015 12:30 PM. Please let us know if the time slot is acceptable. Respond with a 'No' to get alternative time slot. Any questions, please call 1300 WHISPIR.
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 202 Accepted
Location: http://api.&lt;region&gt;.whispir.com/messages/CDB938478CD6DBC3784C?apikey=[your_api_key]
</code></pre>

<h2 id="error-in-creating-a-resource">Error in creating a resource</h2>

<p>The API may report error in the resource processing. The reason would be part of the response to the POST call.The standard reasons are -</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Standard Error Scenarios</th>
        </tr>
    <tr>
            <th style="width: 50%">Error Condition</th>
            <th style="width: 50%">Details</th>
        </tr>
    </thead>
    <tbody>
    <tr>
      <td style="text-align: right; font-weight: bold;">Request a URI that doesn&rsquo;t exist</td>
      <td>
        Response Code
        <ul>
          <li>
          404 Not Found
          </li>
        </ul>
        Description
        <ul>
          <li>
          The requested URI does not exist
          </li>
        </ul>
        Actions for application client
        <ul>
          <li>
          Resource does not exist. Incorrect resource identifier, or resource has been removed.
          </li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">Provide an attachment that is bigger than 10 MB</td>
      <td>
        Response Code
        <ul>
          <li>
          422 Unprocessable Entity
          </li>
        </ul>
        Description
        <ul>
          <li>
          The POST request entity exceeds allowed size
          </li>
        </ul>
        Actions for application client
        <ul>
          <li>
          Ensure the size of the resource does not exceed 10MiB.
          </li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">Provide a mime type that is not json, xml or csv</td>
      <td>
        Response Code
        <ul>
          <li>
          422 Unprocessable Entity
          </li>
        </ul>
        Description
        <ul>
          <li>
          The request was unsuccessful because the requested content type is not supported by the API.
          </li>
        </ul>
        Actions for application client
        <ul>
          <li>
          Incorrect mime type. Only text/csv, application/xml, application/json are supported as bulk message resources.
          </li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">Malformed XML or JSON passed</td>
      <td>
        Response Code
        <ul>
          <li>
          422 Unprocessable Entity
          </li>
        </ul>
        Description
        <ul>
          <li>
          An error occurred when processing entity in the request.
          </li>
        </ul>
        Actions for application client
        <ul>
          <li>
           Likely to be a malformed CSV, XML, or JSON file. Verify the data structure.
          </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<h2 id="retrieving-existing-resources">Retrieving existing resources</h2>

<p>Existing resources can be easily retrieved via the GET /resources API call. The response lists all of the existing public and private resources available in the system.</p>

<blockquote>
<p>Retrieving resources</p>

<blockquote>
<p>The resources contain the id, and url link of the resource (only public)</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/resources/?apikey=&lt;your_api_key&gt;
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.resource-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 7 of 7    <span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:resources&gt;</span>
        <span class="nt">&lt;ns2:resource&gt;</span>
            <span class="nt">&lt;name&gt;</span>singapore.csv<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;scope&gt;</span>private<span class="nt">&lt;/scope&gt;</span>
            <span class="nt">&lt;mimeType&gt;</span>application/json<span class="nt">&lt;/mimeType&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/D9A8DC34EDRSD7E4?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:resource&gt;</span>
        <span class="nt">&lt;ns2:resource&gt;</span>
            <span class="nt">&lt;name&gt;</span>australia.json<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;scope&gt;</span>private<span class="nt">&lt;/scope&gt;</span>
            <span class="nt">&lt;mimeType&gt;</span>application/json<span class="nt">&lt;/mimeType&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/D3E2XCDF3WS4859?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:resource&gt;</span>
        <span class="nt">&lt;ns2:resource&gt;</span>
            <span class="nt">&lt;name&gt;</span>usa.csv<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;scope&gt;</span>private<span class="nt">&lt;/scope&gt;</span>
            <span class="nt">&lt;mimeType&gt;</span>text/csv<span class="nt">&lt;/mimeType&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/3E2F6E72642F949?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:resource&gt;</span>
        <span class="nt">&lt;ns2:resource&gt;</span>
            <span class="nt">&lt;name&gt;</span>users.json<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;scope&gt;</span>public<span class="nt">&lt;/scope&gt;</span>
            <span class="nt">&lt;mimeType&gt;</span>application.json<span class="nt">&lt;/mimeType&gt;</span>
            <span class="nt">&lt;url&gt;</span>https://cdn-ap.whispir.com/public/resources/216asdfgjgedf1sdf56fd472360cd.json<span class="nt">&lt;/url&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/F1212CF334EDR68?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:resource&gt;</span>
        <span class="nt">&lt;ns2:resource&gt;</span>
            <span class="nt">&lt;name&gt;</span>whispir-example-bulk-message-1.csv<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;scope&gt;</span>private<span class="nt">&lt;/scope&gt;</span>
            <span class="nt">&lt;mimeType&gt;</span>text/csv<span class="nt">&lt;/mimeType&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/32SDF43ED6829B2?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:resource&gt;</span>
        <span class="nt">&lt;ns2:resource&gt;</span>
            <span class="nt">&lt;name&gt;</span>whispir-example-bulk-message-2.csv<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;scope&gt;</span>private<span class="nt">&lt;/scope&gt;</span>
            <span class="nt">&lt;mimeType&gt;</span>text/csv<span class="nt">&lt;/mimeType&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/C708D712EDRB0?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:resource&gt;</span>
        <span class="nt">&lt;ns2:resource&gt;</span>
            <span class="nt">&lt;name&gt;</span>whispir-example-bulk-message-3.csv<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;scope&gt;</span>private<span class="nt">&lt;/scope&gt;</span>
            <span class="nt">&lt;mimeType&gt;</span>text/csv<span class="nt">&lt;/mimeType&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/2FEED897U46E2?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:resource&gt;</span>
    <span class="nt">&lt;/ns2:resources&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">resource</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"resources"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"singapore.csv"</span><span class="p">,</span><span class="x">
      </span><span class="s">"scope"</span><span class="o">:</span><span class="x"> </span><span class="s">"private"</span><span class="p">,</span><span class="x">
      </span><span class="s">"mimeType"</span><span class="o">:</span><span class="x"> </span><span class="s">"application/json"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/D9A8DC34EDRSD7E4?apikey=&lt;your_api_key&gt;"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"australia.json"</span><span class="p">,</span><span class="x">
      </span><span class="s">"scope"</span><span class="o">:</span><span class="x"> </span><span class="s">"private"</span><span class="p">,</span><span class="x">
      </span><span class="s">"mimeType"</span><span class="o">:</span><span class="x"> </span><span class="s">"application/json"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/D3E2XCDF3WS4859?apikey=&lt;your_api_key&gt;"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"usa.csv"</span><span class="p">,</span><span class="x">
      </span><span class="s">"scope"</span><span class="o">:</span><span class="x"> </span><span class="s">"private"</span><span class="p">,</span><span class="x">
      </span><span class="s">"mimeType"</span><span class="o">:</span><span class="x"> </span><span class="s">"text/csv"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/3E2F6E72642F949?apikey=&lt;your_api_key&gt;"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"users.json"</span><span class="p">,</span><span class="x">
      </span><span class="s">"scope"</span><span class="o">:</span><span class="x"> </span><span class="s">"public"</span><span class="p">,</span><span class="x">
      </span><span class="s">"mimeType"</span><span class="o">:</span><span class="x"> </span><span class="s">"application/json"</span><span class="p">,</span><span class="x">
      </span><span class="s">"url"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://cdn-ap.whispir.com/public/resources/2163b29d4edf1bd77d71a36210d472360cd.json"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/F1212CF334EDR68?apikey=&lt;your_api_key&gt;"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"whispir-example-bulk-message-1.csv"</span><span class="p">,</span><span class="x">
      </span><span class="s">"scope"</span><span class="o">:</span><span class="x"> </span><span class="s">"private"</span><span class="p">,</span><span class="x">
      </span><span class="s">"mimeType"</span><span class="o">:</span><span class="x"> </span><span class="s">"text/csv"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/32SDF43ED6829B2?apikey=&lt;your_api_key&gt;"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"whispir-example-bulk-message-2.csv"</span><span class="p">,</span><span class="x">
      </span><span class="s">"scope"</span><span class="o">:</span><span class="x"> </span><span class="s">"private"</span><span class="p">,</span><span class="x">
      </span><span class="s">"mimeType"</span><span class="o">:</span><span class="x"> </span><span class="s">"text/csv"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/C708D712EDRB0?apikey=&lt;your_api_key&gt;"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"whispir-example-bulk-message-3.csv"</span><span class="p">,</span><span class="x">
      </span><span class="s">"scope"</span><span class="o">:</span><span class="x"> </span><span class="s">"private"</span><span class="p">,</span><span class="x">
      </span><span class="s">"mimeType"</span><span class="o">:</span><span class="x"> </span><span class="s">"text/csv"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/2FEED897U46E2?apikey=&lt;your_api_key&gt;"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">],</span><span class="x">
  </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 7 of 7    "</span><span class="p">,</span><span class="x">
  </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<h3 id="retrieving-a-single-resource">Retrieving a single resource</h3>

<p>A single resource (public|private) can be retrieved from the available resource by using the resource&rsquo;s specific link uri.</p>

<blockquote>
<p>Retrieving a single resource</p>

<blockquote>
<p>use the resource&rsquo;s link uri for private scope file</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/resources/D3E2XCDF3WS4859?apikey=&lt;your_api_key&gt;
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.resource-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns3:resource</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>australia.json<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;scope&gt;</span>private<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;mimeType&gt;</span>application/json<span class="nt">&lt;/mimeType&gt;</span>
    <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/D3E2XCDF3WS4859?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/D3E2XCDF3WS4859?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"updateResource"</span> <span class="na">method=</span><span class="s">"PUT"</span> <span class="na">type=</span><span class="s">"application/vnd.whispir.resource-v1+json,application/vnd.whispir.resource-v1+xml"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/D3E2XCDF3WS4859?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"deleteResource"</span> <span class="na">method=</span><span class="s">"DELETE"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/ns3:resource&gt;</span>

</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">resource</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"australia.json"</span><span class="p">,</span><span class="x">
  </span><span class="s">"scope"</span><span class="o">:</span><span class="x"> </span><span class="s">"private"</span><span class="p">,</span><span class="x">
  </span><span class="s">"mimeType"</span><span class="o">:</span><span class="x"> </span><span class="s">"application/json"</span><span class="p">,</span><span class="x">
  </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/D3E2XCDF3WS4859?apikey=&lt;your_api_key&gt;"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/D3E2XCDF3WS4859?apikey=&lt;your_api_key&gt;"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"updateResource"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"PUT"</span><span class="p">,</span><span class="x">
      </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"application/vnd.whispir.resource-v1+json,application/vnd.whispir.resource-v1+xml"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/D3E2XCDF3WS4859?apikey=&lt;your_api_key&gt;"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"deleteResource"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"DELETE"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">&gt; &gt; use the resource's link uri for public scope file

</code></pre>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/resources/F1212CF334EDR68?apikey=&lt;your_api_key&gt;
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.resource-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns3:resource</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>users.json<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;scope&gt;</span>public<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;mimeType&gt;</span>application/json<span class="nt">&lt;/mimeType&gt;</span>
  <span class="nt">&lt;url&gt;</span>https://cdn-ap.whispir.com/public/resources/2163b29d4edf1bd77d71a36210d472360cd.json<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/F1212CF334EDR68?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/F1212CF334EDR68?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"updateResource"</span> <span class="na">method=</span><span class="s">"PUT"</span> <span class="na">type=</span><span class="s">"application/vnd.whispir.resource-v1+json,application/vnd.whispir.resource-v1+xml"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/F1212CF334EDR68?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"deleteResource"</span> <span class="na">method=</span><span class="s">"DELETE"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/ns3:resource&gt;</span>

</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">resource</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"name"</span><span class="o">:</span><span class="x"> </span><span class="s">"users.json"</span><span class="p">,</span><span class="x">
  </span><span class="s">"scope"</span><span class="o">:</span><span class="x"> </span><span class="s">"public"</span><span class="p">,</span><span class="x">
  </span><span class="s">"mimeType"</span><span class="o">:</span><span class="x"> </span><span class="s">"application/json"</span><span class="p">,</span><span class="x">
  </span><span class="s">"url"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://cdn-ap.whispir.com/public/resources/2163b29d4edf1bd77d71a36210d472360cd.json"</span><span class="p">,</span><span class="x">
  </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/F1212CF334EDR68?apikey=&lt;your_api_key&gt;"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/F1212CF334EDR68?apikey=&lt;your_api_key&gt;"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"updateResource"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"PUT"</span><span class="p">,</span><span class="x">
      </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"application/vnd.whispir.resource-v1+json,application/vnd.whispir.resource-v1+xml"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.&lt;region&gt;.whispir.com/resources/F1212CF334EDR68?apikey=&lt;your_api_key&gt;"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"deleteResource"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"DELETE"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Response Elements</th>
        </tr>
    </thead>
    <tbody>
    <tr>
      <td style="text-align: right; font-weight: bold;">name:</td>
      <td><strong>String</strong><br/>
        Specifies the name of the resource. The name is given during creation.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">scope:</td>
      <td><strong>String</strong><br/>
        Specifies the permission scope of the file being uploaded.
      </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">mimeType:</td>
      <td><strong>String</strong><br/>
        The mime type of the file that is being uploaded.
      </td>
    </tr>
    <tr>
      <td style="text-align: right; font-weight: bold;">url:</td>
      <td><strong>String</strong><br/>
        The downloaded link to the resource location. Browsing this link results in a download of the resource.
        <br><br>
        <b>Note:</b> Only available for Public scoped resources.
      </td>
    </tr>
    <tr>
            <td style="text-align: right; font-weight: bold;">link:</td>
            <td><strong>Array</strong><br/>
                Provides a list of URLs that can be used to manipulate or access the message template.
                <ul>
                  <li>uri - the link to access the message template</li>
                  <li>rel - the descriptor for what the link will do</li>
                  <li>method - the HTTP method to use with this particular link</li>
                </ul>
            </td>
        </tr>
  </tbody>
</table>

<h3 id="filtering-search-results">Filtering search results</h3>

<h4 id="filtering-by-scope">Filtering By scope</h4>

<p>Resources can be filtered by their scope. This can be achieved by sending in the required scope type in the URL as query parameter. The scope can be one of the allowed scope types.</p>

<ul>
<li>Public - <code class="prettyprint">&amp;scope=public</code></li>
<li>Private - <code class="prettyprint">&amp;scope=private</code></li>
</ul>

<blockquote>
<p>Filtering resources by scope</p>

<blockquote>
<p>Only get the public resources</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/resources/?apikey=&lt;your_api_key&gt;&amp;scope=public
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>

<blockquote>
<blockquote>
<p>Only get the private resources</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/resources/?apikey=&lt;your_api_key&gt;&amp;scope=private
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>

<h4 id="filtering-by-name">Filtering By name</h4>

<blockquote>
<p>Filtering resources by scope</p>

<blockquote>
<p>With extension of file type</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/resources/?apikey=&lt;your_api_key&gt;&amp;name=australia.csv
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>

<blockquote>
<blockquote>
<p>Response will be array of records that match exactly the whole name given in the query</p>

<p>Only part of name</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.&lt;region&gt;.whispir.com/resources/?apikey=&lt;your_api_key&gt;&amp;name=au
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>

<blockquote>
<blockquote>
<p>Response will match all records that have <code class="prettyprint">au</code> in their file name. So, multiple records are returned.</p>
</blockquote>
</blockquote>

<p>Resources can be filtered by their name. This can be achieved by sending in the name in the URL as query parameter.</p>

<p><strong>Note:</strong> The name including the file extension makes it a unique search.</p>

<p>Eg: - <code class="prettyprint">&amp;name=australia.csv</code></p>

<h2 id="updating-a-resource">Updating a resource</h2>
<pre><code class="highlight plaintext">HTTP 1.1 PUT https://api.&lt;region&gt;.whispir.com/resources/ABD435DBFCD663DEDEFF?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.resource-v1+xml


<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns3:resource</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>australia.json<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;scope&gt;</span>private<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;mimeType&gt;</span>application/json<span class="nt">&lt;/mimeType&gt;</span>
 <span class="nt">&lt;derefUri&gt;</span>W3sNCiAiZnVsbG5hbWUiOiAiRnJhbmNvIEhpbWJvbGkiLA0KICJlbWFpbCI6ICJmdHJpbWJvbGlAZ21haWwuY29tIiwNCiAibW9iaWxlIjogIjA0MTA1MDkwMDEiLA0KICJzdHJlZXRhZGRyZXNzIjogIjEyMyBBdWJ1cm4gUmQiLA0KICJzdWJ1cmIiOiAiSGF3dGhvcm4iLA0KICJSZWZlcmVuY2UiOiAiWHByZXNzIE1haWwiLA0KICJNc2dEYXRhIiA6IHsgDQoJIlBPQkRldGFpbCI6IHsNCgkJIkRhdGVBbmRUaW1lIiA6ICIwOS1TZXAtMjAxNSAxMjoxNSBQTSIsDQoJCSJNZXNzYWdlIiA6ICJQbGVhc2UgbGV0IHVzIGtub3cgaWYgdGhlIHRpbWUgc2xvdCBpcyBhY2NlcHRhYmxlLiBSZXNwb25kIHdpdGggYSAnTm8nIHRvIGdldCBhbHRlcm5hdGl2ZSB0aW1lIHNsb3QiDQoJfQ0KICB9DQp9LA0Kew0KICJmdWxsbmFtZSI6ICJKb3JkYW4gV2luZHNvciIsDQogImVtYWlsIjogImp3aW5kc29yQHlhaG9vLmNvbSIsDQogIm1vYmlsZSI6ICIwNDEwNTA5MDAyIiwNCiAic3RyZWV0YWRkcmVzcyI6ICIzNjAgV2Fsc2ggUmQiLA0KICJzdWJ1cmIiOiAiTm9ydGggTWVsYm91cm5lIiwNCiAiUmVmZXJlbmNlIjogIlhwcmVzcyBNYWlsIiwNCiAiTXNnRGF0YSIgOiB7IA0KCSJQT0JEZXRhaWwiOiB7DQoJCSJEYXRlQW5kVGltZSIgOiAiMDktU2VwLTIwMTUgMTI6MzAgUE0iLA0KCQkiTWVzc2FnZSIgOiAiUGxlYXNlIGxldCB1cyBrbm93IGlmIHRoZSB0aW1lIHNsb3QgaXMgYWNjZXB0YWJsZS4gUmVzcG9uZCB3aXRoIGEgJ05vJyB0byBnZXQgYWx0ZXJuYXRpdmUgdGltZSBzbG90Ig0KCX0NCiAgfQ0KfV0=<span class="nt">&lt;/derefUri&gt;</span>
<span class="nt">&lt;/ns3:resource&gt;</span>

</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">resource</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"australia.json"</span><span class="p">,</span><span class="x">
  </span><span class="s">"scope"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"private"</span><span class="p">,</span><span class="x">
  </span><span class="s">"mimeType"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"application/json"</span><span class="p">,</span><span class="x">
  </span><span class="s">"derefUri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"W3sNCiAiZnVsbG5hbWUiOiAiRnJhbmNvIEhpbWJvbGkiLA0KICJlbWFpbCI6ICJmdHJpbWJvbGlAZ21haWwuY29tIiwNCiAibW9iaWxlIjogIjA0MTA1MDkwMDEiLA0KICJzdHJlZXRhZGRyZXNzIjogIjEyMyBBdWJ1cm4gUmQiLA0KICJzdWJ1cmIiOiAiSGF3dGhvcm4iLA0KICJSZWZlcmVuY2UiOiAiWHByZXNzIE1haWwiLA0KICJNc2dEYXRhIiA6IHsgDQoJIlBPQkRldGFpbCI6IHsNCgkJIkRhdGVBbmRUaW1lIiA6ICIwOS1TZXAtMjAxNSAxMjoxNSBQTSIsDQoJCSJNZXNzYWdlIiA6ICJQbGVhc2UgbGV0IHVzIGtub3cgaWYgdGhlIHRpbWUgc2xvdCBpcyBhY2NlcHRhYmxlLiBSZXNwb25kIHdpdGggYSAnTm8nIHRvIGdldCBhbHRlcm5hdGl2ZSB0aW1lIHNsb3QiDQoJfQ0KICB9DQp9LA0Kew0KICJmdWxsbmFtZSI6ICJKb3JkYW4gV2luZHNvciIsDQogImVtYWlsIjogImp3aW5kc29yQHlhaG9vLmNvbSIsDQogIm1vYmlsZSI6ICIwNDEwNTA5MDAyIiwNCiAic3RyZWV0YWRkcmVzcyI6ICIzNjAgV2Fsc2ggUmQiLA0KICJzdWJ1cmIiOiAiTm9ydGggTWVsYm91cm5lIiwNCiAiUmVmZXJlbmNlIjogIlhwcmVzcyBNYWlsIiwNCiAiTXNnRGF0YSIgOiB7IA0KCSJQT0JEZXRhaWwiOiB7DQoJCSJEYXRlQW5kVGltZSIgOiAiMDktU2VwLTIwMTUgMTI6MzAgUE0iLA0KCQkiTWVzc2FnZSIgOiAiUGxlYXNlIGxldCB1cyBrbm93IGlmIHRoZSB0aW1lIHNsb3QgaXMgYWNjZXB0YWJsZS4gUmVzcG9uZCB3aXRoIGEgJ05vJyB0byBnZXQgYWx0ZXJuYXRpdmUgdGltZSBzbG90Ig0KCX0NCiAgfQ0KfV0="</span><span class="x">
</span><span class="p">}</span><span class="x">   

</span></code></pre>

<blockquote>
<blockquote>
<p>Response</p>

<p>Once the resource is updated, the older version is technically removed. The new resource data will be used in all the references of the resource (via the ID)</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 204 No Content
</code></pre>

<p>Updating a resource involves the same process as in creating a resource. The process of using one of the format (CSV, JSON, XML) for private and any format for public -&gt; converting to base64 encoded data is the same.</p>

<p>The change is doing a <code class="prettyprint">PUT</code> to the existing resource URL that needs to be updated. Please be careful that doing an update overwrites the previous resource. There is no versioning available in Whispir for the resources.</p>

<p>Any or all of the 4 values can be changed. <strong>i.e,</strong> name, scope, mimeType, derefUri, but all 4 are mandatory values to be sent.</p>

<h2 id="deleting-a-resource">Deleting a resource</h2>

<blockquote>
<p>Deleting a resource</p>

<blockquote>
<p>Exact URI of the resource has to be provided.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 DELETE https://api.&lt;region&gt;.whispir.com/resources/F1212CF334EDR68?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
x-api-key: your_api_key
</code></pre>

<blockquote>
<p>Response</p>

<blockquote>
<p>204 No Content</p>
</blockquote>
</blockquote>

<p>Resources can be deleted after use. These can be both public and private in scope.</p>

<p><strong>Note:</strong> Deleting a public resource may result in <code class="prettyprint">404 File Not Found</code> error for any sites or material referencing to it. So, ensure that DELETE is only executed when the reference to all material is removed or the content has to be removed for other purposes immediately.</p>

        <h1 id="imports">Imports</h1>

<blockquote>
<p>API Endpoint</p>

<blockquote>
<ul>
<li>generic</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/imports/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.import-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/imports/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="k">import</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<ul>
<li>limited to a workspace</li>
</ul>
</blockquote>
</blockquote>
<pre><code class="highlight xml">https://api.<span class="nt">&lt;region&gt;</span>.whispir.com/workspaces/{:id}/imports/?apikey=<span class="nt">&lt;your_api_key&gt;</span>
Content-Type: application/vnd.whispir.import-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">https</span><span class="o">:</span><span class="c">//api.&lt;region&gt;.whispir.com/workspaces/{:id}/imports/?apikey=&lt;your_api_key&gt;</span><span class="x">
</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="k">import</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">&gt; Methods supported

- POST
</code></pre>

<p>The imports endpoint allows users to import a CSV/JSON/XML file of contacts (via /resources) to be added to the contacts database. </p>

<p>This is slightly different from the contact API as it doesn&rsquo;t support the deleting of contacts. It will only add and update.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Method Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">GET</td>
            <td>
                METHOD not supported
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">POST</td>
            <td>
                /imports
                <ul>
                    <li>
                    Invokes the import process into the My Company workspace with the specified resource
                    </li>
                </ul>
                /imports/{:id}
                <ul>
                    <li>
                    METHOD not supported
                    </li>
                </ul>
                /workspaces/(id)/imports
                <ul>
                    <li>
                    Invokes the import process into the specified workspace with the specified resource.
                    </li>
                </ul>
                /workspaces/(id)/imports/{:id}
                <ul>
                    <li>
                    METHOD not supported
                    </li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">PUT</td>
            <td>
                METHOD not supported
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">DELETE</td>
            <td>
                METHOD not supported
            </td>
        </tr>
    </tbody>
</table> 

<h2 id="bulk-contact-import">Bulk contact import</h2>

<p>The Whispir API will expose this functionality as a two stage process:
 1. Submit contact data within a CSV, JSON, XML payload using the /resource endpoint – which will return a resource ID,
 2. Create a new import resource by submitting a POST to the /imports endpoint referencing the resource ID created in step 1.</p>

<p>These two stages are further explained below.</p>

<h3 id="create-a-resource-specifying-the-contact-information">Create a resource specifying the contact information</h3>

<blockquote>
<p>Sample Data File</p>

<blockquote>
<p>The following data file could be produced or created from data in your internal system that needs to be imported into Whispir.</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:import</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com"</span> 
             <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.&lt;region&gt;.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ns2:contacts&gt;</span>
        <span class="nt">&lt;ns2:contact&gt;</span>
            <span class="nt">&lt;firstName&gt;</span>John<span class="nt">&lt;/firstName&gt;</span>
            <span class="nt">&lt;lastName&gt;</span>Smith<span class="nt">&lt;/lastName&gt;</span>
            <span class="nt">&lt;workEmailAddress1&gt;</span>john.smith@testcompany.com<span class="nt">&lt;/workEmailAddress1&gt;</span>
            <span class="nt">&lt;workMobilePhone1&gt;</span>61423456789<span class="nt">&lt;/workMobilePhone1&gt;</span>
            <span class="nt">&lt;workCountry&gt;</span>Australia<span class="nt">&lt;/workCountry&gt;</span>
            <span class="nt">&lt;timezone&gt;</span>+10<span class="nt">&lt;/timezone&gt;</span>
        <span class="nt">&lt;/ns2:contact&gt;</span>
        <span class="nt">&lt;ns2:contact&gt;</span>
            <span class="nt">&lt;firstName&gt;</span>Jane<span class="nt">&lt;/firstName&gt;</span>
            <span class="nt">&lt;lastName&gt;</span>Smith<span class="nt">&lt;/lastName&gt;</span>
            <span class="nt">&lt;workEmailAddress1&gt;</span>jane.smith@testcompany.com<span class="nt">&lt;/workEmailAddress1&gt;</span>
            <span class="nt">&lt;workMobilePhone1&gt;</span>61498765432<span class="nt">&lt;/workMobilePhone1&gt;</span>
            <span class="nt">&lt;workCountry&gt;</span>Australia<span class="nt">&lt;/workCountry&gt;</span>
            <span class="nt">&lt;timezone&gt;</span>+10<span class="nt">&lt;/timezone&gt;</span>
        <span class="nt">&lt;/ns2:contact&gt;</span>
   <span class="nt">&lt;/ns2:contacts&gt;</span>
<span class="nt">&lt;/ns2:import&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
  </span><span class="s">"contacts"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
    </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"John"</span><span class="p">,</span><span class="x">
    </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Smith"</span><span class="p">,</span><span class="x">
    </span><span class="s">"workEmailAddress1"</span><span class="o">:</span><span class="x"> </span><span class="s">"john.smith@testcompany.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"workMobilePhone1"</span><span class="o">:</span><span class="x"> </span><span class="s">"61423456789"</span><span class="p">,</span><span class="x">
    </span><span class="s">"workCountry"</span><span class="o">:</span><span class="x"> </span><span class="s">"Australia"</span><span class="p">,</span><span class="x">
    </span><span class="s">"timezone"</span><span class="o">:</span><span class="x"> </span><span class="s">"+10"</span><span class="x">
  </span><span class="p">},{</span><span class="x">
    </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Jane"</span><span class="p">,</span><span class="x">
    </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Smith"</span><span class="p">,</span><span class="x">
    </span><span class="s">"workEmailAddress1"</span><span class="o">:</span><span class="x"> </span><span class="s">"jane.smith@testcompany.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"workMobilePhone1"</span><span class="o">:</span><span class="x"> </span><span class="s">"61498765432"</span><span class="p">,</span><span class="x">
    </span><span class="s">"workCountry"</span><span class="o">:</span><span class="x"> </span><span class="s">"Australia"</span><span class="p">,</span><span class="x">
    </span><span class="s">"timezone"</span><span class="o">:</span><span class="x"> </span><span class="s">"+10"</span><span class="x">
  </span><span class="p">}]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The data could alternatively be provided in a CSV format</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">firstName,lastName,workEmailAddress1,workMobilePhone1,workCountry,timezone
John,Smith,john.smith@testcompany.com,61423456789,Australia,+10
Jane,Smith,jane.smith@testcompany,com,61498765432,Australia,+10
</code></pre>

<blockquote>
<blockquote>
<p>You can then use the <code class="prettyprint">/resources</code> endpoint to upload this information as a Resource in Whispir.</p>
</blockquote>
</blockquote>

<p>Applications can upload a valid CSV, XML or JSON resource containing the contact information that will be imported into the Whispir Platform. Whispir will return the resource ID which can be used to import or update contacts within a workspace through the imports endpoint as described below.</p>

<h4 id="request-structure">Request Structure</h4>

<p>Firstly, the application needs to upload a resource using the Creating Resources.</p>

<p>The resource that needs to be provided for contact importing should be in one the following format:</p>

<ul>
<li>XML</li>
<li>JSON</li>
<li>CSV</li>
</ul>

<p>Once this resource has been imported with the appropriate mime type, the application can reference this resource within the import request.</p>

<h3 id="import-a-resource-using-the-imports-endpoint">Import a resource using the imports endpoint</h3>

<blockquote>
<p>Import</p>

<blockquote>
<p>Doing an import by mapping the respective data columns to contact fields</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.&lt;region&gt;.whispir.com/imports?apikey=&lt;your_api_key&gt;
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
x-api-key: your_api_key
Accept: application/vnd.whispir.import-v1+json

{
    "resourceId": "4FBBC384BCE3DAABFE3",
    "importType" : "contact",
    "importOptions": {
        "fieldMapping" : {
            "firstName": "firstName",
            "lastName": "lastName",
            "workMobilePhone1": "workEmailAddress1",
            "workCountry": "workCountry",
            "timezone": "timezone"
        },
        "importMode" : "replace"
    }

}
</code></pre>

<blockquote>
<blockquote>
<p>If the request was successful, the response contains the information for the calling application to retrieve information about the import process that has been started.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">...
HTTP 1.1 202 Accepted
...
</code></pre>

<p>After receiving a valid resource ID, applications can make a request to the imports endpoint within a workspace and reference the appropriate resource ID. Whispir will then create an import process that will import the specified data into the workspace.</p>

<p>Once the application has an appropriate resource ID to use within the import endpoint, the following request can be used to begin the import process.</p>

<p><strong>Note:</strong> Import processes take place asynchronously. Any contacts will be created once the import process starts, and users will be able to utilise imported contacts as soon as each is completed.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High Level Request Elements</th>
        </tr>
        <tr>
            <th style="width: 50%">Field</th>
            <th style="width: 50%">Details</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">resourceId:</td>
            <td>
                Description
                <ul>
                    <li>
                    The resource identifier returned from the POST to /resources. Resource referred to must be a valid CSV, XML, or JSON file.
                    </li>
                </ul>
                Required
                <ul>
                    <li>
                    Both Tag and Value
                    </li>
                </ul>
                Sample Value
                <ul>
                    <li>
                    4FBBC384BCE3DAABFE3
                    </li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">importType:</td>
            <td>
                Description
                <ul>
                    <li>
                    This defines the resource that will be created through this import process.
                    </li>
                </ul>
                Required
                <ul>
                    <li>
                    Both Tag and Value
                    </li>
                </ul>
                Available Values
                <ul>
                    <li>
                    <b>Contact</b> is the only supported importType at this stage.
                    </li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">importOptions</td>
            <td>
                Description
                <ul>
                    <li>
                    The list of options that are passed through to the import engine.
                    </li>
                </ul>
                Required
                <ul>
                    <li>
                    Both Tag and Value
                    </li>
                </ul>
                Available Values
                <ul>
                    <li>fieldMapping</li>
                    <li>importMode</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">importMode</td>
            <td>
                Description
                <ul>
                    <li>
                    The type of contact import that is occurring.
                    </li>
                </ul>
                Required
                <ul>
                    <li>
                    Both Tag and Value
                    </li>
                </ul>
                One of three options available: 
                <ul>
                    <li>replace</li>
                    <li>duplicate</li>
                    <li>ignore</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">fieldMapping</td>
            <td>
                Description
                <ul>
                    <li>
                    Mapping the data column in your resource file to the contact field value. 
                    </li>
                </ul>
                Required
                <ul>
                    <li>
                    Both Tag and Value
                    </li>
                </ul>
                The following are the mandatory fields to be present and also to be mapped from the resource file: 
                <ul>
                    <li>firstName</li>
                    <li>lastName</li>
                    <li>workMobilePhone1</li>
                    <li>workCountry</li>
                    <li>timezone</li>
                </ul>
                The fieldMapping section is used to map field/value pairs within a resource to the field/value pairs within a Whispir contact profile

- fieldMapping elements must use fields that exist within the resource payload. Any incorrect resource field will return a blank value.
- fieldMapping elements must be valid Whispir Contact fields, ie; &ldquo;firstName&rdquo;.

The complete listing of Contact fields are defined within the [contacts](https://whispir.github.io/api/#creating-new-contacts) API documentation:

- fieldMapping can include custom contact fields previously setup within your organisations Contact profile.

- The minimum requirement must be fulfilled for a contact to be created, this includes firstName, lastName, and one of personalEmailAddress1, workEmailAddress1, workMobilePhone1, personalMobilePhone1, workCountry and timezone.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">firstName</td>
            <td>
                Description
                <ul>
                    <li>
                    First Name of the Contact. Value of this field is used to map the field within the resource.
                    </li>
                </ul>
                Required
                <ul>
                    <li>
                    Both Tag and Value
                    </li>
                </ul>
                Sample value
                <ul>
                    <li>name</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">lastName</td>
            <td>
                Description
                <ul>
                    <li>
                    Last Name of the Contact. Value of this field is used to map the field within the resource.
                    </li>
                </ul>
                Required
                <ul>
                    <li>
                    Both Tag and Value
                    </li>
                </ul>
                Sample value
                <ul>
                    <li>surname</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">workMobilePhone1</td>
            <td>
                Description
                <ul>
                    <li>
                    The mobile phone number of the Contact. Value of this field is used to map the field within the newly created resource.
                    </li>
                </ul>
                Required
                <ul>
                    <li>
                    Both Tag and Value
                    </li>
                </ul>
                Sample value
                <ul>
                    <li>Mobile</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">workCountry</td>
            <td>
                Description
                <ul>
                    <li>
                    The country field of the contact. The value of this field is used to map to the field within the newly created contact.
                    </li>
                </ul>
                Required
                <ul>
                    <li>
                    Both Tag and Value
                    </li>
                </ul>
                Sample value
                <ul>
                    <li>workCountry</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">timezone</td>
            <td>
                Description
                <ul>
                    <li>
                    The timezone field of the contact. The value of this field is used to map to the timezone field within the newly created contact.
                    </li>
                </ul>
                Required
                <ul>
                    <li>
                    Both Tag and Value
                    </li>
                </ul>
                Sample value
                <ul>
                    <li>timezone</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

        <h1 id="contact-us">Contact Us</h1>

<p>As much as we try to keep this documentation up to date, it&rsquo;s possible that some features are not listed or aren&rsquo;t completely documented.</p>

<p>If you cannot find the information you&rsquo;re after, or you generally have a question you&rsquo;d like to ask, please send us an email at <a href="mailto:support@whispir.io">support@whispir.io</a>, or tweet @whispir.</p>

<p>Thank you.</p>

<p>The Whispir.io Team</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="go">json</a>
                <a href="#" data-language-name="xml">xml</a>
          </div>
      </div>
    </div>
  </body>
</html>
